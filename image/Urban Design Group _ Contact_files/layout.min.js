var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_slicedToArray=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],o=!0,n=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(i.push(a.value),!t||i.length!==t);o=!0);}catch(e){n=!0,r=e}finally{try{!o&&s.return&&s.return()}finally{if(n)throw r}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();define("layout/util/dataPreparationsForAnchors",["lodash","coreUtils","experiment"],function(e,t,i){"use strict";function o(e,i,o){return t.boundingLayout.getBoundingHeight({height:e,width:i,rotationInDegrees:o})}function n(e,n,r){var a=e.id,s=e.layout?e.layout.rotationInDegrees:0,u=r.height[a],c=void 0;c=i.isOpen("layout_verbs_with_anchors")?r.top[a]:r.top&&void 0!==r.top[a]?r.top[a]:e.layout&&e.layout.y||0,n.currentHeight[e.id]=s?o(u,r.width[a],s):u,n.heightDiff[a]=n.currentHeight[e.id]-u,n.currentY[a]=s?function(e,i,o,n){return t.boundingLayout.getBoundingY({y:e,height:i,width:o,rotationInDegrees:n})}(c,u,r.width[a],s):c,n.topDiff[a]=c-n.currentY[a]}function r(i,a,s,u,c,l){if(e.has(s.height,i.id)){!function(e,t,i){var o=e.id;e.layout&&e.layout.rotationInDegrees&&(t.noHeightChange[o]=!0),i.shrinkableContainer[o]?t.shrinkableContainer[o]=!0:function(e){return"Document"===e.type||"wysiwyg.viewer.components.PagesContainer"===e.componentType}(e)&&(t.ignoreOriginalValue[o]=!0)}(i,a,s),n(i,a,s),a.minHeight[i.id]=function(t,i,n){var r=t.id;if(r&&!function(t){return t&&e.includes(d,t)}(r)){return o(Math.max(n.minHeight[r]||0,g),i,t.layout.rotationInDegrees)}return n.minHeight[r]||0}(i,s.width[i.id]||i.layout.width,a),a.currentHeight[i.id]=Math.max(a.currentHeight[i.id],a.minHeight[i.id]),a.collapsed[i.id]&&(a.currentHeight[i.id]=0),a.flat[i.id]=i;var h=u+a.currentY[i.id]-c,p=a.currentHeight[i.id];a.sortingY[i.id]=h,a.valueForFirstLockedAnchor[i.id]={pusherId:null,value:-Number.MAX_VALUE};var m=t.dataUtils.getChildrenData(i,l);e.forEach(m,function(e){r(e,a,s,h,p||5e3,l)})}}function a(e,t,i){return{distance:i,type:e,targetComponent:t,locked:!0,notEnforcingMinValue:!0}}function s(t,i,o,n){var r=t;t.$cloned||((r=e.clone(r)).layout=e.clone(r.layout),r.layout.anchors=e.clone(r.layout.anchors),r.$cloned=!0);return r.layout.anchors.push(a("TOP_TOP",i,o),a("BOTTOM_BOTTOM",i,n)),r}function u(t){return"wysiwyg.viewer.components.PopupContainer"===(e.get(t,"components.length")&&e.get(t,"components[0].componentType"))}function c(t,i,o){var n={flat:{},sortingY:{},minHeight:{},shrinkableContainer:{},ignoreOriginalValue:{},noHeightChange:{},containerHeightMargin:{},currentHeight:{},currentY:{},heightDiff:{},topDiff:{},locked:{},valueForFirstLockedAnchor:{}};n.containerHeightMargin=i.containerHeightMargin||{},n.minHeight=e.clone(i.minHeight||{}),n.collapsed=e.clone(i.collapsed||{}),n.injectedAnchors=i.injectedAnchors||{},n.__isPopup=u(t),function(e,t,i,o){r(e,t,i,0,0,o)}(t,n,i,o),function(t){e.forEach(t,function(i,o){if(i.layout&&i.layout.anchors){var n=e.filter(i.layout.anchors,{type:"LOCK_BOTTOM"});e.isEmpty(n)||(e.forEach(n,function(e){t[o]=s(t[o],e.targetComponent,e.topToTop,e.distance),t[e.targetComponent]=s(t[e.targetComponent],o,-1*e.topToTop,-1*e.distance)}),e.remove(t[o].layout.anchors,{type:"LOCK_BOTTOM"}))}})}(n.flat);var a=e.sortBy(e.keys(n.flat),function(e){return n.sortingY[e]});return delete n.sortingY,{structureData:n,sortedIds:a}}function l(i,o,n,r){if(!e.has(i.height,r.id))return 0;o=o||0,o+=i.top[r.id];var a=t.dataUtils.getChildrenData(r,n);return a=e.reject(a,{layout:{fixedPosition:!0}}),Math.max(o+i.height[r.id],Math.max.apply(null,e.map(a,e.partial(l,i,o,n))))}var d=["WIX_ADS"],g=5;return{getDataForAnchorsAndSort:c,fixMeasureMap:function(t,i){e.forEach(i.flat,function(e,o){t.height[o]=i.currentHeight[o]-i.heightDiff[o],t.top[o]=u(e)?0:i.currentY[o]+i.topDiff[o]})},maxMeasureMapHeight:l}}),define("layout/util/anchors",["lodash","layout/util/dataPreparationsForAnchors"],function(e,t){"use strict";function i(e,t){return(t?f.MOBILE:f.DESKTOP)[e.componentType]}function o(e,t,i,o){return t!==i&&(o.dirty[e]=!0,o.changedCompsMap[e]=o.flat[e]),o.dirty[e]}function n(t,i,o,n){var r=o[n.targetComponent],a=o[i];n.notEnforcingMinValue&&!e.isEmpty(a)&&(n.notEnforcingMinValue=!1),r[i]=t;var s=Math.max.apply(null,e.values(r));return n.notEnforcingMinValue&&delete r[i],s}function r(e,t,i,o,n){var r=e.targetComponent,a=t.valueForFirstLockedAnchor[r];a&&(e.locked||null===n?(a.pusherId&&(i[r]={},i[r][a.pusherId]=a.value),delete t.valueForFirstLockedAnchor[r]):(a.pusherId=o,a.value=Math.max(n,a.value)))}function a(e,t){return t-=function(e){return e%1}(t-e)}function s(t,i){return e.has(t.currentHeight,i)}function u(t,i){return function(t,i){return e.get(t.collapsed,i.fromComp,!1)&&e.includes([g,h],i.type)}(t,i)?0:i.distance}function c(e,t,i,o){var n=void 0;return o.shrinkableContainer[i]?n=t:e.locked?n=t+u(o,e):(n=t+p,o.ignoreOriginalValue[i]||(n=Math.max(n,e.originalValue))),n}function l(t,i,o,n){var r=t;return e.isNumber(n.minHeight[i])&&t<n.minHeight[i]&&(r=n.minHeight[i],o.notEnforcingMinValue&&(o.notEnforcingMinValue=!1,n.dirty[i]=!0,n.changedCompsMap[i]=n.flat[i])),r}function d(o,n,r,a,s,u,c,l){var d=t.getDataForAnchorsAndSort(o,n,a),g=d.structureData,h=d.sortedIds,p=e.invert(h);g.dirty={},g.toTopAnchorsY={},g.toBottomAnchorsHeight={},g.locked=u,g.changedCompsMap=g.flat,g.ignoreBottomBottom=!!l,e.forEach(g.flat,function(e,t){g.dirty[t]=!0,g.toTopAnchorsY[t]={},g.toBottomAnchorsHeight[t]={}}),c&&(g.changedCompsMap=e.pick(g.flat,e.keys(c)));var f=function(t,o,n,r,a,s,u){function c(t){var c=function(e,t,i){return"masterPage"===e?[]:i.injectedAnchors[e]||t[e]||[]}(t,r,n),d=Number.MAX_VALUE;return!n.dirty[t]||a&&!i(n.flat[t],u)||e.forEach(c,function(e){if(y[e.type]&&n.flat[e.targetComponent]&&(!a||i(n.flat[e.targetComponent],u))){e.targetComponent===s&&(l=!0);var r=y[e.type](t,e,n)?o[e.targetComponent]:Number.MAX_VALUE;d=Math.min(r,d)}}),n.dirty[t]=!1,d}for(var l=!1,d=t.length,g=0;g<d;){var h=c(t[g]);g=Math.min(g+1,h)}return l}(h,p,g,r,s,o.id,a);if(t.fixMeasureMap(n,g),!f&&e.includes(m,o.type)){var w=n.height[o.id];n.height[o.id]=t.maxMeasureMapHeight(n,0,a,o),n.height[o.id]!==w&&(g.changedCompsMap[o.id]=g.flat[o.id])}return g.changedCompsMap}var g="BOTTOM_TOP",h="BOTTOM_PARENT",p=10,m=["Page","Document"],f={MOBILE:{"mobile.core.components.MasterPage":!0,"wysiwyg.viewer.components.HeaderContainer":!0,"wysiwyg.viewer.components.SiteRegionContainer":!0,"wysiwyg.viewer.components.PagesContainer":!0,"wysiwyg.viewer.components.PageGroup":!0,"wysiwyg.viewer.components.FooterContainer":!0,"wysiwyg.viewer.components.SiteBackground":!0},DESKTOP:{"mobile.core.components.MasterPage":!0,"wysiwyg.viewer.components.HeaderContainer":!0,"wysiwyg.viewer.components.PagesContainer":!0,"wysiwyg.viewer.components.PageGroup":!0,"wysiwyg.viewer.components.FooterContainer":!0,"wysiwyg.viewer.components.SiteBackground":!0}},y={};return y.TOP_TOP=function(t,i,c){var l=i.targetComponent;if(!s(c,l)||!s(c,t))return!1;if(e.has(c.locked,l))return!1;var d=c.currentY[l],g=c.currentY[t]+u(c,i);return r(i,c,c.toTopAnchorsY,t,null),g=n(g,t,c.toTopAnchorsY,i),g=a(d,g),c.currentY[l]=g,o(l,d,g,c)},y[g]=function(t,i,c){var l=i.targetComponent;if(!s(c,l)||!s(c,t))return!1;if(e.has(c.locked,l))return!1;var d=c.currentY[l],g=c.currentHeight[t]+c.currentY[t],h=null;return i.locked?g+=u(c,i):(h=g+p,g=c.valueForFirstLockedAnchor[l]?Math.max(g+p,i.originalValue):h),g=Math.max(g,c.currentY[t]+c.currentHeight[t]/2),r(i,c,c.toTopAnchorsY,t,h),g=n(g,t,c.toTopAnchorsY,i),g=a(d,g),c.currentY[l]=g,o(l,d,g,c)},y[h]=function(t,i,r){var a=i.targetComponent;if(e.get(r.collapsed,a))return!1;if(!s(r,a)||!s(r,t))return!1;if(e.has(r.locked,a))return!1;if(r.flat[a].layout&&r.flat[a].layout.rotationInDegrees)return!1;var u=r.currentHeight[a],d=c(i,r.currentHeight[t]+r.currentY[t]+(r.containerHeightMargin[a]||0),a,r);return d=l(d,a,i,r),d=n(d,t,r.toBottomAnchorsHeight,i),r.currentHeight[a]=d,o(a,u,d,r)},y.BOTTOM_BOTTOM=function(t,i,r){if(r.ignoreBottomBottom)return!1;var a=i.targetComponent;if(!s(r,a)||!s(r,t))return!1;if(e.has(r.locked,a))return!1;if(r.flat[a].layout&&r.flat[a].layout.rotationInDegrees)return!1;var u=r.currentHeight[a],d=c(i,r.currentHeight[t]+r.currentY[t]-r.currentY[a],a,r);return d=l(d,a,i,r),d=n(d,t,r.toBottomAnchorsHeight,i),r.currentHeight[a]=d,o(a,u,d,r)},{enforceAnchors:d,HARD_WIRED_COMPS_TO_RELAYOUT:{SITE_FOOTER:!0,SITE_HEADER:!0,SITE_PAGES:!0,PAGES_CONTAINER:!0,masterPage:!0,SITE_BACKGROUND:!0}}}),define("layout/util/reduceDistancesAlgorithm/sortByAnchors",["lodash"],function(e){"use strict";function t(t,i){function o(t,r){if(function(t,i){return e.has(t,i)}(n,t)){var a=e.max([n[t],r+1]);n[t]=a;var s=e.map(i[t],"targetComponent");e.forEach(s,function(e){o(e,a)})}}var n=e.reduce(t,function(e,t){return e[t.id]=0,e},{}),r=function(t,i){var o=e.reduce(t,function(t,o){var n=i[o.id];return e.forEach(n,function(e){t[e.targetComponent]=!0}),t},{});return e.filter(t,function(e){return!o[e.id]})}(t,i);return e.forEach(r,function(e){o(e.id,0)}),e.sortBy(t,function(e){return n[e.id]})}return t}),define("layout/util/reduceDistancesAlgorithm/anchorsTypes",[],function(){"use strict";return{TOP_TOP:"TOP_TOP",BOTTOM_TOP:"BOTTOM_TOP",BOTTOM_PARENT:"BOTTOM_PARENT"}}),define("layout/util/reduceDistancesAlgorithm/createAnchorsDataManager",["lodash","layout/util/reduceDistancesAlgorithm/anchorsTypes"],function(e,t){"use strict";function i(i,n,r,a){function s(t){return a.shrinkableContainer[t.targetComponent]?e.assign({},t,{locked:!0,distance:0}):t}function u(i){return a.collapsed[i.fromComp]&&function(i){return i.locked&&e.includes([t.BOTTOM_TOP,t.BOTTOM_PARENT],i.type)}(i)?e.assign({},i,{distance:0}):i}function c(t){t=function(t){return e.flow([u])(t)}(t),g.from[t.fromComp]=g.from[t.fromComp]||[],g.from[t.fromComp].push(t),g.to[t.targetComponent]=g.to[t.targetComponent]||[],g.to[t.targetComponent].push(t)}function l(t){t=function(t){return e.flow([s,u])(t)}(t),h.from[t.fromComp]=t,h.to[t.targetComponent]=h.to[t.targetComponent]||[],h.to[t.targetComponent].push(t)}var d=e.flatten(e.values(i)),g={from:{},to:{}},h={from:{},to:{}},p=e.filter(d,function(t){return r?o[t.fromComp]&&o[t.targetComponent]:e.has(n,t.fromComp)&&e.has(n,t.targetComponent)});return e.forEach(p,function(e){e.type===t.BOTTOM_PARENT?l(e):c(e)}),{anchors:p,siblingsAnchors:g,childToParentAnchors:h}}var o={SITE_FOOTER:!0,SITE_HEADER:!0,SITE_PAGES:!0,PAGES_CONTAINER:!0,masterPage:!0,SITE_BACKGROUND:!0};return function(t,o,n,r){return new function(t,o,n,r){var a=i(t,o,n,r);e.merge(this,{getComponentPushers:function(e){return a.siblingsAnchors.to[e]||[]},getComponentAnchorToParent:function(e){return a.childToParentAnchors.from[e]}})}(t,o,n,r)}}),define("layout/util/reduceDistancesAlgorithm/createMeasureMapManager",["lodash","coreUtils"],function(e,t){"use strict";function i(i,o){return e(o).pickBy(function(t){return e.get(t,"layout.rotationInDegrees")}).mapValues(function(e,o){var n=i.top[o],r=i.height[o],a=i.width[o];return{heightDiff:function(e,i,o){return t.boundingLayout.getBoundingHeight({height:e,width:i,rotationInDegrees:o})}(r,a,e.layout.rotationInDegrees)-r,yDiff:function(e,i,o,n){return t.boundingLayout.getBoundingY({y:e,height:i,width:o,rotationInDegrees:n})}(n,r,a,e.layout.rotationInDegrees)-n}}).value()}var o=5;return function(t,n){return new function(t,n){function r(t){return e.get(u,[t,"yDiff"],0)}function a(t){return e.get(u,[t,"heightDiff"],0)}var s=t,u=i(t,n);e.merge(this,{get:function(){return s},getComponentTop:function(t){if(!e.isUndefined(s.top[t]))return s.top[t]+r(t)},getComponentHeight:function(t){if(!e.isUndefined(s.height[t]))return s.collapsed[t]?0:s.height[t]+a(t)},getComponentMinHeight:function(t){return s.collapsed[t]?0:e.max([s.minHeight[t],o])},getContainerHeightMargin:function(e){return s.containerHeightMargin[e]||0},isCollapsed:function(e){return Boolean(s.collapsed[e])},isShrinkableContainer:function(e){return Boolean(s.shrinkableContainer[e])},getComponentWidth:function(e){return s.width[e]},getSiteWidth:function(){return s.width.site},getClientSize:function(){return{width:s.clientWidth,height:s.clientHeight}},setComponentTop:function(e,t){s.top[e]=t-r(e)},setComponentHeight:function(e,t){s.height[e]=t-a(e)}})}(t,n)}}),define("layout/util/reduceDistancesAlgorithm/createOriginalValuesManager",["lodash"],function(e){"use strict";return function(t,i){return new function(t,i){e.merge(this,{getOriginalTop:function(o){return e.get(t,[o,"top"])||i[o].y},getOriginalHeight:function(o){return e.get(t,[o,"height"])||i[o].height}})}(t,i)}}),define("layout/util/reduceDistancesAlgorithm/generateEnforceData",["lodash","coreUtils","siteUtils","layout/util/reduceDistancesAlgorithm/sortByAnchors","layout/util/reduceDistancesAlgorithm/createAnchorsDataManager","layout/util/reduceDistancesAlgorithm/createMeasureMapManager","layout/util/reduceDistancesAlgorithm/createOriginalValuesManager"],function(e,t,i,o,n,r,a){"use strict";function s(i,n,r,a,s){return a?function(i,n,r){function a(i){var s=u[i.id],c=t.dataUtils.getChildrenKey(i,r),l=i[c],d=e.omit(i,c);if(s){var g=e.reduce(l,function(t,i){return e.includes(s,i.id)&&t.push(a(i)),t},[]);d.children=o(g,n)}else d.children=[];return d}return e.find(u.ROOT,function(e){return e===i.id})?a(i):null}(i,r,s):function(i,n,r,a){function s(i){var u=t.dataUtils.getChildrenKey(i,a),c=i[u],l=e.omit(i,u),d=Boolean(n.collapsed[i.id])?[]:e(c).filter(function(t){return e.has(n.height,t.id)}).map(s).value();return l.children=o(d,r),l}return s(i)}(i,n,r,s)}var u={ROOT:["masterPage","SITE_BACKGROUND"],masterPage:["SITE_HEADER","PAGES_CONTAINER","SITE_FOOTER"],PAGES_CONTAINER:["SITE_PAGES"]};return function(o,u,c,l,d,g,h){var p=d?i.constants.VIEW_MODES.MOBILE:i.constants.VIEW_MODES.DESKTOP,m=function(t,i,o,n){var r=e.get(o,[t.id,n]);return e.merge({},r,i.injectedAnchors)}(o,u,c,p),f=s(o,u,m,g,d);if(!f)return null;var y=function(t){function i(t){o[t.id]=t,e.forEach(t.children,i)}var o={};return i(t),o}(f),w=function(o,n){return e.mapValues(o,function(o){if(o.layout){var r=e.cloneDeep(o.layout);if(e.assign(r,t.boundingLayout.getBoundingLayout(o.layout)),i.layout.isVerticallyStretchedToScreen(r)){r.isVerticallyStretchedToScreen=!0;var a={width:n.clientWidth,height:n.clientHeight},s=n.width.site;r.minHeight=i.positionAndSize.getHeightInPixelsRounded(o.layout,null,a,s),delete r.docked.top,delete r.docked.bottom}return r}})}(y,u);return{structure:f,flatDataMap:y,layoutsMap:w,measureMapManager:r(u,y),anchorsDataManager:function(e,t,i,o){return n(e,o,i,t)}(m,u,g,y),originalValuesManager:function(t,i,o,n){var r=e.get(i,[t.id,o]);return a(r,n)}(o,l,p,w),lockedCompsMap:h||{}}}}),define("layout/util/reduceDistancesAlgorithm/minHeightDataUtils",["lodash"],function(e){"use strict";function t(e){var t=e.absoluteHeight;if(e.topPercents||e.bottomPercents){var i=1-((e.topPercents||0)+(e.bottomPercents||0))/100;return Math.ceil(t/i)}return t}function i(e,t,i){this.absoluteHeight=e||0,t&&(this.topPercents=t),i&&(this.bottomPercents=i)}function o(e,t){this.absoluteHeight=e,this.dynamicHeights=t}return i.prototype.clone=function(){return new i(this.absoluteHeight,this.topPercents,this.bottomPercents)},i.prototype.addAbsoluteHeight=function(e){return this.absoluteHeight+=e,this},i.prototype.addMinHeightData=function(e){this.absoluteHeight+=e.absoluteHeight;var t=(this.topPercents||0)+(e.topPercents||0);t&&(this.topPercents=t);var i=(this.bottomPercents||0)+(e.bottomPercents||0);return i&&(this.bottomPercents=i),this},o.prototype.merge=function(e){return this.dynamicHeights=this.dynamicHeights.concat(e.dynamicHeights),this.absoluteHeight=Math.max(this.absoluteHeight,e.absoluteHeight),this},o.prototype.solve=function(){if(e.isEmpty(this.dynamicHeights))return this.absoluteHeight;var i=Math.ceil(e(this.dynamicHeights).map(t).max()),o=Math.max(this.absoluteHeight,i);return function(t,i){return e.reduce(t,function(e,t){var o=Math.ceil(t.topPercents/100*i),n=Math.ceil(t.bottomPercents/100*i),r=o+t.absoluteHeight+n;return r>e?r:e},i)}(this.dynamicHeights,o)},{createMinHeightData:function(e,t,o){return new i(e,t,o)},createMinHeightDataForDockedTopData:function(e){return new i(e.px,e.pct)},createMinHeightDataForDockedBottomData:function(e){return new i(e.px,null,e.pct)},createMinHeightDataForVerticallyCenteredDockedData:function(t){var o=void 0,n=void 0;return e.isNumber(t.pct)&&(t.pct<0?n=2*Math.abs(t.pct):o=2*t.pct),new i(2*Math.abs(t.px),o,n)},createChainMinHeightData:function(t){var i=0,n=[];return e.forEach(t,function(e){!function(e){return!e.topPercents&&!e.bottomPercents}(e)?n.push(e):i=Math.max(i,e.absoluteHeight)}),new o(i,n)}}}),define("layout/util/reduceDistancesAlgorithm/reduceDistancesAlgorithmUtils",[],function(){"use strict";return{getAnchorMinDistance:function(e){return e.locked?e.distance:10}}}),define("layout/util/reduceDistancesAlgorithm/enforceComponentsMinHeight",["lodash","siteUtils","layout/util/reduceDistancesAlgorithm/minHeightDataUtils","layout/util/reduceDistancesAlgorithm/reduceDistancesAlgorithmUtils","layout/util/reduceDistancesAlgorithm/anchorsTypes"],function(e,t,i,o,n){"use strict";function r(e,o,n){var r=i.createMinHeightData(),a=function(e){var o=t.layout.getTopDockData(e);return o?i.createMinHeightDataForDockedTopData(o):i.createMinHeightData(e.y)}(e),s=t.layout.isDockedToDirection(e,"top");return o||s||!n||a.absoluteHeight<0?a:r}function a(t,i,r){var a=r.type===n.TOP_TOP?0:i,s=o.getAnchorMinDistance(r);return e.map(t,function(e){var t=a+s;return e.clone().addAbsoluteHeight(t)})}function s(n,s,u,c,l,d){function g(e,t){t&&t.locked&&(f.isShrinkableContainer=!0),f.chainsMinHeightData.merge(e)}function h(n,r,a){var u=r?a.forDocked:a.forNonDocked,l=function(e){var n=t.layout.getBottomDockData(d[e]),r=void 0;if(n)r=i.createMinHeightDataForDockedBottomData(n);else{var a=s.getComponentAnchorToParent(e);r=i.createMinHeightData(o.getAnchorMinDistance(a))}var u=c[e];return r.clone().addAbsoluteHeight(u)}(n),g=e.map(u,function(e){return e.clone().addMinHeightData(l)});return i.createChainMinHeightData(g)}function p(t){var o=s.getComponentPushers(t),n=e.isEmpty(o),g=!!u[t];return n||g?function(e,t){var i=d[e];return{forNonDocked:[r(i,t,!1)],forDocked:[r(i,t,!0)]}}(t,g):function(t,o){var n=!1,r=[],s=[];if(e.forEach(o,function(e){e.locked&&(n=!0);var t=y[e.fromComp],i=c[e.fromComp];r=r.concat(a(t.forDocked,i,e)),s=s.concat(a(t.forNonDocked,i,e))}),!n){var u=l.getOriginalTop(t),d=i.createMinHeightData(u);s.push(d)}return{forDocked:r,forNonDocked:s}}(t,o)}function m(e){if(t.layout.isVerticallyCentered(d[e.id]))g(function(e,o){var n=t.layout.getVerticallyCenteredDockData(o),r=c[e],a=i.createMinHeightDataForVerticallyCenteredDockedData(n).addAbsoluteHeight(r);return i.createChainMinHeightData([a])}(e.id,d[e.id]));else{var o=p(e.id);y[e.id]=o;var n=s.getComponentAnchorToParent(e.id),r=!!n,a=t.layout.isDockedToDirection(d[e.id],"bottom");(a||r)&&g(h(e.id,a,o),n)}}var f={value:0,chainsMinHeightData:i.createChainMinHeightData(),isShrinkableContainer:!1},y={};return e.forEach(n.children,m),f.value=f.chainsMinHeightData.solve(),delete f.chainsMinHeightData,f}return function(i,o,n,r,a,u){function c(i,n){if(o.isCollapsed(i.id))return o.setComponentHeight(i.id,0),void(d[i.id]=0);var a=t.layout.isVerticallyStretched(u[i.id]),s=function(e,t,i){var n=[],a=u[e.id];if(!a)return n;var s=a.aspectRatio||0,c=i||a.isVerticallyStretchedToScreen||s||o.isShrinkableContainer(e.id)||t&&t.isShrinkableContainer;if(s){var l=o.getComponentWidth(e.id);n.push(s*l)}if(t&&(n.push(t.value+o.getContainerHeightMargin(e.id)),!c)){var d=r.getOriginalHeight(e.id);n.push(d)}if(c){var g=o.getComponentMinHeight(e.id),h=a.minHeight||0;n.push(g,h)}return n}(i,n,a);!function(t,i,n){n?(i.length&&o.setComponentHeight(t,e.max(i)),d[t]=o.getComponentHeight(t)):d[t]=i.length?e.max(i):0}(i.id,s,!a)}function l(t){var i=t.children,g=void 0,h=a[t.id];!e.isEmpty(i)&&function(e){return!o.isCollapsed(e)}(t.id)&&(e.forEach(i,l),h||(g=s(t,n,a,d,r,u))),c(t,g)}var d={};l(i)}}),define("layout/util/reduceDistancesAlgorithm/enforceAnchorsAndDocking",["lodash","siteUtils","layout/util/reduceDistancesAlgorithm/reduceDistancesAlgorithmUtils","layout/util/reduceDistancesAlgorithm/anchorsTypes"],function(e,t,i,o){"use strict";return function(n,r,a,s,u,c){function l(e,i){var o=function(e,i,o,n){var r={width:n.getComponentWidth(o),height:n.getComponentHeight(o)},a=n.getClientSize(),s=n.getComponentHeight(e);return t.positionAndSize.getYInPixelsRounded(i,r,a,s)}(e.id,c[e.id],i,r);r.setComponentTop(e.id,o)}function d(e,i){if(t.layout.isVerticallyStretched(c[e.id])&&!r.isCollapsed(e.id)){var o=function(e,i,o){var n=o.getComponentHeight(i),r=o.getComponentWidth(i),a=o.getClientSize(),s=o.getSiteWidth();return t.positionAndSize.getHeightInPixelsRounded(e,{width:r,height:n},a,s)}(c[e.id],i,r);r.setComponentHeight(e.id,o)}}function g(t){var n=a.getComponentPushers(t.id);if(!e.isEmpty(n)){var s=function(t,n){var r=[];return e.some(t,"locked")?(e.forEach(t,function(e){var t=n.getComponentTop(e.fromComp)+(e.type===o.TOP_TOP?0:n.getComponentHeight(e.fromComp))+i.getAnchorMinDistance(e);r.push(t)}),e.max(r)):null}(n,r);null!==s&&r.setComponentTop(t.id,s)}}function h(t){var n=a.getComponentPushers(t.id);if(!u[t.id])if(e.isEmpty(n))r.setComponentTop(t.id,s.getOriginalTop(t.id));else{var c=function(t,n,r,a){var s=[],u=e.every(n,{locked:!1});return e.forEach(n,function(e){if(u){var n=r.getOriginalTop(t);s.push(n)}var c=a.getComponentTop(e.fromComp)+(e.type===o.TOP_TOP?0:a.getComponentHeight(e.fromComp))+i.getAnchorMinDistance(e);s.push(c)}),e.max(s)}(t.id,n,s,r);r.setComponentTop(t.id,c)}}function p(i,o){e.forEach(i,function(e){t.layout.isVerticallyDocked(c[e.id])?function(e,t){l(e,t.id),d(e,t.id)}(e,o):h(e)})}function m(o){function n(t,o){var u=t.fromComp,c=function(e,t){var i=r.getComponentTop(e),o=t-r.getComponentHeight(e);return o>=i?null:(r.setComponentTop(e,o),s=!0,o)}(u,o-i.getAnchorMinDistance(t));if(null!==c){var l=a.getComponentPushers(u);e.forEach(l,function(e){n(e,c)})}}var s=!1,u=e.filter(o,function(e){return function(e){return t.layout.isDockedToDirection(e,"bottom")}(c[e.id])});return e.forEach(u,function(t){!function(t){var i=r.getComponentTop(t),o=a.getComponentPushers(t);e.forEach(o,function(e){n(e,i)})}(t.id)}),s}function f(i){var o=i.children;if(!e.isEmpty(o)&&function(e){return!r.isCollapsed(e)}(i.id)){p(o,i);m(o)&&function(i,o){e.forEach(i,function(e){var i=t.layout.isDockedToDirection(c[e.id],"top"),o=t.layout.isDockedToDirection(c[e.id],"bottom");i||o||g(e)})}(o),e.forEach(o,f)}}f(n)}}),define("layout/util/reduceDistancesAlgorithm/reduceDistancesAlgorithm",["layout/util/reduceDistancesAlgorithm/enforceComponentsMinHeight","layout/util/reduceDistancesAlgorithm/enforceAnchorsAndDocking"],function(e,t){"use strict";return{enforce:function(i){return e(i.structure,i.measureMapManager,i.anchorsDataManager,i.originalValuesManager,i.lockedCompsMap,i.layoutsMap),t(i.structure,i.measureMapManager,i.anchorsDataManager,i.originalValuesManager,i.lockedCompsMap,i.layoutsMap),i.flatDataMap}}}),define("layout/util/layoutAlgorithm",["lodash","experiment","coreUtils","siteUtils","layout/util/anchors","layout/util/reduceDistancesAlgorithm/generateEnforceData","layout/util/reduceDistancesAlgorithm/reduceDistancesAlgorithm"],function(e,t,i,o,n,r,a){"use strict";function s(s,u,c,l,d,g,h,p,m){var f=d?o.constants.VIEW_MODES.MOBILE:o.constants.VIEW_MODES.DESKTOP,y=e.get(c,[s.id,f]);if(y){if(t.isOpen("layout_verbs_with_anchors")){var w=r(s,u,c,l,d,g,h);return w?a.enforce(w):{}}return n.enforceAnchors(s,u,y,d,g,h,p,m)}return function(t,o,n){function r(t){e.has(o.height,t.id)&&(a[t.id]=t,e.forEach(i.dataUtils.getChildrenData(t,n),r))}var a={};return r(t),a}(s,u,d)}function u(t,i){return e.has(t.height,i)}function c(t,o,n){var r=i.dataUtils.getChildrenData(o,n),a=e.find(r,{id:"SITE_FOOTER"});t.height.masterPage=function(t,o,n){function r(t,s){if(s=s||0,u(o,t.id)){var c=s+o.top[t.id]+o.height[t.id];c>a&&(a=c);var l=i.dataUtils.getChildrenData(t,n);e.forEach(l,function(e){r(e,s+o.top[t.id])})}}var a=0;return r(t),a}(a,t,n)}function l(t,i,o){return function(t,i){return e(i).map(function(e){return u(t,e.id)?function(e,t){return e.top[t]+e.height[t]}(t,e.id):0}).max()}(t,i)-t.top.PAGES_CONTAINER-o}function d(t,o,n,r,a){var s=function(t,o){var n=i.dataUtils.getChildrenData(t,o);return e.reject(n,function(t){return p[t.id]||e.get(t,["layout","fixedPosition"])})}(o,a);if(!e.isEmpty(s)){var u=e.get(r,["pagesToFooterGap"],0),d=l(t,s,u);d>t.height.PAGES_CONTAINER&&(t.height.PAGES_CONTAINER=d,t.height.SITE_PAGES=d,n&&(t.height[n.pageId]=d),t.top.SITE_FOOTER=t.top.PAGES_CONTAINER+d+u)}c(t,o,a)}function g(t,o){var n=i.DALFactory.getPointersInstance(o),r=i.DALFactory.getInstance(o),a=t&&r.get(n.data.getDataItem(t,o.MASTER_PAGE_ID));return e.get(a,"ignoreBottomBottomAnchors")}function h(t,i,o,n,r,a){var c={},l=void 0,h=void 0;o.originalValuesMap=o.originalValuesMap||{};var p=o.isMobileView();return t.inner&&(h=e.get(t,"inner.structure.id"),l=g(h,o),c.inner=s(t.inner.structure,i,o.anchorsMap,o.originalValuesMap,p,n,r,a,l),i.height.SITE_PAGES&&(i.height.SITE_PAGES=i.height[t.inner.pageId])),e.forOwn(t,function(m,f){if("inner"!==f&&(h=e.get(m,["structure","id"]),l=g(h,o),c[f]=s(m.structure,i,o.anchorsMap,o.originalValuesMap,p,n,r,a,l)),"outer"===f&&!p&&!function(e){return!u(e,"SITE_HEADER")}(i)){var y=o.getMasterPageLayoutSettings();y.useDesktopSectionsLayout&&d(i,m.structure,t.inner,y,p)}}),c}var p={SITE_FOOTER:!0,SITE_HEADER:!0,PAGES_CONTAINER:!0};return{enforceStructure:s,enforceAllStructures:h}}),define("layout/util/createDOMPatchers",["zepto","lodash","coreUtils"],function(e,t,i){"use strict";function o(t,o,n){t[o]?e(t[o]).css(n):i.log.error("Cannot find node with id {"+o+"} to patch css. Either the node doesn't exist, or it was never measured, or it was measured under a different id.")}function n(t,o,n){t[o]?e(t[o]).attr(n):i.log.error("Cannot find node with id {"+o+"} to patch attributes. Either the node doesn't exist, or it was never measured, or it was measured under a different id.")}function r(e,o,n){e[o]?t.forOwn(n,function(t){e[o].setAttributeNS(t.ns,t.attribute,t.value)}):i.log.error("Cannot find node with id {"+o+"} to patch attributesNS. Either the node doesn't exist, or it was never measured, or it was measured under a different id.")}function a(e,o,n){e[o]?t.forEach(t.keys(n),function(t){e[o][t]=n[t]}):i.log.error("Cannot find node with id {"+o+"} to patch events. Either the node doesn't exist, or it was never measured, or it was measured under a different id.")}function s(o,n,r){if(o[n]){var a=e(o[n]);t.forOwn(r,function(e,t){a.data(t,e)})}else i.log.error("Cannot find node with id {"+n+"} to patch data. Either the node doesn't exist, or it was never measured, or it was measured under a different id.")}return function(e){return{css:t.partial(o,e),attr:t.partial(n,e),attrNS:t.partial(r,e),data:t.partial(s,e),events:t.partial(a,e)}}}),define("layout/util/rootLayoutUtils",["lodash","siteUtils"],function(e,t){"use strict";return{getRootWidth:function(e,i,o){return t.layout.getRootWidth(i,o,e.getSiteWidth())},getRootLeft:function(e,i,o){return t.layout.getRootLeft(i,o,e.getSiteX())}}}),define("layout/util/singleCompLayout",["lodash","zepto","coreUtils","siteUtils","layout/util/rootLayoutUtils","experiment"],function(e,t,i,o,n,r){"use strict";function a(t,i,n,r){var a=e.get(r,"layout.width",0);!function(e){return o.layout.isHorizontallyStretched(e.layout)}(r)?!function(e){return y[e.componentType]}(r)&&e.get(r,"layout.width")?t.width[i]=a:t.width[i]=Math.max(n.offsetWidth,a):t.width[i]=n.offsetWidth}function s(t,i,n,r){var a=e.get(r,"layout.height",0),s=e.get(r,"layout.aspectRatio",0);s&&(a=s*t.width[i]),!function(e){return o.layout.isVerticallyStretched(e.layout)}(r)?!function(e){return y[e.componentType]}(r)&&e.get(r,"layout.height")?t.height[i]=a:t.height[i]=Math.max(n.offsetHeight,a):t.height[i]=n.offsetHeight}function u(t,i,o,n){if(n.isDeadComp[t])!function(t,i,o,n){var r=e.get(n,"layout.width",0),a=e.get(n,"layout.height",0);t.width[i]=r,t.height[i]=a}(n,t,0,o);else{var u=window.getComputedStyle(i);!function(e,t,i,o){(function(e){return"fixed"===e.position})(o)&&(e.fixed[t]=!0,e.top[t]=i.offsetTop,e.left[t]=i.offsetLeft)}(n,t,i,u),function(e,t,i){var o=i.zIndex;"auto"!==o&&(o=parseFloat(o),isNaN(o)||(e.zIndex[t]=o))}(n,t,u),a(n,t,i,o),s(n,t,i,o),r.isOpen("layout_verbs_with_anchors")&&function(e,t,i){e.top[t]=i.offsetTop}(n,t,i),n.left[t]=function(t,i){var o=i.offsetLeft,n=e.get(t,"layout.x",0);return.5===Math.abs(n-o)?n:o}(o,i)}}function c(e){return e.getAttribute("data-dead-comp")}function l(e,t){if(!e)return!1;var i=t(e);return i||!1}function d(t,i,o,n,r,a){var s=i.id,d=l(s,o);if(d&&(C.set(d,[]),r[s]=d,n.isDeadComp[s]=c(d),u(s,d,t,n),!n.isDeadComp[s])){f[i.type]&&f[i.type](s,n,r,a,i),function(t,i,o,n,r,a){if(v[t]){var s=v[t];e.isFunction(s)?s(i,o,n,r,a):e.isPlainObject(s)&&e.forEach(e.values(s),function(e){return e(i,o,n,r,a)})}}(i.type,s,n,r,a,i);var g=a.getLayoutFunc(d);g&&(M[i.type]=function(){return g(d)}),M[i.type]&&S(n,d,M[i.type](s,r,n,a,i))}}function g(t,r,a,s,u){var c=t.id,l=t.layout;!function(t,i,n,r){var a={};r&&(o.layout.isVerticallyDocked(r)&&!o.layout.isVerticallyStretchedToScreen(r)||(a.top=p(n.top[t])),o.layout.isVerticallyStretched(r)&&!o.layout.isVerticallyStretchedToScreen(r)||(a.height=p(n.height[t])),e.isEmpty(a)||i.css(t,a))}(c,r,s,l),function(t,o,r,a,s){var u=a.layout;if(u&&i.dockUtils.isHorizontalDockToScreen(u)){var c=n.getRootWidth(s,r,a.rootId),l=0-n.getRootLeft(s,r,a.rootId),d=i.dockUtils.getDockedStyleWithMargins(u,s.getPageMargins(),s.getScreenWidth(),c,l),g=e.pick(d,["left","width"]);r.left[t]=parseInt(g.left,10),o.css(t,g)}}(c,r,s,t,u);var d=a[t.id],g=C.get(d);e.forEach(g,function(e){return e(r)});!s.isDeadComp[c]&&m[t.type]&&m[t.type](c,r,s,t,u)}function h(e,t){M[e]&&console.warn(e+" is already registered to 'registerCustomLayoutFunction'"),M[e]=t}var p=i.style.unitize,m={},f={},y={},w={},v={},C=new WeakMap,b=function(e){return function(t){return function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=e.get(t)||[];e.set(t,o.concat(i))}}}(C),M={},S=function(o,n,r){var a=b(n),s=i.constants.COMP_LAYOUT_OPTIONS.CHANGES_TYPES,u=[s.data];if(e.isFunction(r))a([r]);else if(e.isArray(r)){var c=e(r).reject(function(t){return e.isEmpty(t.changes)}).map(function(e){return e.id=e.node.getAttribute("id"),e}).value();!function(i){var o=Object.keys(s),n=i.map(function(i){var n=i.type,r=i.node,a=i.changes;if(!o.includes(n))throw new Error("can not use type "+n+" for patching. only types "+o+" are allowed");return u.includes(n)?function(){var i=t(r);e.forOwn(a,function(e,t){i[n](t,e)})}:function(){return t(r)[n](a)}});a(n)}(c),function(t){var i={height:"height","min-height":"minHeight",width:"width",top:"top"},n=Object.keys(i);e(t).filter({type:s.css}).map(function(t){var o=t.id,r=t.changes,a=e.pick(r,n);return e(a).mapKeys(function(e,t){return i[t]}).transform(function(e,t,i){e[i]=e[i]||{},e[i][o]=t},{}).value()}).forEach(function(t){return function(i){return e.merge(t,i)}}(o))}(c)}};return{patchComponent:g,measureComponent:d,measureComponentChildren:function(t,i,o,n,r){var a=t.id,s=l(a,i);if(s&&!c(s)&&w[t.type]){var u=w[t.type];"function"==typeof u&&(u=u(a,n,t,r)),e.forEach(u,function(s){var u=e.isPlainObject(s),c=u?s.pathArray:s,l=i.apply(void 0,[a].concat(c))||i.apply(void 0,[a,"component"].concat(c));if(l){var d=c.join(""),g=a+d;n[g]=l,o.height[g]=l.offsetHeight,o.width[g]=l.offsetWidth,u&&f[s.type]&&f[s.type](g,o,n,r,t)}})}},isComponentDead:c,registerPatcher:function(e,t){m[e]=t},registerPatchers:function(t,i){m[t]=function(){var t=arguments;e.forEach(i,function(e){e.apply(null,t)})}},registerCustomMeasure:function(e,t){f[e]=t},registerCustomLayoutFunction:h,registerCustomDomChangesFunction:function(e,t){h(e,function(e,i){return t(i[e])})},registerRequestToMeasureDom:function(e){y[e]=!0},registerRequestToMeasureChildren:function(e,t){w[e]=t},registerAdditionalMeasureFunction:function(t,i,o){e.isString(o)&&!e.isEmpty(o)?(v[t]=e.isPlainObject(v[t])?v[t]:{},v[t][o]=i):v[t]=i}}}),define("layout/util/wixappsSingleCompLayout",["lodash","coreUtils","siteUtils","layout/util/rootLayoutUtils","experiment"],function(e,t,i,o,n){"use strict";function r(t,o,n,r){var a=e.get(r,"layout.width",0);!function(e){return i.layout.isHorizontallyStretched(e.layout)}(r)?!function(e){return p[e.componentType]}(r)&&e.get(r,"layout.width")?t.width[o]=a:t.width[o]=Math.max(n.offsetWidth,a):t.width[o]=n.offsetWidth}function a(t,o,n,r){var a=e.get(r,"layout.height",0),s=e.get(r,"layout.aspectRatio",0);s&&(a=s*t.width[o]),!function(e){return i.layout.isVerticallyStretched(e.layout)}(r)?!function(e){return p[e.componentType]}(r)&&e.get(r,"layout.height")?t.height[o]=a:t.height[o]=Math.max(n.offsetHeight,a):t.height[o]=n.offsetHeight}function s(t,i,o,s){if(s.isDeadComp[t])!function(t,i,o,n){var r=e.get(n,"layout.width",0),a=e.get(n,"layout.height",0);t.width[i]=r,t.height[i]=a}(s,t,0,o);else{var u=window.getComputedStyle(i);!function(e,t,i,o){(function(e){return"fixed"===e.position})(o)&&(e.fixed[t]=!0,e.top[t]=i.offsetTop,e.left[t]=i.offsetLeft)}(s,t,i,u),function(e,t,i){var o=i.zIndex;"auto"!==o&&(o=parseFloat(o),isNaN(o)||(e.zIndex[t]=o))}(s,t,u),r(s,t,i,o),a(s,t,i,o),n.isOpen("layout_verbs_with_anchors")&&function(e,t,i){e.top[t]=i.offsetTop}(s,t,i),s.left[t]=function(t,i){var o=i.offsetLeft,n=e.get(t,"layout.x",0);return.5===Math.abs(n-o)?n:o}(o,i)}}function u(e){return e.getAttribute("data-dead-comp")}function c(e,t){if(!e)return!1;var i=t(e);return i||!1}function l(n,r,a,s,u){var c=n.id;!function(t,o,n,r){var a={};r&&(i.layout.isVerticallyDocked(r)&&!i.layout.isVerticallyStretchedToScreen(r)||(a.top=d(n.top[t])),i.layout.isVerticallyStretched(r)&&!i.layout.isVerticallyStretchedToScreen(r)||(a.height=d(n.height[t])),e.isEmpty(a)||o.css(t,a))}(c,r,s,n.layout),function(i,n,r,a,s){var u=a.layout;if(u&&t.dockUtils.isHorizontalDockToScreen(u)){var c=o.getRootWidth(s,r,a.rootId),l=0-o.getRootLeft(s,r,a.rootId),d=t.dockUtils.getDockedStyleWithMargins(u,s.getPageMargins(),s.getScreenWidth(),c,l),g=e.pick(d,["left","width"]);r.left[i]=parseInt(g.left,10),n.css(i,g)}}(c,r,s,n,u);!s.isDeadComp[c]&&g[n.type]&&g[n.type](c,r,s,n,u)}var d=t.style.unitize,g={},h={},p={},m={},f={};return{patchWithoutPositioning:function(e,t,i,o){var n=e.id;!i.isDeadComp[n]&&g[e.type]&&g[e.type](n,t,i,e,o)},patchComponent:l,measureComponent:function(e,t,i,o,n,r){var a=t.id,l=c(a,i);l&&(n[a]=l,s(a,l,e,o),u(l)?o.isDeadComp[a]=!0:(h[t.type]&&h[t.type](a,o,n,r,t),f[t.type]&&f[t.type](a,o,n,r,t)))},measureComponentChildren:function(t,i,o,n,r){var a=t.id,s=c(a,i);if(s&&!u(s)&&m[t.type]){var l=m[t.type];"function"==typeof l&&(l=l(a,n,t,r)),e.forEach(l,function(s){var u=e.isPlainObject(s),c=u?s.pathArray:s,l=i.apply(void 0,[a].concat(c))||i.apply(void 0,[a,"component"].concat(c));if(l){var d=c.join(""),g=a+d;n[g]=l,o.height[g]=l.offsetHeight,o.width[g]=l.offsetWidth,u&&h[s.type]&&h[s.type](g,o,n,r,t)}})}},isComponentDead:u,registerPatcher:function(e,t){g[e]=t},registerPatchers:function(t,i){g[t]=function(){var t=arguments;e.forEach(i,function(e){e.apply(null,t)})}},registerCustomMeasure:function(e,t){h[e]=t},registerRequestToMeasureDom:function(e){p[e]=!0},registerRequestToMeasureChildren:function(e,t){m[e]=t},registerAdditionalMeasureFunction:function(e,t){f[e]=t},maps:{classBasedMeasureChildren:m,classBasedCustomMeasures:h,classBasedPatchers:g}}}),define("layout/util/bodyNodePatcher",["zepto","lodash"],function(e,t){"use strict";return{updateBodyNodeStyle:function(i){var o=e("body"),n=e("html");if(i.isQaMode()&&o.addClass("qa-mode"),i.isMobileView()?(o.addClass("device-mobile-optimized"),n.addClass("device-mobile-optimized")):i.isMobileDevice()||i.isTabletDevice()?o.addClass("device-mobile-non-optimized"):(o.removeClass("device-mobile-optimized").removeClass("device-mobile-non-optimized"),n.removeClass("device-mobile-optimized")),i.isMobileDevice()){var r=t.assign({},i.os,i.browser),a=t(r).keys().filter(function(e){return!0===r[e]}).map(function(e){return"device-"+e}).join(" ");n.addClass(a)}var s=o.css("overflow"),u=i.renderFlags.allowSiteOverflow?null:"hidden";s!==u&&o.css("overflow",u)}}}),define("layout/util/iframesPatcher",["zepto","lodash"],function(e,t){"use strict";return{setIframesSrc:function(i){var o=(i||e)("iframe[data-src]");t.forEach(o,function(e){var t=e.getAttribute("src"),i=e.getAttribute("data-src");i&&(t!==i&&e.setAttribute("src",i),e.removeAttribute("data-src"))})}}}),define("layout/util/layout",["zepto","lodash","layout/util/anchors","layout/util/layoutAlgorithm","coreUtils","loggingUtils","layout/util/createDOMPatchers","layout/util/singleCompLayout","layout/util/wixappsSingleCompLayout","layout/util/bodyNodePatcher","layout/util/iframesPatcher","experiment"],function(e,t,i,o,n,r,a,s,u,c,l,d){"use strict";function g(e,i){var o=t.last(e),r=n.dataUtils.getChildrenData(o,i);return t.transform(r,function(e,t){e[t.id]=!0},{})}function h(e){var i=e[e.length-2];return t.set({},i.id,!0)}function p(e,t,i){return e&&Math.max(t,Math.min(i,e))}function m(e,i,o){var r=i.getSiteData(),a=t.clone(e.layout),s={dataItem:e.dataItem||null,propertiesItem:e.propertiesItem||null,layout:a,styleItem:null,id:e.id,type:function(e){return e.componentType||e.documentType}(e),structure:e,rootId:o};return s.layout&&(t.isFinite(s.layout.height)&&(s.layout.height=p(s.layout.height,n.siteConstants.COMP_SIZE.MIN_HEIGHT,n.siteConstants.COMP_SIZE.MAX_HEIGHT)),t.isFinite(s.layout.width)&&(s.layout.width=p(s.layout.width,n.siteConstants.COMP_SIZE.MIN_WIDTH,n.siteConstants.COMP_SIZE.MAX_WIDTH))),e.dataQuery&&!s.dataItem&&(s.dataItem=r.getDataByQuery(e.dataQuery,o)),e.propertyQuery&&!e.propertiesItem&&(s.propertiesItem=r.getDataByQuery(e.propertyQuery,o,r.dataTypes.PROPERTIES)),(e.behaviorQuery||e.behaviors)&&(s.behaviorsItem=e.behaviors||t.get(r.getDataByQuery(e.behaviorQuery,o,r.dataTypes.BEHAVIORS),"items")),e.designQuery&&(s.designDataItem=r.getDataByQuery(e.designQuery,o,r.dataTypes.DESIGN)),e.styleId&&(s.styleItem=r.getDataByQuery(e.styleId,o,r.dataTypes.THEME)),s}function f(e,i,o,n,r,a){var u=r.getSiteData();t(o).keys().filter(function(e){return!function(e,t){return Boolean(t.collapsed[e])}(e,n)&&i[e]}).forEach(function(t){var c=m(o[t],r,a);s.patchComponent(c,e,i,n,u)})}function y(e,i,o,n,r){var s=a(o);t.forEach(e,function(e,t){f(s,o,n[t],i,r,e.pageId)})}function w(t,i,o,n,r,a,s){var u=e(i(t.id));u.attr("data-leaving")||(H[t.componentType]?function(e,t,i,o,n,r,a){var s=n.getSiteData(),u=m(e,n,r);v(e,t,o),C(u,n,t,i,o,r,a),b(u,t,i,o,s,e,a)}(t,i,o,n,r,a,s):function(e,t,i,o,n,r,a){var s=n.getSiteData(),u=m(e,n,r);v(e,t,o),b(u,t,i,o,s,e,a),C(u,n,t,i,o,r,a)}(t,i,o,n,r,a,s),u.attr("data-hidden")?o.isHidden[t.id]=!0:o.isHidden[t.id]=!1)}function v(e,t,i){var o=t(e.id);o&&(i[e.id]=o)}function C(e,i,o,r,a,s,u){var c=i.getSiteData(),l=n.dataUtils.getChildrenData(e.structure,c.isMobileView());t.forEach(l,function(e){w(e,o,r,a,i,s,u)})}function b(t,i,o,n,r,a,u){if(!function(e,t){return!(!e||e[t.id])}(u,t)){var c=e(i(a.id));o.collapsed[a.id]=!!c.attr("data-collapsed"),s.measureComponentChildren(t,i,o,n,r),s.measureComponent(a,t,i,o,n,r)}}function M(e,i,o,r,a,s){var u=e.id;if(s=s||i.fixed[u],u){var c=i.top[u]||0,l=i.left[u]||0;i.fixed[u]?(r=c,a=l):(r+=c,a+=l),i.absoluteTop[u]=r,i.absoluteLeft[u]=a,s&&(i.shownInFixed[u]=!0)}var d=n.dataUtils.getChildrenData(e,o);t.forEach(d,function(e){M(e,i,o,r,a,s)})}function S(e,i,o){var n=t.sortBy(t.keys(e),function(e){return"inner"===e?1:0});t.forEach(n,function(t){M(e[t].structure,i,o,"inner"===t?i.absoluteTop.SITE_PAGES:0,"inner"===t?i.absoluteLeft.SITE_PAGES:0)})}function I(e,i,o,r,a,u,c){var l=e.id&&i(e.id);if(l&&s.isComponentDead(l))return!1;var d=!u||!!u[e.id],g=o.getSiteData().isMobileView(),h=n.dataUtils.getChildrenData(e,g),p=t.reduce(h,function(t,n){return I(n,i,o,r,a,u,e.id)||t},!1),m=d||p;return l&&R[e.componentType]&&m&&r.push({anchorsMap:a,structure:e,getDomNodeFunc:i,domNode:l,parentId:c}),m}function T(e,o,n,r,a,s,u,c){var l=[],d={},g=a.getSiteData(),h=g.isMobileView();return t.forEach(e,function(e){var n=m(e.structure,a),p=R[n.structure.componentType].measure(n,e.domNode,o,r,g,function(t){w(t,e.getDomNodeFunc,o,r,a,n.rootId,c)},function(t){return i.enforceAnchors(t,o,e.anchorsMap,h,u,s,c)});p&&(p.needsAdditionalInnerLayout&&l.push(e),p.changedCompsMap&&t.assign(d,p.changedCompsMap),p.needsParent&&c&&(c[e.parentId]=!0))}),t.forEach(e,function(e){var t=m(e.structure,a);e.skipPatch||R[t.structure.componentType].patch(t,o,n,r,a.getSiteData())}),{compsToInnerLayoutAgain:l,changedComps:d}}function x(i,o){var n=(W=e("#SITE_ROOT")).offset()||{top:0},r=d.isOpen("onboardingviewportmode")?function(e){var i=t.get(e.renderFlags,"onboardingViewportMode","auto");{if("parent"===i)return window.parent.document.documentElement.clientHeight;if(/fixed:/.test(i))return parseInt(i.split(":")[1],10)}return window.document.documentElement.clientHeight}(i):window.document.documentElement.clientHeight,a=i.mobile.getScreenDimensions();o.clientWidth=i.getBodyClientWidth(),o.clientHeight=r,o.width.screen=i.getScreenWidth(),o.width.site=i.getSiteWidth(),o.height.screen=o.clientHeight,o.innerHeight.screen=window.innerHeight,o.innerWidth.screen=window.innerWidth,o.height.device=a.height,o.width.device=a.width,o.availHeight.device=a.availHeight,o.availWidth.device=a.availWidth,o.devicePixelRatio=i.mobile.getDevicePixelRatio(),o.siteOffsetTop=n.top,o.siteMarginBottom=t.parseInt(W.css("padding-bottom"),10)||0,o.custom.wixTopAdHeight=i.getWixTopAdHeight()}function L(e,i,o){var r=t.last(e),a={};i[r.id]&&t.assign(a,function(e,i){var o=null,n=t.last(e);if(n&&e.length>1){var r=t.get(e,e.length-2);"wysiwyg.viewer.components.Group"===r.componentType&&((o={})[r.id]=!0)}return n&&k[n.componentType]?t.defaults({},o,k[n.componentType](e,i)):o}(e,o));var s=n.dataUtils.getChildrenData(r,o);return t.forEach(s,function(n){t.assign(a,L(e.concat([n]),i,o))}),a}function A(e,o,r,a,s){var u={};return t.assign(u,o,r,i.HARD_WIRED_COMPS_TO_RELAYOUT,n.arrayUtils.toTrueObj(a)),t.assign(u,function(e,i,o){var n={};return t.forOwn(i,function(i){t.assign(n,L([i.structure],e,o))}),n}(u,e,s)),u}function D(e){var i=t(e).values().flatMap(t.keys).value();return n.arrayUtils.toTrueObj(i)}function P(e,i,n,s,u,c){r.performance.start(B);var d=i.getSiteData(),g=d.isMobileView();delete e.undefined;var h=function(e,i){var o=E[e.siteId]||{};return t.omitBy(o,t.keys(i))}(d,u),p=u?function(e,i){return t.forOwn(i,function(t,i){delete e.top[i],delete e.height[i],delete e.zIndex[i]}),e}(d.measureMap,u):{pageBottomByComponents:{},collapsed:{},isHidden:{},height:{},width:{},availHeight:{},availWidth:{},innerWidth:{},innerHeight:{},custom:{},containerHeightMargin:{},minHeight:{},minWidth:{},top:{},left:{},absoluteTop:{},absoluteLeft:{},fixed:{},shownInFixed:{},zIndex:{},isDeadComp:{},clientWidth:0,skipPatch:{},shrinkableContainer:{},injectedAnchors:{}};x(d,p);var m=function(e,i,o,n,r,s,u){var c=n.getSiteData(),l=c.getViewMode(),d={},g=[];t.forOwn(e,function(e){var i=t.get(e,"structure.id"),o=t.get(c.anchorsMap,[i,l]);I(e.structure,e.getDomNodeFunc,n,g,o,u,null)});for(var h=g,p=0,m=a(o);h.length&&p<3;){var f=T(h,i,m,o,n,r,s,u);h=f.compsToInnerLayoutAgain,d=t.assign(d,f.changedComps),p++}return d}(e,p,h,i,s,n,u);u&&(u=A(e,u,m,i.getAllRenderedRootIds(),g)),function(e,i,o,n,r){t.forOwn(e,function(e){w(e.structure,e.getDomNodeFunc,i,o,n,e.pageId,r)})}(e,p,h,i,u),function(e,i){var o=t.filter(t.values(i),O);t.forEach(o,function(t){var i=t.pageId||t.inner.pageId;e.shrinkableContainer[i]=!0,e.left[i]=0})}(p,e);var f=o.enforceAllStructures(e,p,d,n,s,u);return S(e,p,g),y(e,p,h,f,i),d.imageLoader.loadAllImages(d),l.setIframesSrc(c),E[d.siteId]=h,r.performance.finish(B,d.isViewerMode()),{measureMap:p,reLayoutedCompsMap:D(f)}}var E={},R={},H={},B=r.performanceMetrics.RE_LAYOUT,k={"wysiwyg.viewer.components.Group":g,"wysiwyg.viewer.components.BoxSlideShow":g,"wysiwyg.viewer.components.StripContainerSlideShow":g,"wysiwyg.viewer.components.StripColumnsContainer":g,"wysiwyg.viewer.components.Column":function(e,i){var o=e[e.length-2],r=n.dataUtils.getChildrenData(o,i),a=[o].concat(r);return t.transform(a,function(e,t){e[t.id]=!0},{})},"wysiwyg.viewer.components.StripContainerSlideShowSlide":h,"wysiwyg.viewer.components.BoxSlideShowSlide":h},W=void 0,O=function(e){return!t.isEmpty(t.get(e,"inner.pageId"))||!t.isEmpty(e.pageId)};return{wixapps:{registerRequestToMeasureDom:function(e){s.registerRequestToMeasureDom(e)},registerRequestToMeasureChildren:function(e,t){u.registerRequestToMeasureChildren(e,t)},registerCustomMeasure:function(e,t){u.registerCustomMeasure(e,t)},registerPatcher:function(e,t){u.registerPatcher(e,t)},measureMediaRichTextInnerComponent:function(e,t,i,o,n,r){u.measureComponentChildren(e,t,i,o,n),u.measureComponent(r,e,t,i,o,n)},patchWithoutPositioning:u.patchWithoutPositioning},registerLayoutInnerCompsFirst:function(e,t,i){R[e]={measure:t,patch:i}},registerMeasureChildrenFirst:function(e,t){H[e]=t},registerPatcher:function(e,t){s.registerPatcher(e,t)},registerPatchers:function(e,t){s.registerPatchers(e,t)},registerCustomMeasure:function(e,t){s.registerCustomMeasure(e,t)},registerCustomLayoutFunction:function(e,t){s.registerCustomLayoutFunction(e,t)},registerCustomDomChangesFunction:s.registerCustomDomChangesFunction,registerAdditionalMeasureFunction:function(e,t,i){s.registerAdditionalMeasureFunction(e,t,i)},registerRequestToMeasureDom:function(e){s.registerRequestToMeasureDom(e)},registerRequestToMeasureChildren:function(e,t){s.registerRequestToMeasureChildren(e,t)},registerShapesMeasureFunction:function(e,i){t.forEach(e,function(e){return s.registerAdditionalMeasureFunction(e,i)})},updateBodyNodeStyle:c.updateBodyNodeStyle,reLayout:P,enforceAndPatch:function(e,t){var i=t.getSiteData(),n=i.measureMap,r=o.enforceAllStructures(e,n,i,!1,null,{}),a=E[i.siteId];return S(e,n,i.isMobileView()),y(e,n,a,r,t),D(r)},enforceAnchors:i.enforceAnchors}}),define("layout/specificComponents/fiveGridLineLayout",["layout/util/layout","layout/util/rootLayoutUtils"],function(e,t){"use strict";e.registerPatcher("wysiwyg.viewer.components.FiveGridLine",function(e,i,o,n,r){var a=o.width.screen,s=t.getRootWidth(r,o,n.rootId),u=0,c=s,l=n.propertiesItem;l&&l.fullScreenModeOn&&(a>s&&(u=-(a-s)/2,c=a),i.css(e,{width:c+"px",left:u+"px"}),o.width[e]=c,o.left[e]=u)}),e.registerRequestToMeasureChildren("wysiwyg.viewer.components.FiveGridLine",[["line"]]),e.registerRequestToMeasureDom("wysiwyg.viewer.components.FiveGridLine"),e.registerCustomMeasure("wysiwyg.viewer.components.FiveGridLine",function(e,t,i){var o=t.height[e+"line"],n=window.getComputedStyle(i[e]),r=parseFloat(n.borderBottomWidth);t.height[e]=Math.max(5,r,o),t.minHeight[e]=o})}),define("layout/specificComponents/registerToMeasureOnly",["layout/util/layout"],function(e){"use strict";return e.registerRequestToMeasureDom("wysiwyg.common.components.pinterestpinit.viewer.PinterestPinIt"),e.registerRequestToMeasureDom("wysiwyg.common.components.spotifyfollow.viewer.SpotifyFollow"),e.registerRequestToMeasureDom("wysiwyg.common.components.spotifyplayer.viewer.SpotifyPlayer"),e.registerRequestToMeasureDom("wysiwyg.viewer.components.Video"),e.registerRequestToMeasureDom("wysiwyg.viewer.components.WTwitterTweet"),e.registerRequestToMeasureDom("wysiwyg.viewer.components.SoundCloudWidget"),e.registerRequestToMeasureDom("wysiwyg.common.components.disquscomments.viewer.DisqusComments"),e.registerRequestToMeasureChildren("wysiwyg.viewer.components.PaginatedGridGallery",[["itemsContainer"]]),{}}),define("layout/specificComponents/registerToPureDomMeasure",["lodash","siteUtils","layout/util/layout"],function(e,t,i){"use strict";function o(t,o){i.registerCustomMeasure(t,function(t,i,n){var r=n[t];e.get(o,"height",!0)&&(i.height[t]=r.offsetHeight),e.get(o,"width",!0)&&(i.width[t]=r.offsetWidth)})}function n(e){i.registerAdditionalMeasureFunction(e,function(e,i,o){i.containerHeightMargin[e]=t.measurerUtils.getContainerVerticalMarginFromContent(e,o[e])},"containerHeightMargin")}return o("wysiwyg.viewer.components.FlashComponent"),o("wysiwyg.common.components.pinterestpinit.viewer.PinterestPinIt"),o("wysiwyg.viewer.components.WGooglePlusOne"),o("wysiwyg.viewer.components.LinkBar"),o("wysiwyg.common.components.singleaudioplayer.viewer.SingleAudioPlayer"),o("wysiwyg.common.components.facebooklikebox.viewer.FacebookLikeBox"),o("wysiwyg.viewer.components.PayPalButton"),o("wysiwyg.viewer.components.PinterestFollow"),o("wysiwyg.common.components.spotifyfollow.viewer.SpotifyFollow"),o("wysiwyg.viewer.components.FlickrBadgeWidget"),o("wysiwyg.viewer.components.WTwitterFollow"),o("wysiwyg.viewer.components.WTwitterTweet"),o("wysiwyg.viewer.components.LoginButton"),o("wysiwyg.viewer.components.AdminLoginButton"),o("wysiwyg.viewer.components.ItunesButton"),o("wysiwyg.viewer.components.WFacebookLike"),o("wysiwyg.viewer.components.VerticalLine",{width:!1}),o("wysiwyg.viewer.components.FlashComponent"),o("wysiwyg.viewer.components.Group"),o("wysiwyg.common.components.skypecallbutton.viewer.SkypeCallButton"),o("platform.components.AppController"),o("wysiwyg.viewer.components.VKShareButton"),o("wysiwyg.common.components.youtubesubscribebutton.viewer.YouTubeSubscribeButton"),o("wysiwyg.viewer.components.inputs.RadioGroup"),o("tpa.viewer.components.Impress"),o("tpa.viewer.components.Thumbnails"),o("tpa.viewer.components.Honeycomb"),o("tpa.viewer.components.Accordion"),o("wysiwyg.viewer.components.tpapps.TPA3DGallery"),o("wysiwyg.viewer.components.LanguageSelector"),o("tpa.viewer.components.Masonry"),o("tpa.viewer.components.Freestyle"),o("wysiwyg.viewer.components.tpapps.TPA3DCarousel"),o("wysiwyg.viewer.components.inputs.TextInput"),o("wysiwyg.viewer.components.inputs.TextAreaInput"),o("mobile.core.components.Page",{height:!1}),function(e){i.registerAdditionalMeasureFunction(e,function(e,t,i){var o=i[e];t.minHeight[e]=parseInt(o.style.minHeight,10)},"pageMinHeight")}("mobile.core.components.Page"),o("wixui.Pagination"),n("wysiwyg.viewer.components.ScreenWidthContainer"),n("wysiwyg.viewer.components.HeaderContainer"),n("wysiwyg.viewer.components.FooterContainer"),n("mobile.core.components.Page"),{}}),define("layout/specificComponents/areaTooltipLayout",["layout/util/layout"],function(e){"use strict";e.registerCustomMeasure("wysiwyg.common.components.areatooltip.viewer.AreaTooltip",function(e,t){var i=e+"content";t.custom[e]=t.height[e]/2-t.height[i]/2}),e.registerPatcher("wysiwyg.common.components.areatooltip.viewer.AreaTooltip",function(e,t,i,o){var n=void 0,r=void 0,a=e+"tooltip";if(i.height[a]){var s=e+"content";switch(o.propertiesItem.tooltipPosition){case"top":r=-i.height[s]-14+"px",n=0;break;case"right":r=i.custom[e]+"px",n=i.width[e]+14+"px";break;case"bottom":r=i.height[e]+14+"px",n=0;break;case"left":r=i.custom[e]+"px",n="-414px";break;default:return}t.css(a,{top:r,left:n})}}),e.registerRequestToMeasureChildren("wysiwyg.common.components.areatooltip.viewer.AreaTooltip",[["tooltip"],["content"]])}),define("layout/specificComponents/menuLayout",["zepto","lodash","layout/util/layout","siteUtils","coreUtils"],function(e,t,i,o,n){"use strict";function r(e){return!isNaN(parseFloat(e))&&isFinite(e)}function a(e,i,o,n,r,a,s,u,c,l){var d=o.concat("__more__"),g=i.custom[e],h=g.realWidths,p=g.menuItemContainerExtraPixels,m=i.width[e];if(t.findIndex(d,function(e){return e===n})>=0&&h){var f=Math.abs(l.getSiteX())+i.absoluteLeft[e],y=function(e,t,i,o,n,r,a,s,u){var c="0px",l="auto",d=r.left,g=r.width;"left"===t?c="left"===n?0:d+e.left+"px":"right"===t?(l="right"===n?0:o-d-g-e.right+"px",c="auto"):"left"===n?c=d+(g+e.left-i)/2+"px":"right"===n?(c="auto",l=(g+e.right-(i+e.width))/2+"px"):c=e.left+d+(g-(i+e.width))/2+"px";if("auto"!==c){var h=a+parseInt(c,10);c=h<0?0:c}if("auto"!==l){var p=s-parseInt(l,10);l=p>u?0:l}return{moreContainerLeft:c,moreContainerRight:l}}(p,s,c,m,r,u,f,f+m,i.clientWidth);return{left:y.moreContainerLeft,right:y.moreContainerRight,bottom:g.needToOpenMenuUp?a+"px":"auto"}}}function s(e,i,o,n,s){var u=o.height[e],c=n.dataItem.menuRef?n.dataItem.menuRef.id:"CUSTOM_MAIN_MENU",h=l.getMenuById(c,s,!0,{},!1),p=t.keys(h),m=p.concat("__more__"),f=o.custom[e];!function(e,t,i){t.data(e,{dropmode:i?"dropUp":"dropDown"})}(e,i,f.needToOpenMenuUp);var y=f.menuItemContainerExtraPixels,w=0;if(f.hoverState===d){var v=f.realWidths.indexOf(0),C=f.menuItems[t.findKey(f.menuItems,["menuIndex",v])],b=C.moreIndex,M=b===p.length-1;i.attr(C.moreDOMid,{"data-listposition":M?"dropLonely":"top"}),t(f.menuItems).filter(function(e){return!!e.moreDOMid}).forEach(function(e){if(e.moreIndex<b)i.css(e.moreDOMid,{display:"none"});else{var t=e.moreDOMid+"label";w=Math.max(o.width[t],w)}})}else f.hoverState&&t.forEach(f.moreSubItem,function(t,i){var n=e+g+i+"label";w=Math.max(o.width[n],w)});!function(e,i,o,n,s,u){var c=o.custom[e],h=c.hoverState,p=s.dataItem.menuRef?s.dataItem.menuRef.id:"CUSTOM_MAIN_MENU",m=t.keys(l.getMenuById(p,n,!0,{},!1)),f=m.indexOf(h);if(r(c.hoverState)||h===d){if(!o.custom[e].realWidths)return;var y=Math.max(u,o.width[-1!==f?e+f:e+d]),w=function(e,t){return e+15+t.menuBorderY+t.labelPad+t.menuButtonBorder}(t.isEmpty(c.moreSubItem)?0:c.lineHeight[c.moreSubItem[0]+"label"],c);t.forEach(c.moreSubItem,function(e){i.css(e,{"min-width":y+"px"}),i.css(e+"label",{"min-width":"0px","line-height":w+"px"})});var v=r(c.hoverState)?c.hoverState:"__more__",C={width:o.width[e+v],left:o.left[e+v]},b=a(e,o,m,h,c.hoverListPosition,o.height[e],c.alignButtons,C,y,n);i.css(e+g,{left:b.left,right:b.right}),i.css(e+"dropWrapper",{left:b.left,right:b.right,bottom:b.bottom})}}(e,i,o,s,n,w),f.originalGapBetweenTextAndBtn&&t.forEach(m,function(t){f.hasOriginalGapData[t]||i.data(e+t,{originalGapBetweenTextAndBtn:f.originalGapBetweenTextAndBtn[e+t]})}),function(e,t,i,o,n,r,a){for(var s=0,u=null,c=null,l=i.custom[e].lineHeight[e],d=r-a.height,g=0;g<o.length;g++){var h=n[g],p=h>0,m=e+o[g];c=i.custom[e].linkIds[m],p?(s++,u=m,t.css(m,{width:h+"px",height:d+"px",position:"relative","box-sizing":"border-box",overflow:"visible"}),t.css(m+"label",{"line-height":l}),t.attr(m,{"aria-hidden":!1}),t.attr(c,{tabIndex:0})):(t.css(m,{height:"0px",overflow:"hidden",position:"absolute"}),t.attr(m,{"aria-hidden":!0}),t.attr(c,{tabIndex:-1}))}1===s&&(t.data(e+"moreContainer",{listposition:"lonely"}),t.data(u,{listposition:"lonely"}))}(e,i,o,m,f.realWidths,u,y)}function u(e){var t=parseFloat(e);return isFinite(t)?t:0}function c(i,o,r,a,s){var c=e(r[i]),d=e("#"+i+"itemsContainer")[0]||r[i+"itemsContainer"],g=d.childNodes,h=r[i+"moreContainer"],p=h.childNodes,m=o.custom[i]={alignButtons:c.data("dropalign"),hoverListPosition:c.data("drophposition"),menuBorderY:parseInt(c.data("menuborder-y"),10),ribbonExtra:parseInt(c.data("ribbon-extra"),10),ribbonEls:parseInt(c.data("ribbon-els"),10),labelPad:parseInt(c.data("label-pad"),10),menuButtonBorder:parseInt(c.data("menubtn-border"),10),menuItemContainerMargins:function(t){var i=t.lastChild;return(parseInt(e(i).css("margin-left"),10)||0)+(parseInt(e(i).css("margin-right"),10)||0)}(d),menuItemContainerExtraPixels:function(t,i){var o=e(t).css(["border-top-width","border-bottom-width","border-left-width","border-right-width","padding-top","padding-bottom","padding-left","padding-right","margin-top","margin-bottom","margin-left","margin-right"]),n=u(o["border-top-width"])+u(o["padding-top"]),r=u(o["border-bottom-width"])+u(o["padding-bottom"]),a=u(o["border-left-width"])+u(o["padding-left"]),s=u(o["border-right-width"])+u(o["padding-right"]);return i&&(n+=u(o["margin-top"]),r+=u(o["margin-bottom"]),a+=u(o["margin-left"]),s+=u(o["margin-right"])),{top:n,bottom:r,left:a,right:s,height:n+r,width:a+s}}(d,!0),needToOpenMenuUp:function(e){return e.getBoundingClientRect().top>window.innerHeight/2}(r[i]),menuItemMarginForAllChildren:!s.propertiesItem.stretchButtonsToMenuWidth||"false"!==d.getAttribute("data-marginAllChildren")};m.moreSubItem=[],m.lineHeight={},m.labelWidths={},m.linkIds={},m.parentId={},m.menuItems={},t.forEach(p,function(t,i){var n=e(t);m.parentId[t.id]=n.data("parent-id");var a=n.data("data-id");m.menuItems[a]={dataId:a,parentId:n.data("parent-id"),moreDOMid:t.id,moreIndex:i},r[t.id]=t;var s=e(t).find("p")[0];r[s.id]=s,o.width[s.id]=s.offsetWidth,o.height[s.id]=s.offsetHeight,o.left[s.id]=s.offsetLeft,m.lineHeight[s.id]=parseInt(window.getComputedStyle(s).fontSize,10),m.moreSubItem.push(t.id)}),t.forEach(g,function(t,i){var n=e(t).data("data-id");m.menuItems[n]=m.menuItems[n]||{},m.menuItems[n].menuIndex=i,m.menuItems[n].menuDOMid=t.id,o.left[t.id]=t.offsetLeft;var a=e(t).find("p")[0];r[a.id]=a,m.labelWidths[a.id]=function(e){var t=window.getComputedStyle(e);return parseInt(t.width,10)+parseInt(t.paddingLeft,10)+parseInt(t.paddingRight,10)}(a);var s=e(t).find("a")[0];r[s.id]=s,m.linkIds[t.id]=s.id});var f=o.height[i];m.lineHeight[i]=function(e,t){return n.style.unitize(e-t.menuBorderY-t.labelPad-t.ribbonEls-t.menuButtonBorder-t.ribbonExtra)}(f,m);var y=s.dataItem.menuRef?s.dataItem.menuRef.id:"CUSTOM_MAIN_MENU",w=t.keys(l.getMenuById(y,a,!0,{},!1)).concat("__more__"),v=function(i,o,n,r,a){var s=o.width[i],u=o.custom[i];u.hasOriginalGapData={},u.originalGapBetweenTextAndBtn={};var c=t.map(a,function(n){var a=void 0,s=e(r[i+n]).data("originalGapBetweenTextAndBtn");return t.isUndefined(s)?(u.hasOriginalGapData[n]=!1,a=o.width[i+n]-u.labelWidths[i+n+"label"],u.originalGapBetweenTextAndBtn[i+n]=a):(u.hasOriginalGapData[n]=!0,a=parseInt(s,10)),o.width[i+n]>0?u.labelWidths[i+n+"label"]+a:0}),d=c.pop(),g=n.sameWidthButtons,h=n.stretchButtonsToMenuWidth,p=!1,m=u.menuItemContainerMargins,f=u.menuItemMarginForAllChildren,y=u.menuItemContainerExtraPixels,w=l.getMaxWidth(c),v=l.getDropDownWidthIfOk(s,g,h,c,m,w,f,y);if(!v){for(var C=1;C<=c.length;C++)if(v=l.getDropDownWidthIfOk(s,g,h,c.slice(0,-1*C).concat(d),m,w,f,y)){p=!0;break}v||(p=!0,v=[d])}if(p){var b=v[v.length-1];for(v=v.slice(0,-1);v.length<a.length;)v.push(0);v[v.length-1]=b}return{realWidths:v,moreShown:p}}(i,o,s.propertiesItem,r,w);m.realWidths=v.realWidths,m.isMoreShown=v.moreShown,m.hoverState=h.getAttribute("data-hover")}var l=o.menuUtils,d="__more__",g="moreContainer";return i.registerPatcher("wysiwyg.viewer.components.menus.DropDownMenu",s),i.registerCustomMeasure("wysiwyg.viewer.components.menus.DropDownMenu",c),i.registerRequestToMeasureChildren("wysiwyg.viewer.components.menus.DropDownMenu",function(e,i,o,n){var r=o.dataItem.menuRef?o.dataItem.menuRef.id:"CUSTOM_MAIN_MENU",a=t.keys(l.getMenuById(r,n,!0,{},!1)).concat("__more__"),s=[["moreContainer"],["itemsContainer"],["dropWrapper"]];return t.forEach([[]],function(e){s=s.concat(t.map(a,function(t){return[t].concat(e)}))}),s}),{}}),define("layout/specificComponents/imageLayout",["lodash","zepto","coreUtilsLib","imageClientLib","layout/util/layout"],function(e,t,i,o,n){"use strict";function r(e,t,n){return i.imageUtils.getImageComputedProperties(o,e,t.getMediaFullStaticUrl.bind(t),t.currentUrl,t.mobile.getDevicePixelRatio(),n)}function a(t,i,o,n,r){var a=function(t){return e.pickBy(t,function(e){return""!==e})}(i),s=t.css.container,u=e.assign({position:"absolute",width:o,height:n},s,a);return e.isNumber(r)&&(u.opacity=r),u}function s(t,i,o,n,s,u,c){var p=function(e){return e&&e.split?e.split(";").reduce(function(e,t){var i=t.split(":");return i[0]&&i[1]&&(e[i[0].trim()]=i[1].trim()),e},{}):{}}(o.custom[t].renderedStyles),m=o.custom[t]&&o.custom[t].isZoomed;u=u||{width:o.width[t],height:o.height[t]};var f={imageData:s,containerWidth:m?s.width:u.width,containerHeight:m?s.height:u.height,displayMode:s.displayMode,alignType:c},y=void 0;o.custom[t].isSvgImage?function(t,i,o,n,r,a){var s=o.custom[t]&&o.custom[t].isSvgImage,u=o.custom[t]&&o.custom[t].filterId,c=n.containerWidth,p=n.containerHeight;if(!n.containerWidth||!n.containerHeight||!n.imageData.uri)return null;i.css(t+d,{width:c,height:p}),s&&(i.attr(t+d,a.attr.container),i.attrNS(t+l,[{ns:"http://www.w3.org/1999/xlink",attribute:"xlink:href",value:a.uri}]),o.custom[t].hasPattern?(i.attr(t+g,{filter:"url(#"+u+")",width:a.attr.container.width,height:a.attr.container.height,x:0,y:0}),i.attr(t+h,a.attr.img),i.attr(t+l,{width:a.attr.img.width,height:a.attr.img.height})):i.attr(t+l,e.assign({filter:"url(#"+u+")"},a.attr.img)))}(t,i,o,f,0,y=r(f,n,"svg")):function(t,i,o){i.css(t+l,e.get(o,["css","img"]))}(t,i,y=r(f,n,"img"));var w=a(y,p,u.width,u.height,s.opacity);i.css(t,w);var v={patchers:i,id:t,isSvg:o.custom[t].isSvgImage,src:e.get(y,"uri"),absoluteTop:o.absoluteTop[o.custom[t].parentId]||0,height:u.height||o.height[t],currentSrc:o.custom[t].imgSrc};n.imageLoader.loadImage(v,n)}function u(t,i,o,n,r){var a=void 0,s=!1;o[t+l]=o[t].querySelector("img")||o[t].querySelector("image"),o[t+l]&&(o[t+d]=o[t].querySelector("#svg"+t),o[t+g]=o[t+d]&&o[t+d].querySelector("rect"),o[t+h]=o[t].querySelector("pattern"),o[t+l]&&"image"===o[t+l].nodeName.toLowerCase()&&(s=!0,a=e.get(o[t].querySelector("filter"),"id")),i.width[t]=o[t].offsetWidth,i.height[t]=o[t].offsetHeight,i.custom[t]={isZoomed:o[t].getAttribute("data-image-zoomed"),isSvgImage:s,filterId:a,hasSvgNode:Boolean(o[t+d]),imgSrc:o[t+l].getAttribute("src"),parentId:r.id,renderedStyles:o[t].getAttribute("data-style"),hasPattern:!!o[t+h]})}function c(i,o,n,r,a){var c=o[i].querySelectorAll("*[data-image-info]"),l=[],d={};e.forEach(c,function(e){var i=e.getAttribute("id");o[i]=e,d[i]=t(o[i]).data("imageInfo"),u(i,n,o,0,a),l.push(i)});return function(t){e.forEach(l,function(e){var i=d[e];s(e,t,n,r,i.imageData,null,i.alignType)})}}var l="image",d="svg",g="rect",h="pattern";return n.registerCustomMeasure("core.components.Image",u),n.wixapps.registerCustomMeasure("core.components.Image",u),n.registerCustomLayoutFunction("wysiwyg.viewer.components.LinkBar",c),n.registerCustomLayoutFunction("wysiwyg.viewer.components.FlashComponent",c),{patchNodeImage:s,measureNodeImage:u}}),define("layout/specificComponents/sliderGalleryLayout",["layout/util/layout","coreUtilsLib","imageClientLib","zepto","lodash","layout/specificComponents/imageLayout"],function(e,t,i,o,n,r){"use strict";function a(e,t,r,a,s,u,c){var g=o(u),h={imageIndex:g.data("image-index"),width:g.data("displayer-width"),height:g.data("displayer-height"),uri:g.data("displayer-uri")},p={heightDiff:parseInt(g.data("height-diff"),10)||0,widthDiff:parseInt(g.data("width-diff"),10)||0,bottomGap:parseInt(g.data("bottom-gap"),10)||0},m=s&&s[h.imageIndex]?s[h.imageIndex]:h,f=function(e,t,i,o,n){var r=Math.floor(t+e);return l.getSizeAfterScaling({itemHeight:r,itemWidth:Math.floor(r*(n&&n.aspectRatio?n.aspectRatio:1)),displayerData:i,imageMode:n?n.imageMode:"clipImage",heightDiff:o.heightDiff,widthDiff:o.widthDiff,bottomGap:o.bottomGap})}(r,t,m=n.assign(m,{displayMode:i.fittingTypes.SCALE_TO_FILL}),p,a.propertiesItem);return{imageData:m,imageNodeId:e+"displayer"+c+"image",imageWrapperId:e+"displayer"+c+"imageWrapper",containerSize:d.getContainerSize(f.imageWrapperSize,g),sizeAfterScaling:f}}function s(e,t,i,r,s){var u=i[e+"images"],c=o(u).children(),l=n.get(s,"dataItem.items"),d=parseInt(o(i[e]).data("additional-height"),10)||0;t.custom[e]={displayers:n.map(c,n.partial(a,e,t.height[e],d,s,l)),additionalHeight:d}}function u(e,t,i,o,a){var s=i.height[e];t.css(e,{height:s});var u=i.custom[e];n.forEach(u.displayers,function(e){d.updateImageWrapperSizes(t,e.imageWrapperId,e.sizeAfterScaling),r.patchNodeImage(e.imageNodeId,t,i,a,e.imageData,e.containerSize)})}function c(e){var t=[["images"],["itemsContainer"]],i=o("#"+e+"images").children();return n.forEach(i,function(e,i){var o="displayer"+i,n={pathArray:[o,"image"],type:"core.components.Image"},r=[o,"imageWrapper"];t.push(n,r)}),t}var l=t.matrix.scalingCalculations,d=t.galleriesCommonLayout;return e.registerRequestToMeasureChildren("wysiwyg.viewer.components.SliderGallery",c),e.registerCustomMeasure("wysiwyg.viewer.components.SliderGallery",s),e.registerPatcher("wysiwyg.viewer.components.SliderGallery",u),e.wixapps.registerRequestToMeasureChildren("wysiwyg.viewer.components.SliderGallery",c),e.wixapps.registerCustomMeasure("wysiwyg.viewer.components.SliderGallery",s),e.wixapps.registerPatcher("wysiwyg.viewer.components.SliderGallery",u),{}}),define("layout/specificComponents/verticalMenuLayout",["lodash","layout/util/layout"],function(e,t){"use strict";function i(e,t,i){var o=e.custom[t],n=e.absoluteTop[t]-o.pageYOffset,r="subMenuOpenDir-"+function(e,t){return Math.floor(e/2)>t?"down":"up"}(o.screenHeight,n);i.attr(t,{"data-open-direction":r}),i.css(t,{height:""})}function o(e,t,i,o){o.isMobileView()?(t.height[e+"menuContainer"]=t.height[e],t.width[e+"menuContainer"]=t.width[e]):function(e,t,i){t.custom[e]={screenHeight:t.height.screen,pageYOffset:window.pageYOffset},t.width[e]=i[e].offsetWidth,t.height[e]=i[e].offsetHeight}(e,t,i)}return t.registerRequestToMeasureChildren("wysiwyg.common.components.verticalmenu.viewer.VerticalMenu",[["menuContainer"]]),t.registerCustomMeasure("wysiwyg.common.components.verticalmenu.viewer.VerticalMenu",o),t.registerPatcher("wysiwyg.common.components.verticalmenu.viewer.VerticalMenu",function(e,t,o,n,r){if(r.isMobileView()){var a=e+"menuContainer";t.css(a,{height:o.height[a],width:o.width[a]})}else i(o,e,t)}),{}}),define("layout/specificComponents/memberLoginSectionLayout",["lodash","layout/specificComponents/imageLayout"],function(e,t){"use strict";function i(i,o,n,c,l,d){var g=i+(d||"");!function(e,i,o,n,r){var c=e+"avatarimage",l=s(n);if(a(n)){var d=u(r);o.width[c]&&t.patchNodeImage(c,i,o,r,{uri:d},{width:l,height:l})}}(g,o,n,c,l),function(i,o,n,a,u){if(n.custom[i].isLoggedIn){var c=r(a)||[],l=s(a);e.forEach(c,function(e,r){var a=i+"button"+r+"iconimage",s=i+"button"+r+"iconsvg";e.iconRef&&(n.width[a]?t.patchNodeImage(a,o,n,u,e.iconRef,{width:l,height:l}):n.width[s])})}}(g,o,n,c,l)}function o(e,t){return"true"===e[t].getAttribute("data-is-logged-in")}function n(t){var i=e.get(t,"dataItem",null);if(i){if("LoginSocialBar"===i.type)return i;if(i.loginSocialBarRef)return i.loginSocialBarRef}return null}function r(t){var i=n(t);return e.get(i,"iconItemsRef.menuRef.items",null)}function a(t){var i=n(t);return"textOnly"!==e.get(i,"loggedInMember")}function s(t){return e.get(t,"propertiesItem.iconSize",c)}function u(t){return e.get(t.getSiteMemberDetails(),"attributes.imageUrl",null)}var c=30;return{measure:function(t,i,n,r,a,s){var u=t+(s||"");i.custom[u]=e.merge(i.custom[u]||{},{dataStates:n[u].getAttribute("data-state")||"",isLoggedIn:o(n,u)})},patch:i,getChildrenIdToMeasure:function(t,i,n,s,c){var l=[];if(a(s)&&o(n,i)&&u(t)&&l.push({pathArray:["avatar","image"],type:"core.components.Image"}),o(n,i)){var d=r(s);e.forEach(d,function(e,t){e.iconRef&&"Image"===e.iconRef.type&&l.push({pathArray:["button"+t,"icon","image"],type:"core.components.Image"})})}return c&&e.forEach(l,function(t){e.isArray(t.pathArray)&&t.pathArray.splice(0,0,c)}),l}}}),define("layout/specificComponents/loginSocialBarLayout",["lodash","layout/util/layout","coreUtils","zepto","layout/specificComponents/memberLoginSectionLayout"],function(e,t,i,o,n){"use strict";function r(t,n,r,a){var s=r[t].getBoundingClientRect(),u=r[t+d],c=r[t+m],l=n.custom[t].borderWidth,g=c.offsetWidth,h={top:n.height[t]-l+"px"},p=void 0;if(u.children.length>0&&g>0){var f=a.isMobileView()?o("#SITE_ROOT")[0]:o("#SITE_CONTAINER")[0],y=u.children[0].getBoundingClientRect(),w=i.domMeasurements.getBoundingRect(c.offsetParent,f),v=s.right-y.right-l,C=y.left-s.left-l,b={right:v+"px",left:"initial"},M={left:C+"px",right:"initial"};!function(t,i,o){var n=function(e,t){return e[t].getAttribute("data-state")}(o,t);return n&&e.includes(n,"rtl")}(t,0,r)?(p=b,w.right-v-g<0&&(p=M)):(p=M,w.left+C+g>n.width.screen&&(p=b))}n.custom[t+m]=e.assign(h,p||{})}function a(e,t,i,a,m){t.custom[e]={dataStates:i[e].getAttribute("data-state")||"",borderWidth:parseInt(o(i[e]).css("border-width"),10)||0},function(e,t,i,o,n){var r=i[e+s],a=i[e+c],u=i[e+d],m=i[e+l],f=r.offsetWidth,y=a.offsetWidth,w=u.offsetWidth,v=m.offsetWidth,C=t.custom[e].borderWidth,b=i[e+p].offsetWidth,M=v>0&&0===f&&0===y?h:0,S=Math.max(f+y+w+M,b)+2*C,I=S;v>0&&(I+=g);var T=Math.max(I,n.layout.width),x=T-S;t.minWidth[e]=I,t.width[e]=T,t.custom[e+l]=x}(e,t,i,0,m),function(e,t,i,o,n){var r=i[e+s],a=i[e+u],c=i[e+p],l=r.offsetHeight,d=a.offsetHeight,g=c.offsetHeight,h=t.custom[e].borderWidth,m=Math.max(l,d,g)+2*h,f=Math.max(m,n.layout.height);t.minHeight[e]=m,t.height[e]=f}(e,t,i,0,m),r(e,t,i,a),n.measure(e,t,i,a,m)}var s="buttons",u="user",c="icon",l="text",d="arrow",g=60,h=14,p="login",m="dropdownMenu";t.registerCustomMeasure("wysiwyg.viewer.components.LoginSocialBar",a),t.registerPatcher("wysiwyg.viewer.components.LoginSocialBar",function(e,t,i,o,r){t.css(e,{width:i.width[e]+"px",minWidth:i.minWidth[e]+"px",minHeight:i.minHeight[e]+"px"}),t.css(e+l,{maxWidth:i.custom[e+l]+"px"}),t.css(e+m,i.custom[e+m]),n.patch(e,t,i,o,r)}),t.registerRequestToMeasureChildren("wysiwyg.viewer.components.LoginSocialBar",function(e,t,i,o){var r=[[s],[u],[c],[l],[d],[p],[m]],a=n.getChildrenIdToMeasure(o,e,t,i);return r=r.concat(a)})}),define("layout/util/spaceCalculationsRegardingWixAds",["experiment"],function(e){"use strict";function t(e){var t=parseInt(e,10);return isNaN(t)?0:t}return{getFirstUnoccupiedTopCoordinate:function(e){return t(e.height.WIX_ADStop)+t(e.top.WIX_ADStop)},getScreenHeightExcludingAds:function(i){var o=i.height.screen,n=t(i.height.WIX_ADStop)+t(i.top.WIX_ADStop);return e.isOpen("displayWixAdsNewVersion")?o-n:o-n-t(i.height.WIX_ADSbottom)}}}),define("layout/specificComponents/dialogLayout",["lodash","layout/util/layout","layout/util/spaceCalculationsRegardingWixAds"],function(e,t,i){"use strict";function o(e,t,o){var n=e+"dialog",r=o.height[n],a=o.height.screen,s=i.getFirstUnoccupiedTopCoordinate(o),u=i.getScreenHeightExcludingAds(o);t.css(e,{height:a+"px"});var c=(u-r)/2;t.css(n,{top:Math.max(c,20)+s+"px"})}t.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.EnterPasswordDialog",[["dialog"]]),t.registerPatcher("wysiwyg.viewer.components.dialogs.EnterPasswordDialog",o),t.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.siteMemberDialogs.MemberLoginDialog",[["dialog"]]),t.registerPatcher("wysiwyg.viewer.components.dialogs.siteMemberDialogs.MemberLoginDialog",o),t.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.siteMemberDialogs.SignUpDialog",[["dialog"]]),t.registerPatcher("wysiwyg.viewer.components.dialogs.siteMemberDialogs.SignUpDialog",o),t.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.siteMemberDialogs.RequestPasswordResetDialog",[["dialog"]]),t.registerPatcher("wysiwyg.viewer.components.dialogs.siteMemberDialogs.RequestPasswordResetDialog",o),t.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.siteMemberDialogs.ResetPasswordDialog",[["dialog"]]),t.registerPatcher("wysiwyg.viewer.components.dialogs.siteMemberDialogs.ResetPasswordDialog",o),t.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.siteMemberDialogs.SentConfirmationEmailDialog",[["dialog"]]),t.registerPatcher("wysiwyg.viewer.components.dialogs.siteMemberDialogs.SentConfirmationEmailDialog",o),t.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.siteMemberDialogs.EmailVerificationDialog",[["dialog"]]),t.registerPatcher("wysiwyg.viewer.components.dialogs.siteMemberDialogs.EmailVerificationDialog",o),t.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.siteMemberDialogs.WelcomeDialog",[["dialog"]]),t.registerPatcher("wysiwyg.viewer.components.dialogs.siteMemberDialogs.WelcomeDialog",o),t.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.siteMemberDialogs.NoPermissionsToPageDialog",[["dialog"]]),t.registerPatcher("wysiwyg.viewer.components.dialogs.siteMemberDialogs.NoPermissionsToPageDialog",o),t.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.NotificationDialog",[["dialog"]]),t.registerPatcher("wysiwyg.viewer.components.dialogs.NotificationDialog",o)}),define("layout/specificComponents/html5VideoLayout",["lodash","coreUtilsLib","imageClientLib","layout/specificComponents/imageLayout"],function(e,t,i,o){"use strict";function n(t,o,n,r,a){var u={position:"absolute",minWidth:0,minHeight:0,top:0,left:0},c=t.mediaRef;if(!c||"WixVideo"!==c.type)return u;var l=e.find(c.qualities,{quality:r}),d=function(e,t,i,o){return{wScale:e/i,hScale:t/o}}(o.width,o.height,l.width,l.height),g=function(e,t,o,n){var r=void 0,a=void 0,s=void 0,u=i.fittingTypes;switch(e){case u.SCALE_TO_FILL:s=Math.max(t.wScale,t.hScale),r=Math.round(o*s),a=Math.round(n*s);break;case u.SCALE_TO_FIT:s=Math.min(t.wScale,t.hScale),r=Math.round(o*s),a=Math.round(n*s)}return{width:r,height:a}}(t.fittingType,d,l.width,l.height),h=function(e,t,o){var n=o.width,r=o.compRootHeight,a=Math.floor((r-t.height)/2),s=Math.floor((n-t.width)/2),u={},c=i.alignTypes;switch(e){case c.CENTER:u.left=s,u.top=a;break;case c.LEFT:u.left=0,u.top=a;break;case c.RIGHT:u.left=n-t.width,u.top=a;break;case c.TOP:u.left=s,u.top=0;break;case c.BOTTOM:u.left=s,u.top=r-t.height;break;case c.TOP_LEFT:u.left=0,u.top=0;break;case c.TOP_RIGHT:u.left=n-t.width,u.top=0;break;case c.BOTTOM_LEFT:u.left=0,u.top=r-t.height;break;case c.BOTTOM_RIGHT:u.left=n-t.width,u.top=r-t.height}return u}(t.alignType,g,o);return u={position:"absolute",minWidth:g.width,minHeight:g.height,left:h.left,top:s.isFullScreenByEffect(a,n.renderFlags.renderFixedPositionBackgrounds)?"":h.top}}function r(e){return e.designDataItem&&e.designDataItem.background?e.designDataItem.background:e.dataItem.background}function a(t){var i=r(t);return!e.isEmpty(i.mediaRef.qualities)}var s=t.containerBackgroundUtils,u=t.balataConsts;return{patchBgVideo:function(t,i,u,c,l,d,g){var h=r(c),p=g.width,m=g.height,f={width:p,height:d,top:0},y=e.assign({displayMode:h.fittingType},h.mediaRef.posterImageRef);o.patchNodeImage(t+"poster",i,u,l,y,f,h.alignType);var w=u.custom[t];if(a(c)){var v=!l.isTouchDevice(),C=s.getBgEffectName(c.behaviorsItem,v,l.isMobileView()),b=n(h,{width:p,height:d,compRootHeight:m},l,w.quality,C);i.attr(t+"video",{width:b.minWidth,height:b.minHeight}),i.css(t+"video",b)}else i.css(t+"poster",{position:"absolute",top:"0px"}),i.attr(t+"mp4",{src:""}),w.videoNode.load()},measureBgVideo:function(e,t,i,n,r){var s=e+u.POSTER;t.custom[s]={},o.measureNodeImage(s,t,i,n,r);var c=i[e],l=c.firstChild;i[e+"video"]=l,t.custom[e]={},a(r)?t.custom[e]={quality:c.getAttribute("data-quality"),videoNode:l}:t.custom[e]={videoNode:l}}}}),define("layout/util/optimizedCssImageLayout",["lodash","zepto","coreUtils"],function(e,t,i){"use strict";function o(e,t,i,o){o===a.BG_IMAGE?e.css(t,{backgroundImage:i?'url("'+i+'")':""}):e.attr(t,{src:i})}function n(t,n,a,s,u,c){if(function(t,i){return i&&(!t||e.some(i,function(e,i){return e!==t[i]}))}(t.currentCss,s)){a.css(n,s);var l=e.defaults(s,t.currentCss);a.data(n,{"image-css":JSON.stringify(l)})}var d=function(e,t){return e?i.urlUtils.isExternalUrl(e)?e:i.urlUtils.joinURL(t.getStaticMediaUrl(),e):""}(u,c);(function(t,i){return!e.includes(t,i)||Boolean(t)!==Boolean(i)})(t.previousBackgroundImageCssUrl,d)&&function(t,i,n,a,s){var u=n.previousBackgroundImageCssUrl;s.imageResizeHandlers=s.imageResizeHandlers||{},u&&a?(s.imageResizeHandlers[t]||(s.imageResizeHandlers[t]=e.debounce(o,r,{trailing:!0})),s.imageResizeHandlers[t](i,t,a,n.type)):o(i,t,a,n.type)}(n,a,t,d,c)}var r=250,a=i.balataConsts;return{cacheCssImageMeasureData:function(i,o){var n=t(o);i.type=n.data("type"),i.currentCss=n.data("image-css"),i.currentCss&&e.isString(i.currentCss)&&(i.currentCss=JSON.parse(i.currentCss)),i.previousBackgroundImageCssUrl=n.css("backgroundImage")},patchCssImage:n}}),define("layout/specificComponents/siteBackgroundLayout",["lodash","zepto","layout/util/layout","coreUtils","layout/specificComponents/imageLayout","layout/specificComponents/html5VideoLayout","layout/util/optimizedCssImageLayout","experiment"],function(e,t,i,o,n,r,a,s){"use strict";function u(e,t,i,o,n){i.top[e]=h(i,n.isMobileView()),i.width[e]=function(e,t){var i=e.width[t.getStructureCompId()];return Math.ceil(Math.max(e.width.screen,i))}(i,n),i.height[e]=function(e,t){var i=e.height[t.getStructureCompId()],o=e.height.screen-h(e,t.isMobileView());return Math.max(o,i)}(i,n),i.height.currentImage=i.height.masterPage,t.css(e,{top:i.top[e]+"px",height:i.height[e]+"px",width:i.width[e]+"px"});var u=i.custom[e];if(s.isOpen("sv_mobileBG")){var l=n.isMobileView(),d=n.isMobileDevice(),p={width:l?i.width.screen:"100%",height:l&&"fixed"===u.bgPosition?c(i,l,d).availHeight:"100%"};t.css(v,p),t.css(C,p)}var m=g(u,n,i);if(a.patchCssImage(u,y,t,m.css,m.uri,n),i.custom[e].hasVideo){var f={designDataItem:{background:u.bgData}},w={width:i.width.screen,height:i.height.screen};r.patchBgVideo(e+b,t,i,f,n,w.height,w)}}function c(e,t,i){var o={availWidth:e.width.screen,availHeight:e.height.screen,pixelAspectRatio:e.devicePixelRatio};if(t&&i){var n=Math.min(e.availWidth.device,e.availHeight.device),r=Math.max(e.availWidth.device,e.availHeight.device);o.availHeight=Math.round(o.availWidth*(r/n))}return o}function l(e,t,i){return!!s.isOpen("sv_mobileBG")&&(i&&e.mediaRef&&"viewport"===t)}function d(t,i,o,n,r){var a={},s=e.at(T.fittingTypes,["LEGACY_BG_NORMAL","LEGACY_BG_FIT_AND_TILE","LEGACY_BG_FIT_AND_TILE_HORIZONTAL","LEGACY_BG_FIT_AND_TILE_VERTICAL"]),u=e.includes(s,i.fittingType);if(n&&!u)a.width=o.availWidth,a.height=o.availHeight,a.pixelAspectRatio=o.pixelAspectRatio;else{var c=r?f:m;a.width=Math.min(c,t.width),a.height=Math.min(c,Math.round(a.width/(t.width/t.height)))}return a.htmlTag="bg",a.alignment=i.alignType,a}function g(t,i,o){var n=t.bgData,r=n.mediaRef,a={backgroundSize:"",backgroundPosition:"",backgroundRepeat:""},s="";if(r){"WixVideo"===r.type&&(r=r.posterImageRef);var u=i.isMobileView(),g=c(o,u,i.isMobileDevice()),h=l(n,t.mediaSizing,u),p={id:r.uri,width:r.width,height:r.height},m=d(r,n,g,h,u),f=e.defaults({quality:85},r.quality||{}),y=T.getData(n.fittingType,p,m,f,i.browser);s=y.uri,a={backgroundSize:y.css.container.backgroundSize,backgroundPosition:y.css.container.backgroundPosition,backgroundRepeat:y.css.container.backgroundRepeat,height:t.currentImageHeight},h&&("fill"===n.fittingType&&(a.backgroundSize="auto 100%",a.height=g.availHeight),a.backgroundPosition=a.backgroundPosition.replace(/(center|bottom)$/,"top"))}return{css:a,uri:s}}function h(e,t){var i=parseInt(e.height.WIX_ADStop,10);i=isNaN(i)?0:i;var o=parseInt(e.top.WIX_ADStop,10);return o=isNaN(o)?0:o,t?i:o}function p(i,o,r,u,c){r[y]=window.document.querySelector("."+y),s.isOpen("sv_mobileBG")&&(r[v]=window.document.querySelector("."+v),r[C]=window.document.querySelector("."+C));var d=function(e,t){var i=void 0;i=s.isOpen("sv_preferBgDataFromPage")?e.getDataByQuery(t,t):e.getDataByQuery(t);var o=e.isMobileView()?"mobile":"desktop";return{bgData:i.pageBackgrounds[o].ref,mediaSizing:i.pageBackgrounds[o].mediaSizing}}(u,u.getPrimaryPageId());o.custom[i]={bgData:d.bgData,hasVideo:!1,mediaSizing:d.mediaSizing,currentImageHeight:t(r[y]).data("height")},l(d.bgData,d.mediaSizing,u.isMobileView())&&(o.custom[i].bgPosition=t(r[v]).data("position")),a.cacheCssImageMeasureData(o.custom[i],r[y]),"WixVideo"!==e.get(d.bgData.mediaRef,"type")||u.isTouchDevice()||(o.custom[i].hasVideo=!0,r[w]=window.document.querySelector("."+w),r[i+S]=r[w].querySelector("."+S),r[i+M]=r[w].querySelector("."+M),r[i+I]=r[i+S].firstChild,o.custom[i+b]={bgData:d.bgData,quality:r[w].getAttribute("data-quality")},n.measureNodeImage(i+M,o,r,u,c))}var m=1920,f=1e3,y="siteBackgroundcurrentImage",w="siteBackgroundcurrentVideo",v="siteBackgroundcurrent",C="siteBackgroundprevious",b="bgVideo",M=b+"poster",S=b+"video",I=b+"mp4",T=o.imageClientApi;i.registerRequestToMeasureDom("wysiwyg.viewer.components.SiteBackground"),i.registerRequestToMeasureChildren("wysiwyg.viewer.components.SiteBackground",function(e,t,i,o){return[[o.getPrimaryPageId()]]}),i.registerPatcher("wysiwyg.viewer.components.SiteBackground",u),i.registerCustomMeasure("wysiwyg.viewer.components.SiteBackground",p);return{testAPI:{getDeviceScreenDimensions:c,calculateTargetImageSize:d,getCssImageData:g}}}),define("layout/specificComponents/wPhotoLayout",["zepto","lodash","layout/util/layout","layout/specificComponents/imageLayout","coreUtilsLib","imageClientLib","siteUtils"],function(e,t,i,o,n,r,a){"use strict";function s(t,i,o){var n=e(o[t]),r=parseInt(n.data("content-padding-horizontal"),10),a=parseInt(n.data("content-padding-vertical"),10),s=parseFloat(n.data("exact-height"));i.height[t]=i.custom[t]&&i.custom[t].thisIsMyHeight||o[t].offsetHeight,i.custom[t]={marginWidth:r,marginHeight:a,exactHeight:s}}function u(e,i,s,u,l){var d=e+"img",g=e+"link",h=u.dataItem,p=u.propertiesItem,m=function(e){return e===r.fittingTypes.LEGACY_FIT_WIDTH?r.fittingTypes.LEGACY_FIT_HEIGHT:c[e]||e}(p&&p.displayMode||"fill"),f=n.imageUtils.getContainerSize(r,function(e,t,i){var o=t.height[e]-(t.custom[e].marginHeight||0),n=t.width[e]-(t.custom[e].marginWidth||0),a={width:n>0?n:t.width[e],height:o>0?o:t.height[e]},s=t.custom[e].exactHeight-(t.custom[e].marginHeight||0);return i===r.fittingTypes.LEGACY_FIT_HEIGHT&&Math.ceil(s)===a.height&&(a.height=s),a}(e,s,m),{width:h.width,height:h.height},m),y=a.layout.isVerticallyStretched(u.layout),w={width:a.layout.isHorizontallyStretched(u.layout)?"":f.width+s.custom[e].marginWidth,height:y?"":f.height+s.custom[e].marginHeight},v=t.assign({},t.pick(h,["width","height","uri","quality"]),{displayMode:m,crop:t.get(p,"overrideCrop")||h.crop});o.patchNodeImage(d,i,s,l,v,f),i.css(e,w),i.css(g,f)}var c={fitWidthStrict:r.fittingTypes.LEGACY_FIT_WIDTH,fitHeightStrict:r.fittingTypes.LEGACY_FIT_HEIGHT},l={pathArray:["img"],type:"core.components.Image"};i.registerRequestToMeasureDom("wysiwyg.viewer.components.WPhoto"),i.registerRequestToMeasureChildren("wysiwyg.viewer.components.WPhoto",[l,["link"]]),i.registerPatcher("wysiwyg.viewer.components.WPhoto",u),i.registerCustomMeasure("wysiwyg.viewer.components.WPhoto",s),i.wixapps.registerRequestToMeasureDom("wysiwyg.viewer.components.WPhoto"),i.wixapps.registerRequestToMeasureChildren("wysiwyg.viewer.components.WPhoto",[l,["link"]]),i.wixapps.registerPatcher("wysiwyg.viewer.components.WPhoto",u),i.wixapps.registerCustomMeasure("wysiwyg.viewer.components.WPhoto",s),i.registerRequestToMeasureDom("wysiwyg.viewer.components.ClipArt"),i.registerRequestToMeasureChildren("wysiwyg.viewer.components.ClipArt",[l,["link"]]),i.registerPatcher("wysiwyg.viewer.components.ClipArt",u),i.registerCustomMeasure("wysiwyg.viewer.components.ClipArt",s)}),define("layout/specificComponents/wixFreemiumBannerLayout",["lodash","layout/util/layout","experiment"],function(e,t,i){"use strict";t.registerRequestToMeasureChildren("wysiwyg.viewer.components.WixAds",[["top"],["bottom"]]),t.registerCustomMeasure("wysiwyg.viewer.components.WixAds",function(t,o,n,r){var a=r.isMobileView(),s=["height","width","top","left"],u=void 0;u=i.isOpen("displayWixAdsNewVersion")?["top"]:a?["top"]:["top","bottom"];var c=n.WIX_ADStop.getBoundingClientRect(),l=o.width.WIX_ADStop!==c.width;o.height.WIX_ADStop=c.height,e.forEach(u,function(i){var r=t+i,a=n[r].getBoundingClientRect();o.custom[r]=a,e.forEach(s,function(e){o[e][r]=Math.ceil(a[e])})}),!i.isOpen("displayWixAdsNewVersion")&&l&&(o.width.WIX_ADStop+=5)}),i.isOpen("displayWixAdsNewVersion")||t.registerPatcher("wysiwyg.viewer.components.WixAds",function(e,t,i,o,n){if(t.css(e,{visibility:""}),!n.isMobileView()){var r=0===i.width.WIX_ADStop?"":i.width.WIX_ADStop;t.css(e+"top",{width:r})}})}),define("layout/specificComponents/documentMediaLayout",["zepto","lodash","layout/util/layout","imageClientLib","layout/specificComponents/imageLayout"],function(e,t,i,o,n){"use strict";i.registerRequestToMeasureChildren("wysiwyg.viewer.components.documentmedia.DocumentMedia",[["label"],{pathArray:["img"],type:"core.components.Image"},["link"]]),i.registerCustomMeasure("wysiwyg.viewer.components.documentmedia.DocumentMedia",function(t,i,o){var n=e(o[t]),r=t+"label",a=i.width[r],s=i.height[r],u=Math.max(i.width[t],a),c=n.data("content-padding-left"),l=n.data("content-padding-right"),d=n.data("content-padding-top"),g=n.data("content-image-height"),h={width:u-c-l,height:Math.max(g-d-s,1)};i.custom[t]={containerSize:h},i.width[t]=u,i.minWidth[t]=a}),i.registerPatcher("wysiwyg.viewer.components.documentmedia.DocumentMedia",function(e,i,r,a,s){var u=t.defaults({displayMode:o.fittingTypes.LEGACY_FULL},a.dataItem);n.patchNodeImage(e+"img",i,r,s,u,r.custom[e].containerSize),i.css(e,{width:r.width[e]})})}),define("layout/specificComponents/screenWidthLayouts/screenWidthContainerLayout",["layout/util/layout"],function(e){"use strict";function t(e,t,o){t.left[e]=0,i(e,t,o)}function i(e,t,i){var o=t.height[e+"inlineContent"]||0;t.containerHeightMargin[e]=o?i[e].offsetHeight-o:0}function o(e,t,i){return i?0:Math.min((e-t)/2,0)}return e.registerRequestToMeasureDom("mobile.core.components.Container"),e.registerRequestToMeasureChildren("mobile.core.components.Container",[["inlineContent"]]),e.registerCustomMeasure("mobile.core.components.Container",i),e.registerCustomMeasure("wysiwyg.viewer.components.ScreenWidthContainer",t),{calcLeftPositionByDevice:o,calcLeftPosition:function(e,t,i){return o(e,t,i.isMobileView()||i.isMobileDevice())},measureContainer:i,measureScreenWidthContainer:t}}),define("layout/util/calculateScreenWidthDimensions",["siteUtils","layout/util/rootLayoutUtils"],function(e,t){"use strict";var i=e.layout.stretchInCenteredContainer;return function(e,o,n){var r=Math.max(e.width.screen,t.getRootWidth(o,e,n));return i(t.getRootWidth(o,e,n),r)}}),define("layout/specificComponents/bgImageLayout",["zepto","lodash","layout/util/layout","coreUtils","layout/util/optimizedCssImageLayout","layout/specificComponents/imageLayout"],function(e,t,i,o,n,r){"use strict";function a(e,i,n,r,a,s){var u=a.mobile.getDevicePixelRatio(),c={width:r.width,height:r.height,alignment:i,htmlTag:s||"bg",pixelAspectRatio:u},l={id:n.uri,width:n.width,height:n.height},d=t.defaults({quality:85},n.quality||{});return o.imageClientApi.getData(e,l,c,d,a.browser)}function s(e,i,o,s,c,d,g,h){var p=s.custom[e].type,m=function(e){if(t.isUndefined(e.designDataItem))return e.dataItem.background;return e.designDataItem.background}(c);if(p===l.IMAGE){var f={width:h.width,height:g},y=t.assign({displayMode:m.fittingType},u(m));r.patchNodeImage(i,o,s,d,y,f,m.alignType)}else{var w=i+"image",v=function(e,t,i,o,n){var r=i.width,s=o||i.height,c=u(e);return a(e.fittingType,e.alignType,c,{width:r,height:s},n,t)}(m,"bg",h,g,d),C=t.assign({height:g},v.css.container);n.patchCssImage(s.custom[i],w,o,C,v.uri,d)}}function u(e){var t=e.mediaRef;return t&&"WixVideo"===t.type&&(t=t.posterImageRef),t}function c(e,t,i,r,s,u){var c=i.custom[e],l=e+"bg";if(c){var d=r.dataItem;if(!d||function(e){return!e||o.urlUtils.isExternalUrl(e)}(d.uri))return;var g=a(r.propertiesItem.fittingType,r.propertiesItem.alignType,d,u,s);n.patchCssImage(c,l,t,g.css.container,g.uri,s)}}var l=o.balataConsts;return i.registerRequestToMeasureChildren("wysiwyg.viewer.components.background.bgImage",[["image"]]),i.registerRequestToMeasureChildren("wysiwyg.viewer.components.BgImageStrip",[["bg"]]),{measureLegacyBgImageStrip:function(e,t,i){var o=e+"bg";i[o]&&(t.custom[e]={},n.cacheCssImageMeasureData(t.custom[e],i[o]))},measureBgImageBalata:function(t,i,o,a,s){var u=t+l.MEDIA+l.CONTENT,c=o[u].getAttribute("data-type");if(i.custom[t]=i.custom[t]||{},i.custom[t].type=c,c===l.IMAGE)r.measureNodeImage(u,i,o,a,s);else{var d=u+"image";o[d]=e(o[u]).find("#"+d)[0];var g=o[d];i.custom[u]={},n.cacheCssImageMeasureData(i.custom[u],g)}},patchBgImage:s,patchLegacyBgImageStrip:c}}),define("layout/specificComponents/youtubeVideoLayout",["lodash","coreUtils","layout/specificComponents/imageLayout"],function(e,t,i){"use strict";var o=t.balataConsts;return{patchBgVideo:function(t,o,n,r,a,s,u){var c=function(e){return e.designDataItem&&e.designDataItem.background?e.designDataItem.background:e.dataItem.background}(r),l=u.width,d=u.height;o.attr(t+"video",{"min-width":l,"min-height":d,width:l,height:d}),o.css(t+"video",{position:"absolute"});var g={width:l,height:s,top:0},h=c.mediaRef.posterImage||{uri:"//img.youtube.com/vi/"+c.mediaRef.videoId+"/hqdefault.jpg"},p=e.assign({displayMode:c.fittingType},h);i.patchNodeImage(t+"poster",o,n,a,p,g,c.alignType)},measureBgVideo:function(e,t,n,r,a){var s=e+o.POSTER,u=n[e];n[e+"video"]=u.firstChild,t.custom[e]={},t.custom[s]={},i.measureNodeImage(s,t,n,r,a)}}}),define("layout/specificComponents/balataLayout",["lodash","coreUtils","layout/specificComponents/bgImageLayout","layout/specificComponents/html5VideoLayout","layout/specificComponents/youtubeVideoLayout"],function(e,t,i,o,n){"use strict";function r(t,i,o,n,r){var a=t[n][o];return e.isNumber(a)?a:(a=i[o][r],e.isNumber(a)?a:0)}function a(t,a,s,d,g,h){var p=u(t),m=a.custom[p]={},f=p+l.MEDIA;m.hasBalata=Boolean(s[p]),m.hasMedia=Boolean(s[f]),m.hasBalata&&(m.enableVideo="true"===s[p].getAttribute("data-enable-video"),e.forEach(h,function(e,t){a[t][p]=e}),a.left[p]=r(a,s,p,"left","offsetLeft"),a.top[p]=r(a,s,p,"top","offsetTop"),function(e,t,r,a,s){var u=c(s).mediaRef,d=t.custom[e].enableVideo;u&&("Image"!==u.type&&d?"WixVideo"===u.type?o.measureBgVideo(e+l.MEDIA+l.CONTENT,t,r,a,s):"Video"===u.type&&"YOUTUBE"===u.videoType&&n.measureBgVideo(e+l.MEDIA+l.CONTENT,t,r,a,s):i.measureBgImageBalata(e,t,r,a,s))}(p,a,s,d,g))}function s(t,r,a,s,g,h,p){var m=u(t),f=a.custom[m];if(f.hasBalata){var y=m+l.MEDIA,w=!g.isTouchDevice(),v=d.getBgEffectName(s.behaviorsItem,w,g.isMobileView()),C=d.getHeightByEffect(v,a,h.height),b={overflow:"hidden",left:h.left,width:h.width};g.browserFlags().clipParallaxWithWebkitClipPath?b["-webkit-clip-path"]="border-box":b.clip="rect(0px,"+h.width+"px,"+h.height+"px,0px)",p&&(b=e.omit(b,["left","width"])),r.css(m,b),f.hasMedia&&(r.css(y,{width:h.width+"px",left:function(e,t,i){if(d.isFullScreenByEffect(e,i.renderFlags.renderFixedPositionBackgrounds))return Math.floor(t.absoluteLeft||0);return 0}(v,h,g),height:C+"px"}),function(e,t,r,a,s,u,d){var g=e+l.MEDIA+l.CONTENT,h=c(a).mediaRef,p=r.custom[e].enableVideo;h&&("Image"!==h.type&&p?"WixVideo"===h.type?o.patchBgVideo(g,t,r,a,s,u,d):"Video"===h.type&&"YOUTUBE"===h.videoType&&n.patchBgVideo(g,t,r,a,s,u,d):i.patchBgImage(e,g,t,r,a,s,u,d))}(m,r,a,s,g,C,h))}}function u(e){return e+l.BALATA}function c(t){return e.get(t,["designDataItem","background"],e.get(t,["dataItem","background"]))||{}}var l=t.balataConsts,d=t.containerBackgroundUtils;return{BALATA_PATHS_TO_REQUEST_MEASURE:[[l.BALATA],[l.BALATA,l.MEDIA],[l.BALATA,l.MEDIA,l.CONTENT],[l.BALATA,l.MEDIA,l.CONTENT,l.POSTER],[l.BALATA,l.OVERLAY],[l.BALATA,l.OVERLAY,l.OVERLAY]],measure:a,patch:s}}),define("layout/specificComponents/screenWidthLayouts/layoutStructureUtil",["lodash","layout/specificComponents/screenWidthLayouts/screenWidthContainerLayout"],function(e,t){"use strict";return{getBackgroundDataItem:function(t){return e.isUndefined(t.designDataItem)?t.dataItem.background:t.designDataItem.background},measureShrinkableContainer:function(e,i,o){i.height[e]=o[e].offsetHeight,t.measureScreenWidthContainer(e,i,o)},patchScreenWidth:function(e,i,o,n,r){var a=e+"screenWidthBackground",s=r.isMobileView()||r.isMobileDevice();i.css(a,{width:o.width.screen,left:t.calcLeftPositionByDevice(o.width.site,o.width.screen,s)}),i.css(e,{left:0})}}}),define("layout/specificComponents/screenWidthLayouts/stripsComponentsLayout",["lodash","zepto","layout/util/layout","layout/util/rootLayoutUtils","layout/util/calculateScreenWidthDimensions","layout/specificComponents/balataLayout","layout/specificComponents/bgImageLayout","layout/specificComponents/screenWidthLayouts/layoutStructureUtil","layout/specificComponents/screenWidthLayouts/screenWidthContainerLayout"],function(e,t,i,o,n,r,a,s,u){"use strict";function c(e,t,i,o,a){if(u.measureScreenWidthContainer(e,t,i),s.getBackgroundDataItem(a)){var c=n(t,o,a.rootId);t.width[e]=c.width;var l={width:c.width,left:c.left,height:t.height[e]};r.measure(e,t,i,o,a,l)}}function l(t,i,a,u,c,l){if(s.getBackgroundDataItem(u)){h(t,i);var d=n(a,c,u.rootId),g=e.assign({top:0,left:d.left,width:d.width,height:a.height[t],absoluteLeft:0},l);i.css(t,{width:o.getRootWidth(c,a,u.rootId)}),r.patch(t,i,a,u,c,g)}}function d(e,t,i,r,a){var s=e+"inlineContent",u=s+"Parent",c=n(i,r,a.rootId);t.css(u,{left:c.left,width:c.width}),t.css(s,{left:-1*c.left,width:o.getRootWidth(r,i,a.rootId)})}function g(t){return"Image"===e.get(t,["dataItem","type"])}function h(e,t){t.css(e,{left:0})}return i.registerRequestToMeasureDom("wysiwyg.viewer.components.StripContainerSlideShow"),i.registerRequestToMeasureDom("wysiwyg.viewer.components.StripContainer"),i.registerRequestToMeasureDom("wysiwyg.viewer.components.StripColumnsContainer"),i.registerRequestToMeasureDom("wysiwyg.viewer.components.Column"),i.registerRequestToMeasureDom("wysiwyg.viewer.components.StripContainerSlideShowSlide"),i.registerRequestToMeasureChildren("wysiwyg.viewer.components.StripContainerSlideShow",[["background"],["inlineContentParent"],["inlineContent"],["shownOnAllSlides"],["navigationArrows"],["prevButton"],["nextButton"]]),i.registerRequestToMeasureChildren("wysiwyg.viewer.components.StripContainer",[["inlineContent"]].concat(r.BALATA_PATHS_TO_REQUEST_MEASURE)),i.registerRequestToMeasureChildren("wysiwyg.viewer.components.StripContainerSlideShowSlide",[["inlineContentParent"],["inlineContent"]].concat(r.BALATA_PATHS_TO_REQUEST_MEASURE)),i.registerCustomMeasure("wysiwyg.viewer.components.StripContainer",c),i.registerCustomMeasure("wysiwyg.viewer.components.StripContainerSlideShowSlide",function(e,i,o,n,r){var a=t(o[e]),s=a.data("parent-id");i.minHeight[e]=a.data("min-height"),i.height[e]=i.height[s],c(e,i,o,n,r)}),i.registerCustomMeasure("wysiwyg.viewer.components.StripContainerSlideShow",function(e,i,o){u.measureScreenWidthContainer(e,i,o),i.containerHeightMargin[e]=0;var n=t(o[e+"navigationArrows"]);i.custom[e]={offset:parseInt(n.attr("data-navigation-button-margin"),10)}}),i.registerPatcher("wysiwyg.viewer.components.StripContainer",l),i.registerPatchers("wysiwyg.viewer.components.StripContainerSlideShowSlide",[function(e,t,i,o,n){d(e,t,i,n,o)},l]),i.registerPatcher("wysiwyg.viewer.components.StripContainerSlideShow",function(e,t,i,o,n){h(e,t),d(e,t,i,n,o);var r=u.calcLeftPosition(o.layout.width,i.width.screen,n)+i.custom[e].offset;t.css(e,{width:n.getSiteWidth()}),t.css(e+"prevButton",{left:r}),t.css(e+"nextButton",{right:r})}),i.registerCustomMeasure("wysiwyg.viewer.components.BgImageStrip",function(e,t,i,o,r){var s=n(t,o,r.rootId);t.width[e]=s.width,t.left[e]=s.left,g(r)&&a.measureLegacyBgImageStrip(e,t,i,o,r)}),i.registerPatcher("wysiwyg.viewer.components.BgImageStrip",function(e,t,i,o,n){if(t.css(e,{width:i.width[e]+"px",left:i.left[e]+"px"}),g(o)){var r={width:i.width[e],height:i.height[e]};a.patchLegacyBgImageStrip(e,t,i,o,n,r)}else{var s=e+"bg";t.css(s,{backgroundImage:"none"})}}),{measureStripContainer:c,patchStripContainer:l}}),define("layout/specificComponents/screenWidthLayouts/headerLayout",["lodash","siteUtils","layout/util/layout","layout/specificComponents/screenWidthLayouts/screenWidthContainerLayout"],function(e,t,i,o){"use strict";i.registerRequestToMeasureChildren("wysiwyg.viewer.components.HeaderContainer",[["screenWidthBackground"],["inlineContent"]]),i.registerRequestToMeasureDom("wysiwyg.viewer.components.HeaderContainer"),i.registerCustomLayoutFunction("wysiwyg.viewer.components.HeaderContainer",function(e,i,n){var r=i[e],a=e+"screenWidthBackground",s="true"===r.dataset.isMobile,u=t.measurerUtils.getScreenWidth(s),c=parseInt(r.dataset.siteWidth,10);return n.top[e]=parseInt(r.style.top,10),function(t){t.css(a,{width:u,left:o.calcLeftPositionByDevice(c,u,s)}),t.css(e,{left:0})}})}),define("layout/specificComponents/screenWidthLayouts/footerLayout",["siteUtils","layout/util/layout","layout/specificComponents/screenWidthLayouts/screenWidthContainerLayout"],function(e,t,i){"use strict";t.registerRequestToMeasureDom("wysiwyg.viewer.components.FooterContainer"),t.registerRequestToMeasureChildren("wysiwyg.viewer.components.FooterContainer",[["screenWidthBackground"],["inlineContent"]]),t.registerCustomLayoutFunction("wysiwyg.viewer.components.FooterContainer",function(t,o){var n=o[t],r="true"===n.getAttribute("data-fixedposition"),a="true"===n.getAttribute("data-isrunninginmobile"),s=e.measurerUtils.getScreenWidth(a),u=parseInt(n.getAttribute("data-sitewidth"),10),c=e.measurerUtils.getSiteMarginBottom();return function(e){r&&e.css(t,{left:0,top:"auto",bottom:c});var o=t+"screenWidthBackground";e.css(o,{width:s,left:i.calcLeftPositionByDevice(u,s,a)})}})}),define("layout/specificComponents/screenWidthLayouts/pageLayout",["lodash","coreUtils","siteUtils","layout/util/layout","layout/specificComponents/balataLayout","layout/specificComponents/screenWidthLayouts/layoutStructureUtil"],function(e,t,i,o,n,r){"use strict";var a=t.balataConsts.BALATA;o.registerRequestToMeasureDom("mobile.core.components.Page"),o.registerMeasureChildrenFirst("mobile.core.components.Page",!0),o.registerRequestToMeasureChildren("mobile.core.components.Page",function(e,t){return"true"===t[e].getAttribute("data-ispopup")?[["inlineContent"]].concat(n.BALATA_PATHS_TO_REQUEST_MEASURE):[["inlineContent"]]}),o.registerCustomLayoutFunction("mobile.core.components.Page",function(t,o,s,u,c){function l(){!function(){if("true"!==h.dataset.isMeshLayout){var e=s.containerHeightMargin[t]||0;s.height[t]=i.layout.getPageBottomChildEnd(s,o,u,c)+e}}(),m&&function(){var i=e.clone(c);i.id+=a,i.designDataItem={background:g()},function(e,t){r.getBackgroundDataItem(t)&&n.measure(e,s,o,u,t,{left:Math.max(0,.5*(s.clientWidth-s.width.screen)),width:s.width.screen,height:s.innerHeight.screen})}(t,i)}()}function d(i){m&&function(i){var o=t+a,r=e.defaultsDeep({id:o,rootId:"masterPage",structure:{behaviors:[]}},c);r.designDataItem={background:g()};var l={left:s.left[o],top:s.top[o],width:s.width[o],height:s.height[o]};n.patch(t,i,s,r,u,l)}(i)}function g(){var t=p?"mobile":"desktop";return e.get(c.dataItem,["pageBackgrounds",t,"ref"])}var h=o[t],p="true"===h.getAttribute("data-ismobile"),m="true"===h.getAttribute("data-ispopup");return l(),d})}),define("layout/specificComponents/screenWidthLayouts/pagesContainerLayout",["siteUtils","layout/util/layout"],function(e,t){"use strict";t.registerRequestToMeasureChildren("wysiwyg.viewer.components.PagesContainer",[["screenWidthBackground"],["inlineContent"]]),t.registerCustomLayoutFunction("wysiwyg.viewer.components.PagesContainer",function(t,i){var o=i[t],n=t+"screenWidthBackground",r="true"===o.dataset.isMobile,a=parseInt(o.dataset.siteWidth,10),s=e.measurerUtils.getScreenWidth(),u=r?0:Math.min((a-s)/2,0);return function(e){e.css(n,{left:u,width:s})}})}),define("layout/specificComponents/screenWidthLayouts/legacyLayout",["zepto","lodash","coreUtils","layout/util/layout","siteUtils","layout/specificComponents/balataLayout","layout/specificComponents/screenWidthLayouts/layoutStructureUtil","layout/specificComponents/screenWidthLayouts/screenWidthContainerLayout"],function(e,t,i,o,n,r,a,s){"use strict";function u(i,o,u,l,d){a.measureShrinkableContainer(i,o,u),o.shrinkableContainer[i]=!0;var g=n.layout.getPageBottomChildEnd(o,u,l,d)+o.containerHeightMargin[i],h=l.getPageMinHeight(),p=t.get(d,["propertiesItem",l.isMobileView()?"mobile":"desktop"]);if(p&&p.minHeight&&(h=p.minHeight),o.pageBottomByComponents[i]=g,o.minHeight[i]=h,o.height[i]=Math.max(h,g),o.width[i]=u[i].offsetWidth,u.POPUPS_ROOT=e("#POPUPS_ROOT"),d.dataItem.isPopup){var m={background:function(e,i){return t.get(e.dataItem,["pageBackgrounds",function(e){return e.isMobileView()?"mobile":"desktop"}(i),"ref"])}(d,l)},f=t.clone(d);f.id+=c,f.designDataItem=m,o.top[i]=0,function(e,t,i,o,n){s.measureScreenWidthContainer(e,t,i),a.getBackgroundDataItem(n)&&r.measure(e,t,i,o,n,{left:Math.max(0,.5*(t.clientWidth-t.width.screen)),width:t.width.screen,height:t.innerHeight.screen})}(i,o,u,l,f)}}var c=i.balataConsts.BALATA;o.registerRequestToMeasureChildren("wixapps.integration.components.AppPage",[["inlineContent"]]),o.registerMeasureChildrenFirst("wixapps.integration.components.AppPage",!0),o.registerCustomMeasure("wixapps.integration.components.AppPage",u),o.registerRequestToMeasureDom("wixapps.integration.components.AppPage")}),define("layout/specificComponents/screenWidthLayouts/containerAndScreenWidthLayout",["siteUtils","layout/util/layout","layout/specificComponents/screenWidthLayouts/screenWidthContainerLayout","layout/specificComponents/screenWidthLayouts/stripsComponentsLayout","layout/specificComponents/screenWidthLayouts/headerLayout","layout/specificComponents/screenWidthLayouts/footerLayout","layout/specificComponents/screenWidthLayouts/pageLayout","layout/specificComponents/screenWidthLayouts/pagesContainerLayout","layout/specificComponents/screenWidthLayouts/legacyLayout"],function(e,t,i,o){"use strict";return t.registerRequestToMeasureDom("wysiwyg.viewer.components.ScreenWidthContainer"),t.registerRequestToMeasureChildren("wysiwyg.viewer.components.ScreenWidthContainer",[["screenWidthBackground"],["inlineContent"]]),t.registerCustomLayoutFunction("wysiwyg.viewer.components.ScreenWidthContainer",function(t,o){var n="true"===o[t].dataset.isMobile,r=parseInt(o[t].dataset.siteWidth,10),a=e.measurerUtils.getScreenWidth(n);return function(e){e.css(t+"screenWidthBackground",{width:a,left:i.calcLeftPositionByDevice(r,a)}),e.css(t,{left:0})}}),{measureContainer:i.measureContainer,measureStripContainer:o.measureStripContainer,patchStripContainer:o.patchStripContainer}}),define("layout/wixappsLayout/proxyLayoutRegistrar",[],function(){"use strict";var e={};return{registerCustomMeasure:function(t,i){e[t]=i},getProxiesToMeasure:function(){return e}}}),define("layout/specificComponents/wixappsLayout",["zepto","lodash","coreUtils","layout/wixappsLayout/proxyLayoutRegistrar","layout/util/layout","layout/util/wixappsSingleCompLayout","experiment"],function(e,t,i,o,n,r){"use strict";function a(){var i=t.toArray(arguments),o=i.join(""),n=i.slice(1).join("");return e("#"+o)[0]||e("#"+n)[0]}function s(e,t,i,o){var n=e.compId,s=a(n);t[n]=s;var u=e.structureInfo;u.id=n,u.type=e.compType,function(e,t,i,o){r.measureComponentChildren(e,a,o,i,t)}(u,o,t,i),r.maps.classBasedCustomMeasures[e.compType]&&r.maps.classBasedCustomMeasures[e.compType](n,i,t,o,e.structureInfo)}function u(e,o,n){var r=e+d,a=t.get(n,[e,"attributes","data-state","value"]);i.stringUtils.isTrue(n[e].getAttribute("data-dynamic-height"))&&"loading"!==a&&(o.height[e]=o.height[r],o.minHeight[e]=o.height[r])}function c(i,n,r,a,u){var c=i.id,l=c+d,g=n.querySelector("#"+l);r.custom[c]={};var h=!1;t.forEach(o.getProxiesToMeasure(),function(i,o){var n=function(t,i){return e("[data-proxy-name="+t+"]",i)}(o,g);r.custom[c][o]=[],t.forEach(n,function(e,t){var n=i(e,u,r);r.custom[c][o][t]=n,n.comp&&s(n.comp,a,r,u),n.needsRelayout&&!r.custom[c][o][t].didRelayout&&(h=!0,r.custom[c][o][t].didRelayout=!0)})});var p={};return p[i.id]=!0,{needsAdditionalInnerLayout:h,changedCompsMap:p}}function l(i,n,a,s,u){var c=i.id;t(o.getProxiesToMeasure()).flatMap(function(e,t){return n.custom[c][t]}).forEach(function(i){!function(i){t.forEach(i,function(i){var o=e(i.node),n=i.funcName,r=t.isArray(i.params)?i.params:[i.params];t.isFunction(o[n])&&o[n].apply(o,r)})}(i.domManipulations);var o=i.comp;o&&r.patchComponent(o.structureInfo,a,s,n,u)})}var d="inlineContent";return n.registerLayoutInnerCompsFirst("wixapps.integration.components.AppPart",c,l),n.registerLayoutInnerCompsFirst("wixapps.integration.components.AppPart2",c,l),n.registerRequestToMeasureChildren("wixapps.integration.components.AppPart",[[d]]),n.registerRequestToMeasureDom("wixapps.integration.components.AppPart"),n.registerCustomMeasure("wixapps.integration.components.AppPart",u),n.registerRequestToMeasureChildren("wixapps.integration.components.AppPart2",[[d]]),n.registerRequestToMeasureDom("wixapps.integration.components.AppPart2"),n.registerCustomMeasure("wixapps.integration.components.AppPart2",u),{appPartMeasureFunction:u,inlineContentId:d,preMeasureProxies:c,postPatchProxies:l}}),define("layout/util/svgLayoutUtils",["lodash","siteUtils"],function(e,t){"use strict";function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,i=arguments[1],r=arguments[2],a=arguments[3],s=a?"xMidYMid meet":"none",u=t.svgFeatureDetection.flags().isVectorEffect,c=i?function(e,t,i,o){var n=(i.width-t)/e.width,r=(i.height-t)/e.height,a=Math.min(n,r),s=i.width/(o?a:n),u=i.height/(o?a:r),c=e.x-(s-e.width)/2,l=e.y-(u-e.height)/2;return{width:s,height:u,x:c,y:l}}(e,i,r,a):e;return{viewBox:n(c),strokeWidth:i&&!u?function(e,t,i){var o=Math.min((i.width-t)/e.width,(i.height-t)/e.height);return t*(1/o)}(e,i,r):i,width:r.width,height:r.height,preserveAspectRatio:s}}var o={width:1,height:1,x:0,y:0},n=function(e){return e.x+" "+e.y+" "+e.width+" "+e.height};return{getSvgScaleProps:i}}),define("layout/specificComponents/svgShape/svgScalerUtils",[],function(){"use strict";return{trim:function(e){return e.replace(/^\s+|\s+$/g,"")},round:function(e){return Math.round(1e6*e)/1e6}}}),define("layout/specificComponents/svgShape/svgPathParser",["lodash","layout/specificComponents/svgShape/svgScalerUtils"],function(e,t){"use strict";return{getParsedPath:function(i){var o=t.trim(i);if(""===o)return[];return o.match(/[a-z][^a-z]*/gi).map(function(i){for(i=i.replace(/-/g," -").replace(/,/g," ").replace(/(-?\d*[\.\-]\d+)/g,function(e,t){return" "+t});e.includes(i,"  ");)i=i.replace(/ {2}/g," ");return[i.substring(0,1),t.trim(i.substring(1))]}).map(function(t){var i=[];if(!e.includes("QSCL",t[0].toUpperCase())||1!==t[1].split(",").length)return t;var o=t[1].split(" ");return o.length%2!=0?t:(o.forEach(function(e,t,o){t%2==0&&i.push(e+" "+o[t+1])}),[t[0],i.join(",")])})},stringifyParsedPath:function(e){var t="";return e.forEach(function(e){e.forEach(function(e){t+=e})}),t}}}),define("layout/specificComponents/svgShape/svgBasicScaler",["layout/specificComponents/svgShape/svgScalerUtils"],function(e){"use strict";var t=function(t,i){return e.round(parseFloat(t)*i)},i=function(e,i,o){var n=e.split(/[\s,]+/);return t(n[0],i)+" "+t(n[1],o)};return{scaleSingleValue:t,scalePairString:i,scaleMultiplePairStrings:function(t,o,n){if(""===t)return"";return t.split(",").map(function(t){return i(e.trim(t),o,n)}).join(",")},scaleMultipleSingleStrings:function(i,o){if(""===i)return"";return i.split(/[\s,]+/).map(function(i){return t(e.trim(i),o)}).join(",")}}}),define("layout/specificComponents/svgShape/svgPathScaler",["lodash","layout/specificComponents/svgShape/svgPathParser","layout/specificComponents/svgShape/svgBasicScaler","coreUtils"],function(e,t,i,o){"use strict";var n={M:i.scaleMultiplePairStrings,L:i.scaleMultiplePairStrings,H:i.scaleMultipleSingleStrings,V:i.scaleMultipleSingleStrings,Z:function(){return""},C:i.scaleMultiplePairStrings,S:i.scaleMultiplePairStrings,Q:i.scaleMultiplePairStrings,T:i.scaleMultiplePairStrings,A:function(t,n,r){var a=t.split(/[\s,]+/),s=e.chunk(a,7),u=[];return e.forEach(s,function(e){u.push(function(e,t,n){return 7!==e.length?(o.log.verbose("incorrect arc string, should have exactly 7 parameters. (value was "+e.join(" ")),e.join(" ")):(e[0]=i.scaleSingleValue(e[0],t),e[1]=i.scaleSingleValue(e[1],n),e[2]=function(e,t,o){return i.scaleSingleValue(e,o/(360*t))}(e[2],t,n),e[5]=i.scaleSingleValue(e[5],t),e[6]=i.scaleSingleValue(e[6],n),e.join(" "))}(e,n,r))}),u.join(" ")}};return{scale:function(i,o,r){var a=t.getParsedPath(i.getAttribute("d"));return e.forEach(a,function(e){var t=[e[1]],i=e[0].toUpperCase();"V"===i?t.push(r):"H"===i?t.push(o):(t.push(o),t.push(r)),e[1]=n[e[0].toUpperCase()].apply(null,t)}),{d:t.stringifyParsedPath(a)}}}}),define("layout/specificComponents/svgShape/svgPolygonParser",["layout/specificComponents/svgShape/svgScalerUtils"],function(e){"use strict";return{getParsedPoints:function(t){var i=e.trim(t),o=i.split(/[\s,]+/),n=[];if(""===i)return[];for(var r=0;r<o.length;r+=2)n.push([o[r],o[r+1]]);return n},stringifyPoints:function(t){var i="";return t.forEach(function(e){i+=e.join(",")+" "}),e.trim(i)}}}),define("layout/specificComponents/svgShape/svgPolygonScaler",["lodash","layout/specificComponents/svgShape/svgBasicScaler","layout/specificComponents/svgShape/svgPolygonParser"],function(e,t,i){"use strict";return{scale:function(o,n,r){var a=i.getParsedPoints(o.getAttribute("points"));return e.forEach(a,function(e){e[0]=t.scaleSingleValue(e[0],n),e[1]=t.scaleSingleValue(e[1],r)}),e.isEmpty(a)?{}:{points:i.stringifyPoints(a)}}}}),define("layout/specificComponents/svgShape/svgCircleScaler",["layout/specificComponents/svgShape/svgBasicScaler"],function(e){"use strict";return{scale:function(t,i,o){var n=t.getAttribute("cx"),r=t.getAttribute("cy"),a=t.getAttribute("r"),s=Math.min(i,o);return n&&r?{cx:e.scaleSingleValue(n,s),cy:e.scaleSingleValue(r,s),r:e.scaleSingleValue(a,s)}:{}}}}),define("layout/specificComponents/svgShape/svgRectScaler",["lodash","layout/specificComponents/svgShape/svgBasicScaler"],function(e,t){"use strict";function i(i,o,n){return o?e.set({},i,t.scaleSingleValue(o,n)):null}return{scale:function(t,o,n){var r=t.getAttribute("width"),a=t.getAttribute("height"),s=t.getAttribute("rx"),u=t.getAttribute("ry"),c=t.getAttribute("x"),l=t.getAttribute("y");return e.assign({},i("width",r,o),i("height",a,n),i("rx",s,o),i("ry",u,n),i("x",c,o),i("y",l,n))}}}),define("layout/specificComponents/svgShape/svgEllipseScaler",["layout/specificComponents/svgShape/svgBasicScaler"],function(e){"use strict";return{scale:function(t,i,o){var n=t.getAttribute("cx"),r=t.getAttribute("cy"),a=t.getAttribute("rx"),s=t.getAttribute("ry"),u={};return n&&a&&(u.cx=e.scaleSingleValue(n,i),u.rx=e.scaleSingleValue(a,i)),r&&s&&(u.cy=e.scaleSingleValue(r,o),u.ry=e.scaleSingleValue(s,o)),u}}}),define("layout/specificComponents/svgShape/svgPolylineParser",["lodash","layout/specificComponents/svgShape/svgScalerUtils"],function(e,t){"use strict";return{getParsedPoints:function(e){var i=t.trim(e),o=i.split(/[\s,]+/),n=[];if(""===i)return[];for(var r=0;r<o.length;r+=2)n.push([o[r],o[r+1]]);return n},stringifyPoints:function(e){var i="";return e.forEach(function(e){i+=e.join(",")+" "}),t.trim(i)}}}),define("layout/specificComponents/svgShape/svgPolylineScaler",["lodash","layout/specificComponents/svgShape/svgBasicScaler","layout/specificComponents/svgShape/svgPolylineParser"],function(e,t,i){"use strict";return{scale:function(o,n,r){var a=i.getParsedPoints(o.getAttribute("points"));return a=e.map(a,function(i){return e.map(i,function(e,i){return t.scaleSingleValue(e,i?r:n)})}),e.isEmpty(a)?{}:{points:i.stringifyPoints(a)}}}}),define("layout/specificComponents/svgShape/svgLineScaler",["layout/specificComponents/svgShape/svgBasicScaler"],function(e){"use strict";return{scale:function(t,i,o){var n=t.getAttribute("x1"),r=t.getAttribute("y1"),a=t.getAttribute("x2"),s=t.getAttribute("y2");return n&&r&&a&&s?{x1:e.scaleSingleValue(n,i),x2:e.scaleSingleValue(a,i),y1:e.scaleSingleValue(r,o),y2:e.scaleSingleValue(s,o)}:{}}}}),define("layout/specificComponents/svgShape/svgScaler",["lodash","layout/specificComponents/svgShape/svgScalerUtils","layout/specificComponents/svgShape/svgPathScaler","layout/specificComponents/svgShape/svgPolygonScaler","layout/specificComponents/svgShape/svgCircleScaler","layout/specificComponents/svgShape/svgRectScaler","layout/specificComponents/svgShape/svgEllipseScaler","layout/specificComponents/svgShape/svgPolylineScaler","layout/specificComponents/svgShape/svgLineScaler"],function(e,t,i,o,n,r,a,s,u){"use strict";function c(c,d,g,h,p,m){var f=d[c+"svg"],y=function(e){var t=window.document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML}(f),w=d[c+"svg-g"]=f.getElementsByTagName("g")[0],v=e.pick(h,["width","height"]),C=e.pick(h,["x","y"]),b={path:i,polygon:o,rect:r,circle:n,ellipse:a,polyline:s,line:u};if(w){var M=function(e,i,o,n){var r=i.width/i.height,a=r>n,s=r<n,u=void 0,c=void 0;return u=e.width?o&&a?i.height*n/e.width:i.width/e.width:1,c=e.height?o&&s?i.width/n/e.height:i.height/e.height:1,{scaleX:t.round(u),scaleY:t.round(c)}}(v,g,m,h.width/h.height),S={scalers:{},style:{},groupTransform:{}},I=function(e){return window.document.createRange().createContextualFragment(e).querySelector("g").querySelectorAll(l.join(","))}(y),T=void 0,x=void 0;return e.forEach(I,function(e,t){T=e.nodeName.toLowerCase(),x=c+"svg"+T+t,S.scalers[x]=b[T].scale(e,M.scaleX,M.scaleY)}),e(w.childNodes).filter(function(t){return function(t){return e.includes(l,t.toLowerCase())}(t.nodeName)}).forEach(function(e,t){T=e.nodeName.toLowerCase(),d[x=c+"svg"+T+t]=e}),S.groupTransform=function(e,t){return{transform:"translate("+parseFloat(-1*t.x+.5*e)+","+parseFloat(-1*t.y+.5*e)+")"}}(p,{x:C.x*M.scaleX,y:C.y*M.scaleY}),S.style={strokeWidth:p,width:Math.ceil(v.width*M.scaleX+p)+"px",height:Math.ceil(v.height*M.scaleY+p)+"px"},S}}var l=["path","polygon","rect","circle","ellipse","polyline","line"];return{measure:c,patch:function(t,i,o){i.css(t+"svg",o.style),i.attr(t+"svg-g",o.groupTransform),e.forEach(o.scalers,function(e,t){i.attr(t,e)}),i.attr(t+"svg",{viewBox:" "})}}}),define("layout/specificComponents/shapeLayout",["lodash","siteUtils","layout/util/layout","layout/util/svgLayoutUtils","layout/specificComponents/svgShape/svgScaler"],function(e,t,i,o,n){"use strict";function r(e,i,r,a){var s=e[i],u=e[i+"svg"],c=a?function(e){var t=e.split(" "),i=_slicedToArray(t,4);return{x:i[0],y:i[1],width:i[2],height:i[3]}}(a):u.getBBox();if(c){var l="stretch"!==s.getAttribute("data-display-mode"),d=parseInt(s.getAttribute("data-strokewidth"),10),g={width:s.offsetWidth,height:s.offsetHeight};return function(e,i){var o=t.svgFeatureDetection.flags().isVectorEffect;return e>0&&!i&&!o}(d,l)?(g.width-=d,g.height-=d,{polyfillScale:n.measure(i,e,g,c,d,l)}):{scale:o.getSvgScaleProps(c,d,g,l)}}}function a(t,i){var o=[],a={};return e.forEach(t,function(e){var t=e.getAttribute("id");i[t]=e,a[t]=function(e,t){if(t[e]){var i=t[e],o=i.getAttribute("data-svg-id"),n=i.querySelector("svg"),a="preserve"===i.getAttribute("data-preserve-viewbox")?i.getAttribute("data-viewbox"):"";return o&&n?(t[e+"svg"]=n,r(t,e,0,a)):void 0}}(t,i),o.push(t)}),function(t){e.forEach(o,function(i){return function(t,i,o){var r=e.get(o,"scale"),a=e.get(o,"polyfillScale");r?(i.css(t+"svg",e.pick(r,["strokeWidth"])),i.attr(t+"svg",e.pick(r,["preserveAspectRatio","viewBox"]))):a&&n.patch(t,i,a)}(i,t,a[i])})}}function s(e,t){if(t[e].getAttribute("data-svg-id"))return a([t[e]],t);return a(t[e].querySelectorAll("*[data-svg-id]"),t)}return i.registerCustomLayoutFunction("wysiwyg.viewer.components.VectorImage",s),i.registerCustomLayoutFunction("wysiwyg.viewer.components.svgshape.SvgShape",s),i.registerCustomLayoutFunction("wysiwyg.viewer.components.PopupCloseIconButton",s),i.registerCustomLayoutFunction("wysiwyg.viewer.components.MediaControls",s),i.registerCustomLayoutFunction("wysiwyg.viewer.components.mobile.TinyMenu",s),i.registerCustomLayoutFunction("wysiwyg.viewer.components.LoginSocialBar",s),{layoutShapeNodes:s}}),define("layout/specificComponents/richtextLayout",["lodash","layout/util/layout"],function(e,t){"use strict";function i(t,i,o){var n=o[t],r=e.has(n.dataset,"minHeight")?e.toNumber(n.dataset.minHeight):void 0,a="true"===n.dataset.packed,s=n.offsetHeight,u=Math.max(r||0,s);i.minHeight[t]=u,!a&&e.isUndefined(r)||(i.height[t]=u)}function o(e,t){t.css(e,{height:""})}var n="wysiwyg.viewer.components.WRichText";return t.registerRequestToMeasureDom(n),t.registerCustomMeasure(n,i),t.registerPatcher(n,o),t.wixapps.registerRequestToMeasureDom(n),t.wixapps.registerCustomMeasure(n,i),t.wixapps.registerPatcher(n,o),{}}),define("layout/specificComponents/matrixGalleryLayout",["layout/util/layout","zepto","lodash","coreUtilsLib","imageClientLib","layout/specificComponents/imageLayout"],function(e,t,i,o,n,r){"use strict";function a(e,o,r,a,s,u,c){var h=t(u),p=h.data("image-index"),m=i.defaults({displayMode:n.fittingTypes.SCALE_TO_FILL},s[p]),f=function(e,t,i,o,n){return g.getSizeAfterScaling({itemHeight:t,itemWidth:i,displayerData:e,imageMode:o.imageMode,heightDiff:parseInt(n.data("height-diff"),10)||0,widthDiff:parseInt(n.data("width-diff"),10)||0,bottomGap:parseInt(n.data("bottom-gap"),10)||0})}(m,r,o,a,h),y=d.getContainerSize(f.imageWrapperSize,h),w=l.getItemPosition(c,o,r,a.margin,a.numCols);return{id:u.id,imageData:m,imageNodeId:u.id+"image",imageWrapperId:u.id+"imageWrapper",containerSize:y,sizeAfterScaling:f,position:w}}function s(e,o,n,r,s){d.measureFlexibleHeightGallery(e,o,n);var u=t(n[e]),c=n[e+"itemsContainer"],g=t(c).children(),m=s.dataItem.items;o.width[e]=Math.max(p,o.width[e]),o.height[e]=Math.max(h,o.height[e]);var f=parseInt(u.data("height-diff"),10)||0,y=parseInt(u.data("width-diff"),10)||0,w=parseInt(u.data("presented-row"),10)||0,v=s.propertiesItem,C=l.getItemWidth(v.margin,v.numCols,o.width[e],y),b=l.getItemHeight(v.margin,o.height[e],w,f);o.custom[e]={displayers:i.map(g,i.partial(a,e,C,b,s.propertiesItem,m))}}function u(e,t,o,n,a){var s=o.height[e],u=o.width[e],c=o.custom[e];t.css(e+"itemsContainer",{height:s,width:u}),t.css(e,{height:s,width:u}),i.forEach(c.displayers,function(e){var i=e.sizeAfterScaling;t.css(e.id,{height:i.displayerSize.height,width:i.displayerSize.width,left:e.position.left,top:e.position.top}),d.updateImageWrapperSizes(t,e.imageWrapperId,i),r.patchNodeImage(e.imageNodeId,t,o,a,e.imageData,e.containerSize)})}function c(e,t,o){var n=[["itemsContainer"]];return i.forEach(o.dataItem.items,function(e){var t={pathArray:[e.id,"image"],type:"core.components.Image"},i=[e.id,"imageWrapper"],o=[e.id];n.push(t,i,o)}),n}var l=o.matrix.calculations,d=o.galleriesCommonLayout,g=o.matrix.scalingCalculations,h=70,p=45;return e.registerRequestToMeasureDom("wysiwyg.viewer.components.MatrixGallery"),e.registerCustomMeasure("wysiwyg.viewer.components.MatrixGallery",s),e.registerRequestToMeasureChildren("wysiwyg.viewer.components.MatrixGallery",c),e.registerPatcher("wysiwyg.viewer.components.MatrixGallery",u),e.wixapps.registerRequestToMeasureDom("wysiwyg.viewer.components.MatrixGallery"),e.wixapps.registerCustomMeasure("wysiwyg.viewer.components.MatrixGallery",s),e.wixapps.registerRequestToMeasureChildren("wysiwyg.viewer.components.MatrixGallery",c),e.wixapps.registerPatcher("wysiwyg.viewer.components.MatrixGallery",u),{}}),define("layout/specificComponents/slideShowLayout",["layout/util/layout","zepto","coreUtilsLib","imageClientLib","lodash","layout/specificComponents/imageLayout"],function(e,t,i,o,n,r){"use strict";function a(e,i,r,a,s,u){var c=t(u),g=c.data("image-index"),h=n.defaults({displayMode:o.fittingTypes.SCALE_TO_FILL},s[g]),p=function(e,i,o,n,r){var a=t(r);return l.getSizeAfterScaling({itemHeight:i,itemWidth:o,displayerData:e,imageMode:n.imageMode,heightDiff:parseInt(a.data("height-diff"),10)||0,widthDiff:parseInt(a.data("width-diff"),10)||0,bottomGap:parseInt(a.data("bottom-gap"),10)||0})}(h,i,r,a,c),m=d.getContainerSize(p.imageWrapperSize,c);return{id:u.id,imageData:h,imageNodeId:u.id+"image",imageWrapperId:u.id+"imageWrapper",containerSize:m,sizeAfterScaling:p}}function s(e,i,o,r,s){d.measureFlexibleHeightGallery(e,i,o);var u=o[e+"itemsContainer"],c=t(u).children(),l=t(o[e]),g=i.height[e]-parseInt(l.data("height-diff"),10)||0,h=i.width[e]-parseInt(l.data("height-diff"),10)||0,p=s.dataItem.items;i.custom[e]={displayers:n.map(c,n.partial(a,e,g,h,s.propertiesItem,p))}}function u(e,t,i,o,a){var s=o.propertiesItem,u=i.height[e],c=i.width[e],l=a.isMobileDevice()||a.isMobileView(),g=i.custom[e].displayers;if(!n.isEmpty(g)){if("flexibleHeight"===s.imageMode){var h=n.last(g);u=h.sizeAfterScaling.displayerSize.height}t.css(e,{height:u,width:c}),n.forEach(g,function(e){t.css(e.id,{height:u,width:c}),d.updateImageWrapperSizes(t,e.imageWrapperId,e.sizeAfterScaling),r.patchNodeImage(e.imageNodeId,t,i,a,e.imageData,e.containerSize,l)})}}function c(e,t,i){var o=[["itemsContainer"]];return n.forEach(i.dataItem.items,function(e){var t={pathArray:[e.id,"image"],type:"core.components.Image"},i=[e.id,"imageWrapper"],n=[e.id];o.push(t,i,n)}),o}var l=i.matrix.scalingCalculations,d=i.galleriesCommonLayout;return e.registerRequestToMeasureDom("wysiwyg.viewer.components.SlideShowGallery"),e.registerCustomMeasure("wysiwyg.viewer.components.SlideShowGallery",s),e.registerRequestToMeasureChildren("wysiwyg.viewer.components.SlideShowGallery",c),e.registerPatcher("wysiwyg.viewer.components.SlideShowGallery",u),e.wixapps.registerRequestToMeasureDom("wysiwyg.viewer.components.SlideShowGallery"),e.wixapps.registerCustomMeasure("wysiwyg.viewer.components.SlideShowGallery",s),e.wixapps.registerRequestToMeasureChildren("wysiwyg.viewer.components.SlideShowGallery",c),e.wixapps.registerPatcher("wysiwyg.viewer.components.SlideShowGallery",u),{}}),define("layout/specificComponents/tinyMenuLayout",["zepto","layout/util/layout","coreUtils","experiment","layout/util/rootLayoutUtils","lodash","layout/specificComponents/memberLoginSectionLayout"],function(e,t,i,o,n,r,a){"use strict";function s(e){return r.get(e,"dataItem.loginSocialBarRef")}function u(e,t,i){return t[e+f]&&s(i)}function c(e,t,i,u,c){var l=e+d,h=n.getRootWidth(c,i,u.rootId)-2*y,v=r.get(i.custom.SITE_HEADER,"isFixedPosition"),C=u.layout.fixedPosition,b=r.get(i,["height","WIX_ADStop"],0);!function(e,t,i,o,n){var r=e+f;i.custom[e].isOpen&&i.width[r]&&s(o)&&a.patch(e,t,i,o,n,f)}(e,t,i,u,c);var M=0;o.isOpen("sv_fixedMobileHeader")?!v&&C&&(M=b):M=C?b:0,t.css(e+g,{marginTop:M+"px"});if(r.get(u,["styleItem","skin"],w)===w)t.css(l,{maxHeight:(C?i.clientHeight-b:i.height.masterPage)-r.get(i,["custom",e,"menuContainerTop"],0),width:h+"px"});else{var S=i.height[e+p]-i.top[l];t.css(l,{paddingTop:b+"px",maxHeight:S+"px"}),t.css(e+m,{height:i.height.screen+1+"px"})}}function l(t,o,n,s,c){var l=t+d,m=e("#SITE_ROOT")[0],y=i.domMeasurements.getElementRect(n[t],m);r.set(o.custom,["SITE_HEADER","isFixedPosition"].join("."),"fixed"===e("#SITE_HEADER").css("position")),o.custom[t]={menuContainerTop:y.bottom},o.top[l]=i.domMeasurements.getBoundingRect(n[l]).top,n[t+p]&&(o.height[t+p]=i.domMeasurements.getElementRect(n[t+p]).height),o.height[t]=o.height[t+g];var w=/menuOpen/.test(n[t+g].className);if(o.custom[t].isOpen=w,w){var v=i.domMeasurements.getElementRect(n[t+h],m);o.minHeight.masterPage=Math.max(o.minHeight.masterPage||0,v.bottom),function(e,t,i,o,n){u(e,i,n)&&a.measure(e,t,i,o,n,f)}(t,o,n,s,c)}}var d="menuContainer",g="menuButton",h="menuItems",p="menuBackground",m="fullScreenOverlay",f="tinyMenuMemberSection",y=20,w="wysiwyg.viewer.skins.mobile.TinyMenuSkin";t.registerRequestToMeasureChildren("wysiwyg.viewer.components.mobile.TinyMenu",function(e,t,i,o){var n=[[d],[g],[h],[m],[p]],r=e+f;if(t[r]=t[e].querySelector("#"+r),u(e,t,i)){n.push({pathArray:[f],type:"wysiwyg.viewer.components.mobile.TinyMenuMemberSection"});var s=a.getChildrenIdToMeasure(o,r,t,i,f);n=n.concat(s)}return n}),t.registerCustomMeasure("wysiwyg.viewer.components.mobile.TinyMenu",l),t.registerPatcher("wysiwyg.viewer.components.mobile.TinyMenu",c)}),define("layout/specificComponents/imageZoomLayout",["lodash","zepto","layout/util/layout","layout/specificComponents/imageLayout","imageClientLib","coreUtilsLib"],function(e,t,i,o,n,r){"use strict";function a(e){return e.dataItem||e.structure.compData}function s(e,t){return e.getNonPageItemZoomData()||e.getDataByQuery(t)}function u(e){var t=e.getNonPageItemZoomData();return e.getExistingRootNavigationInfo(e.getFocusedRootId()).pageItemId||t&&t.id}function c(t,i,r,a,c){var l=u(c),d=!c.isMobileView()&&c.isMobileDevice()||c.isTabletDevice(),g=s(c,l),h=e.defaults({displayMode:n.fittingTypes.LEGACY_FULL},g);h.quality=e.defaults({quality:90},h.quality||{});var p=r.custom[t],m={width:p.imageContainerWidth,height:p.imageContainerHeight};if(o.patchNodeImage(t+l+"image",i,r,c,h,m),r.custom[t].hasPanel){var f=d?p.dialogBoxWidth:m.width;i.css(t+g.id+"panel",{width:f})}}function l(e,i,o,n){var r=u(n),a=s(n,r),c=!n.isMobileView()&&n.isMobileDevice()||n.isTabletDevice()?h.getNonOptimizedViewDimensions:h.getDesktopViewDimensions,l=t(o[e]),g=function(e){var t=d(e,"padding-bottom")+d(e,"padding-top");return{horizontal:d(e,"padding-right")+d(e,"padding-left"),vertical:t}}(t(o[e+"dialogBox"])),p=e+r+"panel",m={width:parseInt(l.data("width-spacer"),10),height:parseInt(l.data("height-spacer"),10)},f={isMobileDevice:n.isMobileDevice(),isTabletDevice:n.isTabletDevice(),siteWidth:n.getSiteWidth()},y={width:i.width.screen,height:i.height.screen,innerHeight:i.innerHeight.screen};i.custom[e]=c(a,f,y,m,i.height[p],g),i.custom[e].hasPanel=Boolean(o[p])}function d(e,t){return e&&t?parseInt(e.css(t),10)||0:0}function g(e,i,o,n,r){var a=u(n),c=s(n,a),l=h.getMobileViewDimensions(c,n,i);!function(e,i){var o=t(i);if("none"!==o.css("display")){var n=parseInt(o.css("line-height"),10);e.showDescription=!0,e.descriptionHeight=o.height(),e.descriptionHeightLimit=Math.floor(3*n)}}(l,o[e+a+"description"]),l.isMobileZoom=r,i.custom[e]=l}var h=r.mediaZoomCalculations;i.registerCustomMeasure("wysiwyg.components.imageZoom",function(e,t,i,o,n){var r=a(n).id;(o.isMobileView()?g:l)(e+r,t,i,o)}),i.registerPatcher("wysiwyg.components.imageZoom",function(e,t,i,o,n){var r=a(o).id;(n.isMobileView()?function(e,t,i,o,n){var r=i.custom[e];t.css(e+"dialogBox",{width:r.imageContainerWidth,minHeight:r.dialogBoxHeight,paddingTop:r.paddingTop}),c(e,t,i,0,n);var a=u(n);if(r.showDescription&&r.descriptionHeight>r.descriptionHeightLimit){var s=e+a+"description";t.css(s,{height:r.descriptionHeightLimit}),t.data(s,{expandable:"true"}),t.css(s,{height:r.descriptionHeightLimit}),t.css(e+a+"ellipsis",{display:""})}}:c)(e+r,t,i,o,n)}),i.registerRequestToMeasureChildren("wysiwyg.components.imageZoom",function(e,t,i,o){var n=a(i).id,r=u(o),s={pathArray:[n,r,"image"],type:"core.components.Image"};return o.isMobileView()?[[n],s,[n,"dialogBox"],[n,r,"description"],[n,r,"ellipsis"]]:[[n],s,[n,"dialogBox"],[n,"buttonPrev"],[n,"buttonNext"],[n,r,"panel"]]})}),define("layout/specificComponents/tpaGalleryLayout",["lodash","layout/util/layout","layout/util/calculateScreenWidthDimensions"],function(e,t,i){"use strict";function o(e,t,o,n,r){!function(e,t,o,n,r){var a=i(o,n,r.rootId);t.css(e,{width:a.width+"px",left:a.left+"px"}),t.css(e+"iframe",{width:a.width+"px"}),o.width[e]=a.width,o.left[e]=a.left}(e,t,o,r,n)}t.registerPatcher("tpa.viewer.components.StripShowcase",o),t.registerPatcher("tpa.viewer.components.StripSlideshow",o),t.registerPatcher("tpa.viewer.components.Collage",function(e,t,i){t.css(e+"iframe",{width:i.width[e]})}),t.registerCustomMeasure("tpa.viewer.components.Collage",function(e,t,o,n,r){var a=r.propertiesItem,s=o[e];if(t.height[e]=s.offsetHeight,t.width[e]=s.offsetWidth,a.fitToScreenWidth){var u=i(t,n,r.rootId);s.style.width=u.width+"px",s.style.left=u.left+"px",t.width[e]=u.width,t.left[e]=u.left}}),t.registerRequestToMeasureChildren("tpa.viewer.components.Collage",[["iframe"]]),t.registerRequestToMeasureChildren("tpa.viewer.components.StripSlideshow",[["iframe"]]),t.registerRequestToMeasureChildren("tpa.viewer.components.StripShowcase",[["iframe"]])}),define("layout/specificComponents/wFacebookCommentLayout",["layout/util/layout","zepto"],function(e,t){"use strict";e.registerCustomMeasure("wysiwyg.viewer.components.WFacebookComment",function(e,i,o){var n=t(o[e]).find("iframe")[0];n&&(i.height[e]=Math.max(i.height[e],n.offsetHeight))})}),define("layout/specificComponents/formMixinLayout",["layout/util/layout"],function(e){"use strict";function t(e,t,i){!function(e,t){var i=t.height[e+"wrapper"];i&&(t.height[e]=i)}(e,t);t.width[e]=Math.max(t.width[e],180),t.minWidth[e]=180}["wysiwyg.viewer.components.ContactForm","wysiwyg.viewer.components.DynamicContactForm"].forEach(function(i){e.registerCustomMeasure(i,t),e.registerRequestToMeasureChildren(i,[["wrapper"]]),e.registerPatcher(i,function(e,t,i){t.attr(e,{"data-dcf-columns":function(e){return e<240?1:e<365?2:e<490?3:4}(i.width[e])})})}),e.registerRequestToMeasureDom("wysiwyg.common.components.subscribeform.viewer.SubscribeForm"),e.registerRequestToMeasureChildren("wysiwyg.common.components.subscribeform.viewer.SubscribeForm",[["wrapper"]]),e.registerCustomMeasure("wysiwyg.common.components.subscribeform.viewer.SubscribeForm",function(e,t){var i=t.height[e+"wrapper"];i&&(t.height[e]=i)})}),define("layout/specificComponents/wixSiteLayout",["zepto","layout/util/layout"],function(e,t){"use strict";function i(e){return e.isTabletDevice()&&function(e){return"WixSite"===e.rendererModel.siteInfo.documentType}(e)}function o(t,i){n=n||function(){var t=e("<div>").css({visibility:"hidden",width:100,overflow:"scroll"}).appendTo("body"),i=e("<div>").css({width:"100%"}).appendTo(t).width();return t.remove(),100-i}();var o=window.document.body.clientWidth,r=window.innerWidth,a=o;r>o+n&&(a=r),t.body=window.document.body,i.width.body=a}var n=void 0;t.registerCustomMeasure("mobile.core.components.MasterPage",function(e,t,n,r){i(r)&&o(n,t)}),t.registerPatcher("mobile.core.components.MasterPage",function(e,t,o,n,r){i(r)&&function(e,t){e.css("body",{width:t.width.body})}(t,o)})}),define("layout/specificComponents/fitToContentLayout",["lodash","layout/util/layout"],function(e,t){"use strict";function i(e,t){t.css(e,{width:"",height:""})}var o=function(e,t){t.css(e,{height:""})};return t.registerPatcher("wysiwyg.viewer.components.PinterestFollow",i),t.registerPatcher("wysiwyg.viewer.components.PayPalButton",i),t.registerPatcher("platform.components.AppController",i),t.registerPatcher("wysiwyg.viewer.components.inputs.RadioGroup",o),t.registerPatcher("wysiwyg.viewer.components.LoginButton",o),t.registerPatcher("wysiwyg.viewer.components.LoginButton",o),t.registerPatcher("wixui.Pagination",o),{}}),define("layout/wixappsLayout/proxyLayout/util/masonryCalculations",["lodash"],function(e){"use strict";return{getColumnSidePadding:function(e,t,i,o){var n="rtl"===o,r=Math.floor(i/t),a=e*r,s=(t-1-e)*r;return{right:n?a:s,left:n?s:a}},getMasonryRowsAndColumns:function(t,i){for(var o=[],n=[],r=[],a=0;a<i;a++)n.push(0),r.push(0);for(var s=0;s<t.length;s++){var u=e.indexOf(n,e.min(n));o.push({col:u,row:r[u],topOffset:n[u]}),n[u]+=t[s],r[u]++}return o}}}),define("layout/wixappsLayout/proxyLayout/paginatedColumnGalleryProxyLayout",["zepto","lodash","layout/wixappsLayout/proxyLayoutRegistrar","layout/wixappsLayout/proxyLayout/util/masonryCalculations"],function(e,t,i,o){"use strict";function n(i){var n=function(e){return t.map(e.childNodes,"clientHeight")}(i),r=function(t){return{columns:parseInt(e(t).attr("data-columns"),10),direction:e(t).attr("data-direction"),horizontalGap:parseInt(e(t).attr("data-horizontal-gap"),10),verticalGap:parseInt(e(t).attr("data-vertical-gap"),10)}}(i),a=i.childNodes,s=o.getMasonryRowsAndColumns(n,r.columns),u=Math.floor(i.clientWidth/r.columns),c={domManipulations:[],needsRelayout:!0},l=c.domManipulations,d=[];t.forEach(a,function(e,t){var i=s[t],n=i.row*r.verticalGap+i.topOffset,a=o.getColumnSidePadding(i.col,r.columns,r.horizontalGap,r.direction),c=i.col*u;d.push(n);var g={position:"absolute",top:n+"px","padding-right":a.right+"px","padding-left":a.left+"px"};"rtl"===r.direction?g.right=c+"px":g.left=c+"px",l[t]={node:e,funcName:"css",params:g}});var g=t(a).map(function(e,t){return d[t]+n[t]}).max();return l.push({node:i,funcName:"css",params:{height:g+"px"}}),c}i.registerCustomMeasure("PaginatedColumnGalleryProxy",n)}),define("layout/wixappsLayout/proxyLayout/galleryProxyLayout",["zepto","lodash","layout/wixappsLayout/proxyLayoutRegistrar"],function(e,t,i){"use strict";i.registerCustomMeasure("GalleryProxy",function(i,o,n){var r=i.id+"itemsContainer",a=e("#"+r),s=e(i),u=Number(s.attr("data-total-columns")),c=Number(s.attr("data-total-rows")),l=Number(s.attr("data-gap")),d=s.data("autoscale"),g=[],h=a.children();if(h.length){var p=h[0],m=p.offsetWidth,f=p.offsetHeight;g=t.map(h,function(t){var i=parseInt(e(t).attr("data-index"),10),o=Math.floor(i/u)%c,n=i%u;return{node:t,funcName:"css",params:{top:o*f+o*l,left:n*m+n*l}}})}return function(e,t,i){var o=i+"itemsContainer";t.height[o]=e.offsetHeight,t.width[o]=e.offsetWidth,t.height[i]=e.offsetHeight,t.width[i]=e.offsetWidth}(d?i.parentNode:i,n,i.id),{domManipulations:g}})}),define("layout/wixappsLayout/proxyLayout/imageProxyLayout",["zepto","lodash","layout/wixappsLayout/proxyLayoutRegistrar"],function(e,t,i){"use strict";i.registerCustomMeasure("Image",function(t,i,o){var n=e(t),r=t.firstChild.id,a={width:parseInt(n.attr("data-width"),10),height:parseInt(n.attr("data-height"),10),uri:n.attr("data-uri"),quality:i.getGlobalImageQuality()},s={displayMode:n.attr("data-display-mode")};return o.width[r]=t.offsetWidth,o.height[r]=t.offsetHeight,o.custom[r]={thisIsMyHeight:o.height[r]},{comp:{compType:"wysiwyg.viewer.components.WPhoto",compId:r,structureInfo:{dataItem:a,propertiesItem:s,layout:null,styleItem:null}},domManipulations:[]}})}),define("layout/wixappsLayout/proxyLayout/buttonProxyLayout",["layout/wixappsLayout/proxyLayoutRegistrar"],function(e){"use strict";function t(e,t,i){var o=e.id;return i.width[o]=e.offsetWidth,i.height[o]=e.offsetHeight,{comp:{compType:"wysiwyg.viewer.components.SiteButton",compId:o,structureInfo:{dataItem:null,propertiesItem:null,layout:null,styleItem:null}},domManipulations:[]}}e.registerCustomMeasure("Button",t),e.registerCustomMeasure("Button2",t)}),define("layout/wixappsLayout/proxyLayout/mediaLabelProxyLayout",["layout/wixappsLayout/proxyLayoutRegistrar"],function(e){"use strict";e.registerCustomMeasure("MediaLabel",function(e,t,i){var o=e.id;return i.width[o]=e.offsetWidth,i.height[o]=e.offsetHeight,{comp:{compType:"wysiwyg.viewer.components.MediaRichText",compId:o,structureInfo:{dataItem:null,propertiesItem:null,layout:null,styleItem:null}},domManipulations:[]}})}),define("layout/wixappsLayout/proxyLayout/sliderGalleryProxyLayout",["zepto","layout/wixappsLayout/proxyLayoutRegistrar"],function(e,t){"use strict";t.registerCustomMeasure("SliderGallery",function(t,i,o){var n=e(t),r=t.firstChild.id,a={aspectRatio:n.attr("data-aspect-ratio"),imageMode:n.attr("data-image-mode")};return o.width[r]=t.offsetWidth,o.height[r]=t.offsetHeight,{comp:{compType:"wysiwyg.viewer.components.SliderGallery",compId:r,structureInfo:{dataItem:null,propertiesItem:a,layout:null,styleItem:null}},domManipulations:[]}})}),define("layout/specificComponents/imageButtonLayout",["lodash","layout/util/layout","layout/specificComponents/imageLayout","imageClientLib"],function(e,t,i,o){"use strict";function n(t,n,a,s,u){var c=function(e,t){return{width:t.width[e],height:t.height[e]}}(t,a);e.forEach(r,function(r){!function(t,n,r,a,s,u,c){var l=s.dataItem[t];if(l){var d=n+t,g=e.defaults({displayMode:o.fittingTypes.LEGACY_FULL},l);i.patchNodeImage(d,r,a,u,g,c)}}(r,t,n,a,s,u,c)});var l=t+"link";n.css(l,{width:c.width,height:c.height})}var r=["defaultImage","hoverImage","activeImage"];t.registerRequestToMeasureDom("wysiwyg.common.components.imagebutton.viewer.ImageButton"),t.registerRequestToMeasureChildren("wysiwyg.common.components.imagebutton.viewer.ImageButton",function(){var t=e.map(r,function(e){return{pathArray:[e],type:"core.components.Image"}});return t.push(["link"]),t}()),t.registerPatcher("wysiwyg.common.components.imagebutton.viewer.ImageButton",n)}),define("layout/specificComponents/mediaRichTextLayout",["layout/util/layout","zepto","lodash"],function(e,t,i){"use strict";function o(){var e=i.toArray(arguments);return window.document.getElementById(e.join(""))}e.wixapps.registerRequestToMeasureDom("wysiwyg.viewer.components.MediaRichText"),e.wixapps.registerCustomMeasure("wysiwyg.viewer.components.MediaRichText",function(n,r,a,s){var u=t(a[n]);r.custom[n]={prevWidth:u.data("width")};var c=s.getMediaRichTextInnerComponents(n),l=i.mapValues(c,"structureInfo");i.forEach(l,function(t){e.wixapps.measureMediaRichTextInnerComponent(t,o,r,a,s,t.structure)})}),e.wixapps.registerPatcher("wysiwyg.viewer.components.MediaRichText",function(t,o,n,r,a){var s=n.custom[t].prevWidth,u=parseInt(n.width[t],10),c=a.getMediaRichTextInnerComponents(t),l=i.mapValues(c,"structureInfo");return i.forEach(l,function(t){e.wixapps.patchWithoutPositioning(t,o,n,a)}),s&&parseInt(s,10)===u?(o.css(t,{height:""}),!1):(o.data(t,{width:u}),!0)})}),define("layout/specificComponents/backToTopButtonLayout",["layout/util/layout","zepto"],function(e,t){"use strict";e.registerRequestToMeasureChildren("wysiwyg.common.components.backtotopbutton.viewer.BackToTopButton",[["bg"]]),e.registerCustomMeasure("wysiwyg.common.components.backtotopbutton.viewer.BackToTopButton",function(e,i){i.custom[e]={siteStructureLeft:t("#masterPage")[0].getBoundingClientRect().left}}),e.registerPatcher("wysiwyg.common.components.backtotopbutton.viewer.BackToTopButton",function(e,t,i,o,n){var r=e+"bg",a=n.mobile.getMobileZoomByScreenProperties();t.css(e,{zoom:a}),t.css(r,{right:i.custom[e].siteStructureLeft})})}),define("layout/specificComponents/appPartZoomLayout",["lodash","layout/util/layout","layout/specificComponents/wixappsLayout"],function(e,t,i){"use strict";function o(e){return e.appPartName?e.id:e.dataItemRef.id}function n(e,t){return e+t.id+o(t)}function r(t,i){var o=e.has(t,"dataItemRef")?t.dataItemRef.appInnerID:t.appInnerID;return!!i.getClientSpecMapEntry(o)}t.registerRequestToMeasureChildren("wixapps.integration.components.AppPartZoom",function(e,t,n,a){if(!r(n.dataItem,a))return null;var s=o(n.dataItem),u=n.dataItem.id;return[[u,s],[u,s,i.inlineContentId]]}),t.registerCustomMeasure("wixapps.integration.components.AppPartZoom",function(e,t,o,a,s){if(!r(s.dataItem,a))return null;var u=n(e,s.dataItem);i.appPartMeasureFunction(u,t,o,a),t.custom[e]={marginTop:Math.max((t.height.screen-t.height[u])/2,0),height:t.height[u]}}),t.registerPatcher("wixapps.integration.components.AppPartZoom",function(e,t,i,o,a){if(r(o.dataItem,a)){var s=n(e,o.dataItem);a.isMobileView()&&(function(e,t,i,o){var n=Math.max(o.height[t],o.height.screen);i.css(e,{height:n})}(e,s,t,i),function(e,t,i){var o=e+"inlineContent",n=Math.max(i.height[e],i.height.screen);t.css(o,{height:n})}(s,t,i))}}),t.registerLayoutInnerCompsFirst("wixapps.integration.components.AppPartZoom",function(e,t,o,a,s){if(!r(e.dataItem,s))return null;var u=n(e.id,e.dataItem),c={id:u},l=window.document.getElementById(u),d={};return d[e.id]=!0,{needsAdditionalInnerLayout:i.preMeasureProxies(c,l,o,a,s),changedCompsMap:d}},function(e,t,o,a,s){if(!r(e.dataItem,s))return null;var u={id:n(e.id,e.dataItem)};return i.postPatchProxies(u,t,o,a,s)})}),define("layout/specificComponents/facebookShareLayout",["layout/util/layout"],function(e){"use strict";e.registerCustomMeasure("wysiwyg.viewer.components.FacebookShare",function(e,t,i){var o=i[e].children[0];o&&(t.height[e]=o.offsetHeight,t.width[e]=o.offsetWidth)}),e.registerPatcher("wysiwyg.viewer.components.FacebookShare",function(e,t,i){var o=i.width[e],n=i.height[e];t.css(e,{width:o,height:n})}),e.registerRequestToMeasureDom("wysiwyg.viewer.components.FacebookShare")}),define("layout/specificComponents/paginatedGridGalleryLayout",["layout/util/layout","zepto","lodash","coreUtilsLib","imageClientLib","layout/specificComponents/imageLayout"],function(e,t,i,o,n,r){"use strict";function a(e,t,o,a,s,u,c,l,g){i.forEach(e,function(e,l){var h=d.getItemPosition(l,t,o,a.margin,a.numCols);u.css(e.imageItemId,{width:t,height:o,left:h.left,top:h.top});var p=i.assign({},g.dataItem.items[e.imageIndex],{displayMode:n.fittingTypes.SCALE_TO_FILL});r.patchNodeImage(e.imageItemId,u,c,s,p,{width:t,height:o})})}function s(e,t,o){var n=[["itemsContainer"]];return i.forEach(o.dataItem.items,function(e){n.push({pathArray:[e.id],type:"core.components.Image"})}),n}function u(e){return i.map(e,function(e){return{imageItemId:e.id,imageIndex:t(e).data("image-index")}})}function c(e,i,o){var n=i.custom[e]={},r=t(o[e]);n.heightDiff=parseInt(r.data("height-diff"),10),n.widthDiff=parseInt(r.data("width-diff"),10);var a=t(o[e+"itemsContainer"]);n.nextItemsData=u(a.children('div[data-page-desc="next"]')),n.prevItemsData=u(a.children('div[data-page-desc="prev"]')),n.currItemsData=u(a.children('div[data-page-desc="curr"]'))}function l(e,t,i,o,n){var r=i.height[e],s=i.width[e],u=i.custom[e],c=o.propertiesItem;t.css(e+"itemsContainer",{width:s-u.widthDiff,height:r-u.heightDiff});var l=d.getItemWidth(c.margin,c.numCols,s,u.widthDiff),g=d.getAvailableRowsNumber(c.maxRows,c.numCols,o.dataItem.items.length),h=d.getItemHeight(c.margin,r,g,u.heightDiff);a(u.nextItemsData,l,h,c,n,t,i,0,o),a(u.prevItemsData,l,h,c,n,t,i,0,o),a(u.currItemsData,l,h,c,n,t,i,0,o)}var d=o.matrix.calculations;return e.registerPatcher("wysiwyg.viewer.components.PaginatedGridGallery",l),e.registerRequestToMeasureChildren("wysiwyg.viewer.components.PaginatedGridGallery",s),e.registerCustomMeasure("wysiwyg.viewer.components.PaginatedGridGallery",c),e.wixapps.registerPatcher("wysiwyg.viewer.components.PaginatedGridGallery",l),e.wixapps.registerRequestToMeasureChildren("wysiwyg.viewer.components.PaginatedGridGallery",s),e.wixapps.registerCustomMeasure("wysiwyg.viewer.components.PaginatedGridGallery",c),{}}),define("layout/specificComponents/PinterestFollowLayout",["layout/util/layout"],function(e){"use strict";return e.registerRequestToMeasureChildren("wysiwyg.viewer.components.PinterestFollow",[["followButtonTag"]]),{}}),define("layout/specificComponents/boxSlideShowLayout",["lodash","zepto","coreUtils","layout/util/layout","layout/specificComponents/balataLayout"],function(e,t,i,o,n){"use strict";var r=50,a=i.balataConsts;o.registerCustomMeasure("wysiwyg.viewer.components.BoxSlideShow",function(e,t){t.height[e]=Math.max(r,t.height[e]),t.minHeight[e]=r}),o.registerCustomMeasure("wysiwyg.viewer.components.BoxSlideShowSlide",function(e,i,o,r,s){i.top[e]=0,i.left[e]=0;var u=t(o[e]),c=u.data("parent-id");if(i.minHeight[e]=u.data("min-height"),i.height[e]=i.height[c],s.designDataItem.background){var l=e+a.BALATA;i.width[l]=i.width[e],i.height[l]=i.height[e],i.left[l]=i.left[e];var d=o[e].getBoundingClientRect();i.custom[e]={absoluteLeft:d.left},n.measure(e,i,o,r,s)}}),o.registerRequestToMeasureDom("wysiwyg.viewer.components.BoxSlideShow"),o.registerRequestToMeasureDom("wysiwyg.viewer.components.BoxSlideShowSlide"),o.registerRequestToMeasureChildren("wysiwyg.viewer.components.BoxSlideShowSlide",[["inlineContentParent"],["inlineContent"]].concat(n.BALATA_PATHS_TO_REQUEST_MEASURE)),o.registerPatcher("wysiwyg.viewer.components.BoxSlideShowSlide",function(t,i,o,r,a){if(r.designDataItem.background){var s={top:o.top[t],left:o.left[t],width:o.width[t],height:o.height[t],absoluteLeft:e.get(o.custom[t],"absoluteLeft",0)};n.patch(t,i,o,r,a,s)}})}),define("layout/specificComponents/mediaContainerLayout",["lodash","layout/util/layout","layout/specificComponents/balataLayout"],function(e,t,i){"use strict";function o(t,o,n,a,s){if(s.designDataItem.background){i.measure(t,o,n,a,s);var u=t+r,c=window.getComputedStyle(n[u]),l=parseInt(c.getPropertyValue("border-left-width"),10);e.isUndefined(o.borderWidth)&&(o.borderWidth={}),o.borderWidth[t]=l,o.width[t]=s.layout.width||n[t].clientWidth||o.width[t]}}function n(e,t,o,n,a){if(n.designDataItem.background){t.css(e+r,{left:-o.borderWidth[e],top:-o.borderWidth[e]});var s={top:0,left:0,width:o.width[e],height:o.height[e],absoluteLeft:o.absoluteLeft[e]};i.patch(e,t,o,n,a,s)}}var r="container";e.forEach(["wysiwyg.viewer.components.HoverBox","wysiwyg.viewer.components.MediaPlayer","wysiwyg.viewer.components.MediaContainer"],function(e){t.registerCustomMeasure(e,o),t.registerRequestToMeasureChildren(e,i.BALATA_PATHS_TO_REQUEST_MEASURE.concat([[r]])),t.registerPatcher(e,n)})}),define("layout/util/elementQueries",["lodash"],function(e){"use strict";return function(t,i,o){var n="data-element-query-",r={};return e.forEach(o,function(o,a){var s=e.get(i,[a,t]);s&&(r[n+a]="",e.forEach(o,function(e){e.min<s&&e.max>s&&(r[n+a]&&(r[n+a]+=" "),r[n+a]+=e.name)}))}),r}}),define("layout/specificComponents/mediaControlsLayout",["lodash","layout/util/layout","layout/util/elementQueries"],function(e,t,i){"use strict";var o={width:[{min:0,max:350,name:"minimal"},{min:0,max:450,name:"small"},{min:450,max:1200,name:"normal"},{min:1200,max:1/0,name:"large"}]};t.registerPatcher("wysiwyg.viewer.components.MediaControls",function(e,t,n){t.attr(e,i(e,n,o))})}),define("layout/specificComponents/mediaOverlayControlsLayout",["lodash","layout/util/layout","layout/specificComponents/shapeLayout"],function(e,t,i){"use strict";t.registerCustomLayoutFunction("wysiwyg.viewer.components.MediaOverlayControls",function(e,t){var o=e+"catcher",n=t[e].getAttribute("data-player-id");t[o]=t[e].querySelector("#"+o);var r=-t[e].offsetTop,a=-t[e].offsetLeft,s=t[n].offsetWidth,u=t[n].offsetHeight,c=i.layoutShapeNodes(e,t);return function(e){e.css(o,{top:r,left:a,width:s,height:u}),c(e)}})}),define("layout/specificComponents/verticalAnchorsMenuLayout",["zepto","lodash","layout/util/layout"],function(e,t,i){"use strict";i.registerCustomMeasure("wysiwyg.common.components.verticalanchorsmenu.viewer.VerticalAnchorsMenu",function(i,o,n){var r=e(n[i]),a=r.find("[class*=link]"),s=r.find("[class*=label]"),u=r.find("[class*=symbol]"),c=a.length,l=u.width(),d=Math.ceil(a.height()*c),g=0;t.forEach(s,function(t){g=Math.max(g,e(t).width())});var h=g+l;o.width[i]=Math.max(o.width[i],h),o.height[i]=Math.max(o.height[i],d),o.custom[i]={minHeight:d,minWidth:h}}),i.registerPatcher("wysiwyg.common.components.verticalanchorsmenu.viewer.VerticalAnchorsMenu",function(e,t,i){t.css(e,{width:i.width[e],height:i.height[e]})})}),define("layout/specificComponents/columnsLayout",["lodash","coreUtils","layout/util/layout","layout/specificComponents/balataLayout"],function(e,t,i,o){"use strict";var n=t.balataConsts;i.registerRequestToMeasureChildren("wysiwyg.viewer.components.StripColumnsContainer",o.BALATA_PATHS_TO_REQUEST_MEASURE),i.registerRequestToMeasureChildren("wysiwyg.viewer.components.Column",o.BALATA_PATHS_TO_REQUEST_MEASURE),i.registerLayoutInnerCompsFirst("wysiwyg.viewer.components.Column",function(t,i,o,n,r,a,s){if(!e.isEmpty(r.anchorsMap)){var u=t.structure,c=u.id,l=o.height[c];a(u),o.minHeight[c]=0,o.height[c]=u.layout.height;var d=s(u);return r.isMobileView()&&(o.top[c]=n[c].offsetTop),l!==o.height[c]&&e.set(d,c,!0),{needsAdditionalInnerLayout:!1,needsParent:!0,changedCompsMap:e.mapValues(d,e.constant(!0))}}},e.noop),i.registerCustomMeasure("wysiwyg.viewer.components.StripColumnsContainer",function(i,r,a,s,u){var c=s.isMobileView(),l=t.dataUtils.getChildrenData(u.structure,c),d=e.map(l,"id");if(c){var g=2*u.propertiesItem.rowMargin+(l.length-1)*u.propertiesItem.columnsMargin;e.forEach(d,function(e,t){g+=r.height[e],r.minHeight[e]=r.height[e];var o=t===d.length-1;r.injectedAnchors[e]=o?[{fromComp:e,distance:u.propertiesItem.rowMargin,topToTop:0,originalValue:0,type:"BOTTOM_PARENT",locked:!0,targetComponent:i}]:[{fromComp:e,distance:u.propertiesItem.columnsMargin,locked:!0,originalValue:0,targetComponent:d[t+1],topToTop:0,type:"BOTTOM_TOP"}]}),r.height[i]=g,r.height[i+n.BALATA]=g}else{var h=e(r.height).pick(d).values().max();e.forEach(d,function(e){r.top[e]=u.propertiesItem.rowMargin,r.minHeight[e]=h,r.injectedAnchors[e]=[{fromComp:e,distance:0,originalValue:0,type:"BOTTOM_PARENT",locked:!0,targetComponent:i}]}),r.height[i]=h+2*u.propertiesItem.rowMargin,r.containerHeightMargin[i]=u.propertiesItem.rowMargin,r.height[i+n.BALATA]=h+2*u.propertiesItem.rowMargin}o.measure(i,r,a,s,u);var p=a[i].getBoundingClientRect(),m=a[i+n.BALATA].offsetLeft;r.custom[i]={absoluteLeft:p.left+m,backgroundLeft:a[i+n.BALATA].offsetLeft,backgroundWidth:a[i+n.BALATA].offsetWidth}}),i.registerPatcher("wysiwyg.viewer.components.StripColumnsContainer",function(e,t,i,n,r){t.css(e,{height:i.height[e],left:0});var a={top:0,left:i.custom[e].backgroundLeft,width:i.custom[e].backgroundWidth,height:i.height[e],absoluteLeft:i.custom[e].absoluteLeft};o.patch(e,t,i,n,r,a,!0)}),i.registerCustomMeasure("wysiwyg.viewer.components.Column",function(e,t,i,r,a){t.height[e+n.BALATA]=t.minHeight[e],t.height[e]=t.minHeight[e],t.width[e]=i[e].offsetWidth,o.measure(e,t,i,r,a);var s=i[e].getBoundingClientRect(),u=i[e+n.BALATA].offsetLeft;t.custom[e]={absoluteLeft:s.left+u,backgroundLeft:i[e+n.BALATA].offsetLeft,backgroundWidth:i[e+n.BALATA].offsetWidth}}),i.registerPatcher("wysiwyg.viewer.components.Column",function(e,t,i,n,r){t.css(e,{height:i.height[e]});var a={top:0,left:i.custom[e].backgroundLeft,width:i.custom[e].backgroundWidth,height:i.height[e],absoluteLeft:i.custom[e].absoluteLeft};o.patch(e,t,i,n,r,a,!0)})}),define("layout/util/popupContainerDocking",["layout/specificComponents/screenWidthLayouts/containerAndScreenWidthLayout","layout/specificComponents/balataLayout","siteUtils"],function(e,t,i){"use strict";var o={NINE_GRID:"nineGrid",FULL_HEIGHT:"fullHeight",FULL_WIDTH:"fullWidth"};return{measure:function(n,r,a,s,u){var c=u.propertiesItem,l={};c.alignmentType!==o.FULL_WIDTH?(c.alignmentType===o.FULL_HEIGHT&&(r.minHeight[n]=r.innerHeight.screen,r.shrinkableContainer[n]=!0),l.width=r.width[n],r.left[n]=i.compAlignmentUtils.getLeft(c,r.width[n],r.width.screen,s.getSiteWidth()),t.measure(n,r,a,s,u,l)):e.measureStripContainer(n,r,a,s,u)},patch:function(n,r,a,s,u){var c=s.propertiesItem,l=u.getCurrentPopupId(),d=i.compAlignmentUtils.getTop(c,a.height[n],a.innerHeight.screen);a.top[n]=d;var g=a.height[l]=d+a.height[n];r.css(l,{height:g}),r.css(n,{left:a.left[n],top:d,width:a.width[n],height:a.height[n]}),c.alignmentType===o.FULL_WIDTH?e.patchStripContainer(n,r,a,s,u,{width:a.width[n]}):t.patch(n,r,a,s,u,function(e,t){return{top:0,left:0,width:e,height:t,absoluteLeft:0}}(a.width[n],a.height[n]))}}}),define("layout/specificComponents/popupContainerLayout",["lodash","layout/util/layout","layout/util/popupContainerDocking","layout/specificComponents/screenWidthLayouts/containerAndScreenWidthLayout","layout/specificComponents/balataLayout"],function(e,t,i,o,n){"use strict";t.registerMeasureChildrenFirst("wysiwyg.viewer.components.PopupContainer",!0),t.registerRequestToMeasureChildren("wysiwyg.viewer.components.PopupContainer",[["inlineContent"]].concat(n.BALATA_PATHS_TO_REQUEST_MEASURE)),t.registerRequestToMeasureDom("wysiwyg.viewer.components.PopupContainer"),t.registerCustomMeasure("wysiwyg.viewer.components.PopupContainer",function(e,t,n,r,a){o.measureContainer(e,t,n,r,a),i.measure(e,t,n,r,a);var s=a.propertiesItem;t.width["ROOT_"+a.rootId]="fullWidth"===s.alignmentType?r.getSiteWidth():t.width[e],t.left["ROOT_"+a.rootId]=Math.floor(t.left[e]-r.getSiteX())}),t.registerPatcher("wysiwyg.viewer.components.PopupContainer",function(e,t,o,n,r){i.patch(e,t,o,n,r)})}),define("layout/specificComponents/comboBoxInputLayout",["lodash","zepto","layout/util/layout","coreUtils"],function(e,t,i,o){"use strict";i.registerCustomDomChangesFunction("wysiwyg.viewer.components.inputs.ComboBoxInput",function(e){var i=e.getAttribute("id"),n=e.querySelector("#"+i+"icon"),r=e.querySelector("#"+i+"collection"),a=n.getBBox().height+16,s=parseInt(t(r).css("line-height"),10)||0,u=2*(parseInt(t(r).css("border-width"),10)||0),c=Math.max(s,a)+u;return[{node:e,type:o.constants.COMP_LAYOUT_OPTIONS.CHANGES_TYPES.css,changes:{height:Math.max(r.offsetHeight,c),width:r.offsetWidth}}]})}),define("layout/specificComponents/datePickerLayout",["zepto","layout/util/layout"],function(e,t){"use strict";t.registerRequestToMeasureChildren("wysiwyg.viewer.components.inputs.DatePicker",[["icon"],["inputWrapper"],["input"]]),t.registerCustomMeasure("wysiwyg.viewer.components.inputs.DatePicker",function(t,i,o){var n=o[t+"icon"],r=o[t+"input"],a=o[t+"inputWrapper"],s=n.height.baseVal.value+16,u=parseInt(e(r).css("line-height"),10)||0,c=2*(parseInt(e(a).css("border-width"),10)||0);i.height[t]=Math.max(a.offsetHeight,s),i.width[t]=Math.max(a.offsetWidth,56),i.minHeight[t]=Math.max(u,s)+c,i.minWidth[t]=56+c}),t.registerPatcher("wysiwyg.viewer.components.inputs.DatePicker",function(e,t,i){t.css(e,{height:i.height[e],width:i.width[e]})})}),define("layout/specificComponents/gridLayout",["lodash","layout/util/layout"],function(e,t){"use strict";function i(e,t){return e.styleItem.style.properties[t]||""}function o(e,t,o,c,l){var d=o[e];t.width[e]=d.offsetWidth,t.height[e]=d.offsetHeight;var g=l.propertiesItem,h=g.rowHeight+Number(i(l,u)),p=Math.min(function(e){var t=e.propertiesItem.pagination;return e.dataItem.numberOfDisplayedRows||(t&&t.type===r.PAGES?t.rowsPerPage:e.dataItem.rows.length)}(l),n),m=g.showHeader?g.headerHeight+Number(i(l,s)):0,f=Number(l.styleItem.style.properties.containerBrw)||0,y=m+p*h+2*f,w=g.heightLayout===a.AUTOMATIC,v=d.getElementsByClassName("ag-bl-center ag-bl-full-height-center");if(v.length){var C=d.getElementsByClassName("ag-body"),b=w?y:v[0].clientHeight;C[0].style.height=b-2*f-m+"px"}y&&w&&(t.height[e]=y)}var n=200,r={PAGES:"pagination",SCROLL:"virtual",NONE:"normal"},a={MANUAL:"manual",AUTOMATIC:"auto"},s="headerDivider_w",u="rowDivider_w";t.registerCustomMeasure("wysiwyg.viewer.components.Grid",o)}),define("layout/specificComponents/fileUploaderLayout",["lodash","layout/util/layout"],function(e,t){"use strict";t.registerRequestToMeasureChildren("wysiwyg.viewer.components.inputs.FileUploader",[["files"],["buttonLabel"],["chooseFileButton"]]),t.registerCustomMeasure("wysiwyg.viewer.components.inputs.FileUploader",function(e,t,i){var o=i[e+"files"],n=i[e+"buttonLabel"],r=i[e+"chooseFileButton"],a=window.getComputedStyle(o),s=window.getComputedStyle(r),u=parseInt(s.borderLeftWidth,10)+parseInt(s.borderRightWidth,10);t.minHeight[e]=parseInt(a.height,10)+parseInt(a.marginTop,10)+Math.max(n.offsetHeight,23)+u,t.width[e]=Math.max(n.offsetWidth+u+16+20,t.width[e])}),t.registerPatcher("wysiwyg.viewer.components.inputs.FileUploader",function(e,t,i){var o={height:Math.max(i.minHeight[e],i.height[e]),width:i.width[e]};t.css(e,o)})}),define("layout/specificComponents/rssButtonLayout",["lodash","layout/util/layout","layout/specificComponents/imageLayout"],function(e,t,i){"use strict";t.registerRequestToMeasureChildren("wysiwyg.common.components.rssbutton.viewer.RSSButton",function(t,i,o){return[{type:"core.components.Image",pathArray:[e.get(o,["dataItem","image","id"])]}]}),t.registerPatcher("wysiwyg.common.components.rssbutton.viewer.RSSButton",function(t,o,n,r,a){var s=e.get(r,"layout"),u=e.get(r,["dataItem","image"]);e.assign(u,{displayMode:"full"}),i.patchNodeImage(t+e.get(u,"id"),o,n,a,u,s)})}),define("layout/specificComponents/semiNativeComponentLayout",["zepto","lodash","layout/util/layout","coreUtilsLib","imageClientLib"],function(e,t,i,o,n){"use strict";function r(e,t){return e+"_images_"+t}function a(e,i,a,s,u){var c=a.custom[e];t.forEach(c,function(t,a){var s=function(e,t,i,r,a,s){var u={imageData:{width:t,height:i,uri:e},containerWidth:r.width,containerHeight:r.height,displayMode:n.fittingTypes[a]};return o.imageUtils.getImageComputedProperties(n,u,s.getMediaFullStaticUrl.bind(s),s.currentUrl,s.mobile.getDevicePixelRatio(),"img")}(t.src,t.width,t.height,t.containerSize,t.displayMode,u),c=r(e,a);i.attr(c,{src:s.uri}),i.css(c,s.css.img)})}i.registerCustomMeasure("platform.components.semiNativeComponent",function(i,o,n){var a=i+"localContainer",s=e(n[i]).find("img[data-wix-image='true']").get();o.height[i]=o.height[a],o.custom[i]=[],t.forEach(s,function(e,t){n[r(i,t)]=e,o.custom[i].push({containerSize:e.getBoundingClientRect(),src:e.getAttribute("data-src"),width:e.getAttribute("data-width"),height:e.getAttribute("data-height"),displayMode:e.getAttribute("data-display-mode")})})}),i.registerRequestToMeasureChildren("platform.components.semiNativeComponent",[["localContainer"]]),i.registerPatcher("platform.components.semiNativeComponent",a)}),define("layout/specificComponents/quickActionBarLayout",["zepto","lodash","layout/util/layout","coreUtils"],function(e,t,i,o){"use strict";function n(i,n,s,u,c){var l=e("#SITE_ROOT")[0],d=o.domMeasurements.getElementRect(s[i],l);n.width[i]=d.width,n.height[i]=d.height;var g=t.includes(s[i].className.split(/\s+/),c.styleItem.id+"_closed");n.width[i+a]=g?0:function(i){var o=e(i).find('div[data-quick-action="text"]');return t(o).map(function(i){var o=+t.replace(e(i).css("width"),"px","");return t.isNaN(o)?0:o}).max()}(s[i]);var h=u.mobile.isZoomed(),p=u.isMobileDevice();n.custom[i]={isZoomed:h&&p,visibility:s[i].style.visibility},g&&(n.height[i+r]=d.height,n.width[i+r]=d.width)}var r="actionsContainer",a="maxTextWidth";i.registerRequestToMeasureChildren("wysiwyg.viewer.components.QuickActionBar",[[r]]),i.registerCustomMeasure("wysiwyg.viewer.components.QuickActionBar",n),i.registerPatcher("wysiwyg.viewer.components.QuickActionBar",function(e,t,i){t.css(e,{top:"",left:"",width:"",height:"","z-index":1001,visibility:i.custom[e].isZoomed?"hidden":i.custom[e].visibility,"pointer-events":i.custom[e].isZoomed?"none":""})})}),define("layout/specificComponents/quickActionBarItemLayout",["layout/util/layout"],function(e){"use strict";e.registerPatcher("wysiwyg.viewer.components.QuickActionBarItem",function(e,t){t.css(e,{top:"",left:"",width:"",height:"",position:"","z-index":""})})}),define("layout/specificComponents/touchMediaZoomLayout",["zepto","lodash","siteUtils","layout/util/layout"],function(e,t,i,o){"use strict";function n(e,i,o,n,s){i.css(e,{top:0,position:"absolute",width:"100%",height:"100%"}),t.forEach(["stage_LEFT","stage_CENTER","stage_RIGHT"],function(n){!function(e,i,o,n,s){o.custom[e]&&(t.forEach(o.custom[e].imageIds,function(e){var t={pixelAspectRatio:s.mobile.getDevicePixelRatio(),browser:s.getBrowser(),staticMediaUrl:s.getStaticMediaUrl(),screenSize:{width:o.width.screen,height:o.height.screen}},n=o.custom[e],a=r.getImageApiData(n.imageData,t,n.scale);i.css(e,a.css.img),i.attr(e,{src:a.uri})}),i.css(e,{width:(1+2*a)*o.width.screen}),i.css(e+"imageContainer",{width:o.width.screen}),i.css(e+"info",{width:o.width.screen}))}(e+n,i,o,0,s)})}var r=i.touchMediaZoomUtils,a=.2;o.registerCustomMeasure("wysiwyg.viewer.components.TouchMediaZoomItem",function(i,o,n){var r=e(n[i]);if(r.data("firstrender")){o.custom[i]={imageIds:[]};var a=t.toArray(r.find("img"));t.forEach(a,function(t,r){var a=i+"_image"+r;n[a]=t,o.custom[i].imageIds.push(a),o.custom[a]={imageData:e(t).data("imgdata"),scale:e(t).data("imgscale")}});var s=r.attr("id");n[i+"imageContainer"]=r.find("#"+s+"imageContainer").get(0),n[i+"info"]=r.find("#"+s+"info").get(0)}}),o.registerRequestToMeasureChildren("wysiwyg.viewer.components.TouchMediaZoom",[{pathArray:["stage_LEFT"],type:"wysiwyg.viewer.components.TouchMediaZoomItem"},{pathArray:["stage_CENTER"],type:"wysiwyg.viewer.components.TouchMediaZoomItem"},{pathArray:["stage_RIGHT"],type:"wysiwyg.viewer.components.TouchMediaZoomItem"}]),o.registerPatcher("wysiwyg.viewer.components.TouchMediaZoom",n)}),define("layout/specificComponents/viewerLayout",[],function(){return function(e){function t(o){if(i[o])return i[o].exports;var n=i[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var i={};return t.m=e,t.c=i,t.d=function(e,i,o){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=".",t(t.s=0)}([function(e,t,i){var o;void 0!==(o=function(){"undefined"==typeof window||!window.document||!window.santaBase||window.editorBase||document.querySelector("#viewerMainStyle")||document.querySelector('link[href$="viewer.css"]')||i(1)}.apply(t,[]))&&(e.exports=o)},function(e,t,i){var o=i(2);"string"==typeof o&&(o=[[e.i,o,""]]);var n={hmr:!0};n.transform=void 0;i(4)(o,n);o.locals&&(e.exports=o.locals)},function(e,t,i){(e.exports=i(3)(!1)).push([e.i,'a,abbr,acronym,address,applet,b,big,blockquote,body,button,caption,center,cite,code,dd,del,dfn,div,dl,dt,em,fieldset,font,footer,form,h1,h2,h3,h4,h5,h6,header,html,i,iframe,img,ins,kbd,label,legend,li,nav,object,ol,p,pre,q,s,samp,section,small,span,strike,strong,sub,sup,table,tbody,td,tfoot,th,thead,title,tr,tt,u,ul,var{margin:0;padding:0;border:0;outline:0;vertical-align:baseline;background:transparent}body{font-size:10px;font-family:Arial,Helvetica,sans-serif}input,select,textarea{font-family:Helvetica,Arial,sans-serif;box-sizing:border-box}ol,ul{list-style:none}blockquote,q{quotes:none}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}a{cursor:pointer;text-decoration:none}body,html{height:100%}body{overflow-x:auto;overflow-y:scroll}.testStyles{overflow-y:hidden}.reset-button{background:none;border:0;outline:0;color:inherit;font:inherit;line-height:normal;overflow:visible;padding:0;-webkit-appearance:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}:focus{outline:none}.wixSiteProperties{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;overflow:hidden}.SITE_ROOT{min-height:100%;position:relative;margin:0 auto}.POPUPS_ROOT{left:0;top:0;width:100vw;height:100%;overflow-x:auto;overflow-y:scroll;position:fixed;z-index:99999}.POPUPS_ROOT.mobile{z-index:1005}.POPUPS_WRAPPER{position:relative;overflow:hidden}.POPUPS_WRAPPER>div{margin:0 auto}.auto-generated-link{color:inherit}.warmup .hidden-on-warmup{visibility:hidden}html.device-phone body{overflow-y:auto}html.device-mobile-optimized.device-android{margin-bottom:1px}html.device-mobile-optimized.blockSiteScrolling>body{position:fixed;width:100%}html.device-mobile-optimized.media-zoom-mode>body{touch-action:manipulation}html.device-mobile-optimized.media-zoom-mode>body>#SITE_CONTAINER{height:100%;overflow:hidden}html.device-mobile-optimized.media-zoom-mode>body>#SITE_CONTAINER>.noop{height:100%}html.device-mobile-optimized.media-zoom-mode>body>#SITE_CONTAINER>.noop>.siteAspectsContainer{height:100%;z-index:1005}.siteAspectsContainer{position:absolute;top:0;margin:0 auto;left:0;right:0}body.device-mobile-optimized{overflow-x:hidden;overflow-y:scroll}body.device-mobile-optimized.qa-mode{overflow-y:auto}body.device-mobile-optimized #SITE_CONTAINER{width:320px;overflow-x:visible;margin:0 auto;position:relative}body.device-mobile-optimized>*{max-width:100%!important}body.device-mobile-optimized .SITE_ROOT{overflow-x:hidden;overflow-y:hidden}body.device-mobile-non-optimized #SITE_CONTAINER>:not(.mobile-non-optimized-overflow) .SITE_ROOT{overflow-x:hidden;overflow-y:auto}body.device-mobile-non-optimized.fullScreenMode{background-color:#5f6360}body.device-mobile-non-optimized.fullScreenMode #MOBILE_ACTIONS_MENU,body.device-mobile-non-optimized.fullScreenMode #SITE_BACKGROUND,body.device-mobile-non-optimized.fullScreenMode .SITE_ROOT{visibility:hidden}body.fullScreenMode{overflow-x:hidden!important;overflow-y:hidden!important}body.fullScreenMode.device-mobile-optimized #TINY_MENU{opacity:0;pointer-events:none}body.fullScreenMode-scrollable.device-mobile-optimized{overflow-x:hidden!important;overflow-y:auto!important}body.fullScreenMode-scrollable.device-mobile-optimized #masterPage,body.fullScreenMode-scrollable.device-mobile-optimized .SITE_ROOT{overflow-x:hidden!important;overflow-y:hidden!important}body.fullScreenMode-scrollable.device-mobile-optimized #masterPage,body.fullScreenMode-scrollable.device-mobile-optimized #SITE_BACKGROUND{height:auto!important}.fullScreenOverlay{z-index:1005;position:fixed;left:0;top:-60px;right:0;bottom:0;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;overflow-y:hidden}.fullScreenOverlay>.fullScreenOverlayContent{margin:0 auto;position:absolute;right:0;top:60px;left:0;bottom:0;overflow:hidden;-webkit-transform:translateZ(0);transform:translateZ(0)}.mobile-actions-menu-wrapper{z-index:1000}body[contenteditable]{overflow-x:auto;overflow-y:auto}.bold{font-weight:700}.italic{font-style:italic}.underline{text-decoration:underline}.lineThrough{text-decoration:line-through}.singleLineText{white-space:nowrap;text-overflow:ellipsis}.alignLeft{text-align:left}.alignCenter{text-align:center}.alignRight{text-align:right}.alignJustify{text-align:justify}ol.font_100,ul.font_100{color:#080808;font-family:"Arial, Helvetica, sans-serif",serif;font-size:10px;font-style:normal;font-variant:normal;font-weight:400;margin:0;text-decoration:none;line-height:normal;letter-spacing:normal}ol.font_100 li,ul.font_100 li{margin-bottom:12px}letter{position:relative}letter,word{display:inline-block}word{white-space:nowrap}letter.space,word.space{display:inline}ol.wix-list-text-align,ul.wix-list-text-align{list-style-position:inside}ol.wix-list-text-align h1,ol.wix-list-text-align h2,ol.wix-list-text-align h3,ol.wix-list-text-align h4,ol.wix-list-text-align h5,ol.wix-list-text-align h6,ol.wix-list-text-align p,ul.wix-list-text-align h1,ul.wix-list-text-align h2,ul.wix-list-text-align h3,ul.wix-list-text-align h4,ul.wix-list-text-align h5,ul.wix-list-text-align h6,ul.wix-list-text-align p{display:inline}.wixapps-less-spacers-align.ltr{text-align:left}.wixapps-less-spacers-align.center{text-align:center}.wixapps-less-spacers-align.rtl{text-align:right}.wixapps-less-spacers-align>a,.wixapps-less-spacers-align>div{display:inline-block!important}.flex_display{display:-webkit-box;display:-webkit-flex;display:flex}.flex_vbox{box-sizing:border-box;padding-top:.01em;padding-bottom:.01em}a.wixAppsLink img{cursor:pointer}.singleLine{white-space:nowrap;display:block;overflow:hidden;text-overflow:ellipsis;word-wrap:normal}[data-z-counter]{z-index:0}[data-z-counter="0"]{z-index:auto}.circle-preloader{-webkit-animation:semi-rotate 1s 1ms linear infinite;animation:semi-rotate 1s 1ms linear infinite;height:30px;left:50%;margin-left:-15px;margin-top:-15px;overflow:hidden;position:absolute;top:50%;-webkit-transform-origin:100% 50%;transform-origin:100% 50%;width:15px}.circle-preloader:before{color:#7fccf7}.circle-preloader:after,.circle-preloader:before{content:"";top:0;left:0;right:-100%;bottom:0;border:3px solid currentColor;border-color:currentColor transparent transparent currentColor;border-radius:50%;position:absolute;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);-webkit-animation:inner-rotate .5s 1ms linear infinite alternate;animation:inner-rotate .5s 1ms linear infinite alternate}.circle-preloader:after{color:#3899ec;opacity:0}.circle-preloader.white:before{color:#f0f0f0}.circle-preloader.white:after{color:#dcdcdc}@-webkit-keyframes inner-rotate{to{opacity:1;-webkit-transform:rotate(115deg);transform:rotate(115deg)}}@keyframes inner-rotate{to{opacity:1;-webkit-transform:rotate(115deg);transform:rotate(115deg)}}@-webkit-keyframes semi-rotate{0%{-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out;-webkit-transform:rotate(180deg);transform:rotate(180deg)}45%{-webkit-transform:rotate(198deg);transform:rotate(198deg)}55%{-webkit-transform:rotate(234deg);transform:rotate(234deg)}to{-webkit-transform:rotate(540deg);transform:rotate(540deg)}}@keyframes semi-rotate{0%{-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out;-webkit-transform:rotate(180deg);transform:rotate(180deg)}45%{-webkit-transform:rotate(198deg);transform:rotate(198deg)}55%{-webkit-transform:rotate(234deg);transform:rotate(234deg)}to{-webkit-transform:rotate(540deg);transform:rotate(540deg)}}.hidden-comp-ghost-mode{opacity:.5}.collapsed-comp-mode:after{position:absolute;top:0;bottom:0;left:0;right:0;content:"";background:-webkit-repeating-linear-gradient(135deg,transparent,transparent 49%,#2b5672 0,#2b5672 0,transparent 51%);background:repeating-linear-gradient(-45deg,transparent,transparent 49%,#2b5672 0,#2b5672 0,transparent 51%);background-size:6px 6px;background-repeat:repeat}.g-transparent-a:link,.g-transparent-a:visited{border-color:transparent}.transitioning-comp *{transition:inherit!important;-webkit-transition:inherit!important}.selectionSharerContainer{position:absolute;background-color:#fff;box-shadow:0 4px 10px 0 rgba(57,86,113,.24);width:142px;height:45px;border-radius:100px;text-align:center}.selectionSharerContainer:after{content:"";position:absolute;bottom:-10px;left:42%;border-width:10px 10px 0;border-style:solid;border-color:#fff transparent;display:block;width:0}.selectionSharerContainer .selectionSharerOption{display:inline-block;cursor:pointer;vertical-align:top;padding:13px 11px 11px 13px;margin:1px;z-index:-1}.selectionSharerContainer .selectionSharerVerticalSeparator{margin-top:9px;margin-bottom:18px;background-color:#eaf7ff;height:26px;width:1px;display:inline-block}.visual-focus-on .focus-ring:not(.has-custom-focus):focus{box-shadow:inset 0 0 0 1px hsla(0,0%,100%,.9),0 0 1px 2px #3899ec!important}',""])},function(e,t){function i(e,t){var i=e[1]||"",o=e[3];if(!o)return i;if(t&&"function"==typeof btoa){var n=function(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}(o),r=o.sources.map(function(e){return"/*# sourceURL="+o.sourceRoot+e+" */"});return[i].concat(r).concat([n]).join("\n")}return[i].join("\n")}e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var o=i(t,e);return t[2]?"@media "+t[2]+"{"+o+"}":o}).join("")},t.i=function(e,i){"string"==typeof e&&(e=[[null,e,""]]);for(var o={},n=0;n<this.length;n++){var r=this[n][0];"number"==typeof r&&(o[r]=!0)}for(n=0;n<e.length;n++){var a=e[n];"number"==typeof a[0]&&o[a[0]]||(i&&!a[2]?a[2]=i:i&&(a[2]="("+a[2]+") and ("+i+")"),t.push(a))}},t}},function(e,t,i){function o(e,t){for(var i=0;i<e.length;i++){var o=e[i],n=d[o.id];if(n){n.refs++;for(a=0;a<n.parts.length;a++)n.parts[a](o.parts[a]);for(;a<o.parts.length;a++)n.parts.push(c(o.parts[a],t))}else{for(var r=[],a=0;a<o.parts.length;a++)r.push(c(o.parts[a],t));d[o.id]={id:o.id,refs:1,parts:r}}}}function n(e,t){for(var i=[],o={},n=0;n<e.length;n++){var r=e[n],a=t.base?r[0]+t.base:r[0],s={css:r[1],media:r[2],sourceMap:r[3]};o[a]?o[a].parts.push(s):i.push(o[a]={id:a,parts:[s]})}return i}function r(e,t){var i=h(e.insertInto);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var o=f[f.length-1];if("top"===e.insertAt)o?o.nextSibling?i.insertBefore(t,o.nextSibling):i.appendChild(t):i.insertBefore(t,i.firstChild),f.push(t);else if("bottom"===e.insertAt)i.appendChild(t);else{if("object"!==_typeof(e.insertAt)||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var n=h(e.insertInto+" "+e.insertAt.before);i.insertBefore(t,n)}}function a(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=f.indexOf(e);t>=0&&f.splice(t,1)}function s(e){var t=document.createElement("style");return e.attrs.type="text/css",u(t,e.attrs),r(e,t),t}function u(e,t){Object.keys(t).forEach(function(i){e.setAttribute(i,t[i])})}function c(e,t){var i,o,n,c;if(t.transform&&e.css){if(!(c=t.transform(e.css)))return function(){};e.css=c}if(t.singleton){var d=m++;i=p||(p=s(t)),o=l.bind(null,i,d,!1),n=l.bind(null,i,d,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(i=function(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",u(t,e.attrs),r(e,t),t}(t),o=function(e,t,i){var o=i.css,n=i.sourceMap,r=void 0===t.convertToAbsoluteUrls&&n;(t.convertToAbsoluteUrls||r)&&(o=y(o));n&&(o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */");var a=new Blob([o],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,i,t),n=function(){a(i),i.href&&URL.revokeObjectURL(i.href)}):(i=s(t),o=function(e,t){var i=t.css,o=t.media;o&&e.setAttribute("media",o);if(e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}.bind(null,i),n=function(){a(i)});return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else n()}}function l(e,t,i,o){var n=i?"":o.css;if(e.styleSheet)e.styleSheet.cssText=w(t,n);else{var r=document.createTextNode(n),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(r,a[t]):e.appendChild(r)}}var d={},g=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}}(function(){return window&&document&&document.all&&!window.atob}),h=function(e){var t={};return function(e){if(void 0===t[e]){var i=function(e){return document.querySelector(e)}.call(this,e);if(i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}t[e]=i}return t[e]}}(),p=null,m=0,f=[],y=i(5);e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!==("undefined"==typeof document?"undefined":_typeof(document)))throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"===_typeof(t.attrs)?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=g()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var i=n(e,t);return o(i,t),function(e){for(var r=[],a=0;a<i.length;a++){var s=i[a];(u=d[s.id]).refs--,r.push(u)}if(e){o(n(e,t),t)}for(a=0;a<r.length;a++){var u=r[a];if(0===u.refs){for(var c=0;c<u.parts.length;c++)u.parts[c]();delete d[u.id]}}}};var w=function(){var e=[];return function(t,i){return e[t]=i,e.filter(Boolean).join("\n")}}()},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var i=t.protocol+"//"+t.host,o=i+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var n=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(n))return e;var r;return r=0===n.indexOf("//")?n:0===n.indexOf("/")?i+n:o+n.replace(/^\.\//,""),"url("+JSON.stringify(r)+")"})}}])}),define("layout/specificComponents/oldSiteButtonLayout",["zepto","lodash","layout/util/layout"],function(e,t,i){"use strict";function o(t,i,o){var n=t+"label",r=e(o[t]),a=r.text(),s=r.data("should-use-flex"),u=window.getComputedStyle(o[t]),c=window.getComputedStyle(o[n]),l=u.minHeight;l&&parseInt(l,10)||(l=i.height[n]),i.minHeight[t]=parseInt(l,10),i.minWidth[t]=s?i.width[n]:i.width[n]+function(e){return parseInt(e.marginRight,10)+parseInt(e.marginLeft,10)}(c);var d=r.data("shouldPreventWidthMeasurement");d||(i.width[t]=a!==""+r.data("prevText")&&i.minWidth[t]<r.data("prevMinWidth")&&r.data("prevWidth")===r.data("prevMinWidth")&&i.width[n]>0?i.minWidth[t]:Math.max(i.width[t],i.minWidth[t])),i.height[t]=Math.max(i.height[t],i.minHeight[t]),i.custom[t]={align:r.attr("data-align"),margin:parseInt(r.attr("data-margin"),10),shouldPreventWidthMeasurement:d,shouldUseFlex:s,text:a},i.custom[n]={verticalPadding:function(e){return parseInt(e.paddingTop,10)+parseInt(e.paddingBottom,10)}(c)};var g=i.width[n]+i.custom[t].margin>i.width[t],h=i.custom[t].align;"center"!==h&&(s?i.custom[n].margin=g?i.width[t]-i.width[n]:i.custom[t].margin:i.custom[n]["margin-"+h]=g?i.width[t]-i.width[n]:i.custom[t].margin)}function n(e,i,o){var n={height:o.height[e],"min-height":o.minHeight[e]};o.custom[e].shouldPreventWidthMeasurement||(n.width=o.width[e]),i.css(e,n);var r=e+"label",a=function(e,i,o){var n=void 0;if(o.custom[e].shouldUseFlex){n={};var r=o.custom[e].align;return"center"!==r&&o.custom[i].margin&&(n["margin-"+r]=o.custom[i].margin),n}return n={"line-height":o.height[e]-o.custom[i].verticalPadding+"px"},t.reduce(["margin-left","margin-right"],function(e,n){return t.isUndefined(o.custom[i][n])||(e[n]=o.custom[i][n]),e},n)}(e,r,o);i.css(r,a),i.data(e,{prevText:o.custom[e].text,prevMinWidth:o.minWidth[e],prevWidth:o.width[e]})}i.wixapps.registerRequestToMeasureChildren("wysiwyg.viewer.components.SiteButton",[["label"]]),i.wixapps.registerCustomMeasure("wysiwyg.viewer.components.SiteButton",o),i.wixapps.registerPatcher("wysiwyg.viewer.components.SiteButton",n)}),define("layout/specificComponents/siteButtonLayout",["lodash","zepto","coreUtils","layout/util/layout"],function(e,t,i,o){"use strict";var n=new WeakMap;o.registerCustomDomChangesFunction("wysiwyg.viewer.components.SiteButton",function(o){var r=o.getAttribute("id"),a=o.querySelector("#"+r+"label"),s=t(o),u=s.data("width"),c=s.data("height"),l=n.get(o)||{},d=l.prevWidth,g=l.prevMinWidth,h=l.prevText,p=a.offsetHeight,m=a.offsetWidth,f=a.innerHTML,y=s.data("should-use-flex"),w=window.getComputedStyle(o),v=window.getComputedStyle(a),C=function(e){return e.minHeight&&Boolean(parseInt(e.minHeight,10))}(w)?parseInt(w.minHeight,10):p,b=y?m:m+function(e){return parseInt(e.marginRight,10)+parseInt(e.marginLeft,10)}(v),M=s.data("shouldPreventWidthMeasurement"),S=u,I=c,T=Math.max(I,C),x=S;M||(x=f!==h&&b<g&&d===g&&m>0?b:Math.max(x,b));var L={align:s.attr("data-align"),margin:parseInt(s.attr("data-margin"),10),text:f,label:{verticalPadding:function(e){return parseInt(e.paddingTop,10)+parseInt(e.paddingBottom,10)}(v)}},A=m+L.margin>x;if("center"!==L.align){var D=y?"margin":"margin-"+L.align;L.label[D]=A?x-m:L.margin}var P={height:T,"min-height":C};M||(P.width=x);n.set(o,{prevText:L.text,prevMinWidth:b,prevWidth:x});var E=i.constants.COMP_LAYOUT_OPTIONS.CHANGES_TYPES;return[{node:o,type:E.css,changes:P},{node:a,type:E.css,changes:function(){var t=void 0;if(y){t={};var i=L.align;return"center"!==i&&L.label.margin&&(t["margin-"+i]=L.label.margin),t}return t={"line-height":T-L.label.verticalPadding+"px"},e.reduce(["margin-left","margin-right"],function(t,i){return e.isUndefined(L.label[i])||(t[i]=L.label[i]),t},t)}()}]})}),define("layout/specificComponents/videoLayout",["layout/util/layout"],function(e){"use strict";var t={VIMEO:{WIDTH:100,HEIGHT:100},DAILYMOTION:{WIDTH:100,HEIGHT:100},FACEBOOK:{WIDTH:100,HEIGHT:100},YOUTUBE:{WIDTH:200,HEIGHT:200}},i={WIDTH:10,HEIGHT:10};e.wixapps.registerCustomMeasure("wysiwyg.viewer.components.Video",function(e,o,n,r,a){var s=t[a.dataItem.videoType]||i;o.minWidth[e]=s.WIDTH,o.minHeight[e]=s.HEIGHT,o.width[e]=Math.max(o.width[e],s.WIDTH),o.height[e]=Math.max(o.height[e],s.HEIGHT),o.top[e]=a.layout.y})}),define("layout/specificComponents/verticalLineLayout",["layout/util/layout"],function(e){"use strict";var t=2e3;e.wixapps.registerCustomMeasure("wysiwyg.viewer.components.VerticalLine",function(e,i,o){i.height[e]=Math.min(i.height[e],t),i.width[e]=parseInt(o[e].style.width,10),i.left[e]=parseInt(o[e].style.left,10)})}),define("layout",["layout/util/layout","layout/specificComponents/fiveGridLineLayout","layout/specificComponents/registerToMeasureOnly","layout/specificComponents/registerToPureDomMeasure","layout/specificComponents/areaTooltipLayout","layout/specificComponents/menuLayout","layout/specificComponents/sliderGalleryLayout","layout/specificComponents/verticalMenuLayout","layout/specificComponents/loginSocialBarLayout","layout/specificComponents/dialogLayout","layout/specificComponents/siteBackgroundLayout","layout/specificComponents/wPhotoLayout","layout/specificComponents/wixFreemiumBannerLayout","layout/specificComponents/documentMediaLayout","layout/specificComponents/screenWidthLayouts/containerAndScreenWidthLayout","layout/specificComponents/wixappsLayout","layout/specificComponents/shapeLayout","layout/specificComponents/richtextLayout","layout/specificComponents/matrixGalleryLayout","layout/specificComponents/slideShowLayout","layout/specificComponents/tinyMenuLayout","layout/specificComponents/imageZoomLayout","layout/specificComponents/tpaGalleryLayout","layout/specificComponents/wFacebookCommentLayout","layout/specificComponents/formMixinLayout","layout/specificComponents/bgImageLayout","layout/specificComponents/wixSiteLayout","layout/specificComponents/fitToContentLayout","layout/wixappsLayout/proxyLayoutRegistrar","layout/wixappsLayout/proxyLayout/paginatedColumnGalleryProxyLayout","layout/wixappsLayout/proxyLayout/galleryProxyLayout","layout/wixappsLayout/proxyLayout/imageProxyLayout","layout/wixappsLayout/proxyLayout/buttonProxyLayout","layout/wixappsLayout/proxyLayout/mediaLabelProxyLayout","layout/wixappsLayout/proxyLayout/sliderGalleryProxyLayout","layout/specificComponents/imageButtonLayout","layout/specificComponents/mediaRichTextLayout","layout/specificComponents/backToTopButtonLayout","layout/specificComponents/appPartZoomLayout","layout/specificComponents/facebookShareLayout","layout/specificComponents/paginatedGridGalleryLayout","layout/specificComponents/PinterestFollowLayout","layout/specificComponents/boxSlideShowLayout","layout/specificComponents/mediaContainerLayout","layout/specificComponents/mediaControlsLayout","layout/specificComponents/mediaOverlayControlsLayout","layout/specificComponents/verticalAnchorsMenuLayout","layout/specificComponents/columnsLayout","layout/specificComponents/popupContainerLayout","layout/specificComponents/comboBoxInputLayout","layout/specificComponents/datePickerLayout","layout/specificComponents/gridLayout","layout/specificComponents/fileUploaderLayout","layout/specificComponents/rssButtonLayout","layout/specificComponents/semiNativeComponentLayout","layout/specificComponents/quickActionBarLayout","layout/specificComponents/quickActionBarItemLayout","layout/specificComponents/touchMediaZoomLayout","layout/specificComponents/viewerLayout","layout/specificComponents/oldSiteButtonLayout","layout/specificComponents/siteButtonLayout","layout/specificComponents/videoLayout","layout/specificComponents/verticalLineLayout"],function(e){"use strict";return e});
//# sourceMappingURL=layout.min.js.map