define("wixCode/utils/wixCodeWidgetService",["lodash","platformInit"],function(e,t){"use strict";function i(e){return t.specMapUtils.getAppSpec(e)}return{hasWixCodeWidgetSpecs:function(e){return!!i(e)},getWixCodeSpec:i}}),define("wixCode/aspects/WixCodeWidgetAspect",["lodash","platformInit","coreUtils"],function(e,t,i){"use strict";function n(e){this._aspectSiteAPI=e,this._aspectSiteAPI.registerToSiteReady(function(){var e=this._aspectSiteAPI.getSiteAspect("siteMembers");this.callbackId=e.registerToUserLogin(function(){this.isAppInitiated()||this.initApp(),e.unRegisterToUserLogin(this.callbackId)}.bind(this))}.bind(this))}return n.prototype={initApp:function(){var n=this._aspectSiteAPI.getSiteData(),s=this._aspectSiteAPI.getWixCodeAppApi(),r=e.get(n,["currentUrl","query","viewerPlatformAppSources"]),a=t.appsUtils.getAppsBaseInfo({rendererModel:n.rendererModel,clientSpecMap:n.getClientSpecMap(),serviceTopology:n.serviceTopology,viewerPlatformAppSources:r}),o="lib/"+(n.hasDebugQueryParam()?"wix.js":"wix.min.js"),u=i.urlUtils.joinURL(n.serviceTopology.scriptsLocationMap["js-wixcode-sdk"],o),c="//unpkg.parastorage.com/react@16.0.0/umd/react"+(n.hasDebugQueryParam()?".development.js":".production.min.js"),d="//unpkg.parastorage.com/react-dom@16.0.0/umd/react-dom"+(n.hasDebugQueryParam()?".development.js":".production.min.js");s.init(n,n.getClientSpecMap(),{isMobileView:n.isMobileView(),debug:n.isDebugMode(),sdkSource:u,runtimeSource:e.get(n,["currentUrl","query","WixCodeRuntimeSource"]),ReactLibSource:c,ReactDomSource:d,ReactSource:e.get(n,["currentUrl","query","ReactSource"]),applications:a})},isAppInitiated:function(){return this._aspectSiteAPI.getWixCodeAppApi().isAppInitiated()},destroyAppsContainer:function(){this._aspectSiteAPI.getWixCodeAppApi().destroyAppsContainer()}},n}),define("wixCode/handlers/wixCodeHandlers",["lodash","zepto","utils","coreUtils","siteUtils","thirdPartyAnalytics"],function(e,t,i,n,s,r){"use strict";var a=n.linkTypes,o=function(e){if(!e.getRenderFlag("isExternalNavigationAllowed")){return e.getRenderRealtimeConfigItem("previewTooltipCallback")(function(e,t){var i=void 0!==window.screenLeft?window.screenLeft:window.screen.left,n=void 0!==window.screenTop?window.screenTop:window.screen.top,s=void 0;s=window.innerWidth?window.innerWidth:window.document.documentElement.clientWidth?window.document.documentElement.clientWidth:window.screen.width;return{top:(window.innerHeight?window.innerHeight:window.document.documentElement.clientHeight?window.document.documentElement.clientHeight:window.screen.height)/2-t/2+n,left:s/2-e/2+i}}(50,20),"text_editor_inactive_link_on_preview"),!1}return!0};return{reportBI:function(e,t){e.reportBI(t.reportDef,t.params)},windowBoundingRect:function(t,i,n){var s=t.getSiteAspect("windowScrollEvent");n({window:t.getWindowSize(),scroll:e.pick(s.getScrollPosition(),["x","y"]),document:t.getDocumentSize()})},navigateTo:function(t,i){switch(i.data.type){case a.EXTERNAL_LINK:i.data.url&&o(t)&&window.open(i.data.url,"_self");break;case a.EMAIL_LINK:var n=s.linkUtils.getEmailLink(i.data);n&&o(t)&&window.open(n,"_self");break;case a.PHONE_LINK:window.open(s.linkUtils.getPhoneLink(i.data),"_self");break;case a.DOCUMENT_LINK:var r=s.linkUtils.getDocumentLink(i.data,t.getSiteData());window.open(r,"_self");break;default:!function(t,i){var n={pageId:t.getSiteData().getPrimaryPageId()};if(i.pageId)if("#"===i.pageId)e.assign(n,{pageId:t.getSiteData().getMainPageId()});else{var s=function(e,t){return e.getSiteData().findDataOnMasterPageByPredicate(function(e){return e.pageUriSEO===t||e.id===t})}(t,i.pageId);e.assign(n,{pageId:"masterPage"===s.id?n.pageId:s.id})}if(i.routerId){var r=e.get(t.getSiteData(),["routers","configMap",i.routerId]),a=i.innerRoute?r.prefix+"/"+i.innerRoute:r.prefix;r&&(n={routerDefinition:r,innerRoute:i.innerRoute,pageAdditionalData:a})}i.anchorDataId&&e.assign(n,{anchorData:i.anchorDataId}),i.queryParams&&e.assign(n,{queryParams:i.queryParams}),t.handleNavigation(n,"#",!0)}(t,i.data)}},postHtmlMessage:function(e,t){var i=t.data;e.getSiteAspect("HtmlPostMessageAspect").postMessage(i.id,i.msg)},openLightbox:function(e,t,i){var n=t.data.id,s=e.getSiteAspect("PopupPageAspect");e.getRuntimeDal().setPopupContext(n,t.data.context),i&&s.registerCloseHandler(n,i),s.openPopupPage(n)},closeLightbox:function(e,t){var i=t.data.id;e.getCurrentPopupId()===i&&e.getSiteAspect("PopupPageAspect").closePopupPage(t.data.returnedData)},getRoutersSiteMap:function(t,n,s){var r=t.getSiteData(),a=e.find(r.routers.configMap,{prefix:n.data.prefix})||{},o=i.routersBackEndRequests.makeParamObjFromSiteData(r,a,{});i.routersBackEndRequests.getInnerRoutesSiteMap(o,function(e){s(e)},e.noop,t)},startFileUpload:function(e,t,i){e.getComponentById(t.data.compId).uploadFiles(i)},getCurrentGeolocation:function(t,i,n){window.navigator.geolocation.getCurrentPosition(function(t){n({timestamp:e.get(t,"timestamp"),coords:e.toPlainObject(e.get(t,"coords"))})},function(e){n(null,e&&e.message)})},scrollToComponent:function(e,t,i){e.scrollToComponent(t.data.compId,{onComplete:function(){i()}})},smCurrentUserEmail:function(t,i,n){!function(e,t){var i=e.getSiteAspect("siteMembers");i.isLoggedIn()?i.getMemberDetails(t,function(e){t(null,e)}):t(null,"No user is currently logged in")}(t,function(t,i){i?n(null,i):e.isObject(t)&&t.email?n(t.email):n(null,"Unable to retrieve user email")})},smLogout:function(e,t,i){var n=e.getSiteAspect("siteMembers");n.isLoggedIn()?n.logout(null,i,function(e){i(null,e)}):i(null,"No member is logged in")},smForgotPassword:function(t,i,n){var s=e.get(i,["data","language"]),r=t.getSiteAspect("siteMembers"),a=!1;r.isLoggedIn()?n(null,"User is already logged in"):r.showResetPasswordDialog(s||null,function(){a=!0},function(){a?n():n(null,"The user closed the forgot password dialog")})},googleAnalytics:function(e,t){r.reportGoogleAnalytics.apply(null,[e.getSiteData()].concat(t.data))}}}),define("wixCode/services/platformTpaApiService",["lodash","pmrpc","utils"],function(e,t,i){"use strict";function n(e,n,s,r,a,o){return t.api.request(e,{initiator:s}).then(function(e){if(!e[r])throw new Error("Api for component with id "+n+" does not contain function "+r);return e[r].apply(e,a)}).then(o).catch(function(e){i.log.error(e.message),o(null,e.message)})}function s(e){var t=e.getIframe();return t&&t.id}return{handleAppAPIMessage:function(t,r,a){var o=t.getSiteAspect("tpaComponentsDomAspect"),u=e.get(r.data,"compId");o.getComponentWhenReady(u).then(function(o){if(!o)throw new Error("comp "+u+" does not exist");var c=e.get(r.data,"fn"),d=e.get(r.data,"fnArgs");switch(r.type){case"invokeTPAFn":t.getSiteAspect("TPARPCAspect").requireComponentAPI(u,function(e,t){t?(i.log.error(t),a(null,t)):n("tpa_public_api_"+u,u,s(o),c,d,a)});break;case"invokeAppFn":n("publicApi",u,s(o),c,d,a);break;case"invokeAppOn":n("publicApi",u,s(o),c,[a],a)}}).catch(function(e){i.log.error(e.message),a(null,e.message)})}}}),define("wixCode/utils/constants",[],function(){"use strict";return{MESSAGE_INTENT:{WIX_CODE_MESSAGE:"WIX_CODE",WIX_CODE_SITE_API:"WIX_CODE_SITE_API",WIX_CODE_APP_API:"WIX_CODE_APP_API"},MESSAGE_TYPE:{CONSOLE:"console",IFRAME_COMMAND:"wix_code_iframe_command",GOOGLE_ANALYTICS:"googleAnalytics",UPDATE_WIX_CODE_MODEL_DATA_AFTER_LOGIN:"update_wix_code_model_data_after_login",REQUEST_API:"REQUEST_API",PLATFORM_PUBLIC_API_PREFIX:"viewer_platform_public_api_"}}}),define("wixCode/services/wixCodeUserScriptsService",["lodash","coreUtils"],function(e,t){"use strict";function i(t,i,n,a,o){var u="https://"+a.instanceId+".dev."+o.serviceTopology.wixCloudBaseDomain;return s.joinURL(u,r,t)+"?empty-if-missing=true&exclude=wix-&module-name="+i+"&viewMode="+o.viewMode+"&instance="+a.instance+"&scari="+n.signedAppRenderInfo+"&cacheKiller="+function(t,i){var n=e.get(i,"wixCode.nonUndoable.fileCacheKillers",{}),s=e.get(i,"wixCode.nonUndoable.defaultFileCacheKiller"),a=n["public/"+r+"/"+t];return a||s}(t,o)}function n(e,t,n,a,o){return"site"===o.viewMode?function(e,t,i,n,a){var o="https://"+n.instanceId+".static.pub."+a.serviceTopology.wixCloudBaseDomain;return s.joinURL(o,"static","v2",i.appData.codeAppId,n.instanceId,r,e)+"?empty-if-missing=true&exclude=wix-&module-name="+t}(e,t,n,a,o):i(e,t,n,a,o)}var s=t.urlUtils,r="pages";return{getUserScript:function(e,t,i,s){var r="masterPage"===e.type?"masterPage":e.id,a=r+".js";return{url:n(a,r,t,i,s),displayName:function(e){return"masterPage"===e.type?"site":e.displayName+" "+("Popup"===e.type?"popup":"page")}(e),scriptName:a}}}}),define("wixCode/utils/messageBuilder",["lodash","wixCode/services/wixCodeUserScriptsService","wixCode/utils/constants"],function(e,t,i){"use strict";function n(n,s,r,a){var o={intent:i.MESSAGE_INTENT.WIX_CODE_MESSAGE};return r&&n.widgets&&(n.widgets=e.map(n.widgets,function(o){return function(e){return"Application"!==e.type||"dataBinding"===e.id}(o)?e.assign({},o,function(e,n,s,r,a){if("load_widgets"===e.type||"load_user_code"===e.type||e.type===i.MESSAGE_TYPE.UPDATE_WIX_CODE_MODEL_DATA_AFTER_LOGIN){var o={appConfig:{scari:s.signedAppRenderInfo,instance:r.instance}};return"Application"!==n.type&&(o.appConfig.userScript=t.getUserScript(n,s,r,a)),o}}(n,o,s,r,a)):o})),e.defaults({},n,o)}return{getExtendedMessage:n}}),define("wixCode/aspects/wixCodePostMessageService",["lodash","tpa","utils","coreUtils","wixCode/handlers/wixCodeHandlers","wixCode/services/platformTpaApiService","wixCode/utils/constants","wixCode/utils/messageBuilder","wixCode/utils/wixCodeWidgetService","widgets","pmrpc"],function(e,t,i,n,s,r,a,o,u,c,d){"use strict";function l(e){return e===a.MESSAGE_INTENT.WIX_CODE_SITE_API}function g(e){return e===a.MESSAGE_INTENT.WIX_CODE_APP_API}function p(e){return c.widgetService.getWidgetHandler(e)}function m(e,t,n){var s=p(e);switch(t.type){case a.MESSAGE_TYPE.IFRAME_COMMAND:s.onCommand(t,n);break;case a.MESSAGE_TYPE.CONSOLE:i.logWixCodeConsoleMessage(t);break;case a.MESSAGE_TYPE.REQUEST_API:if(!e.getSiteData().isAddPanelView){var r=a.MESSAGE_TYPE.PLATFORM_PUBLIC_API_PREFIX+t.appDefId+"_"+t.workerId;d.api.request(r,{target:s.getPostMessageTarget(t.workerId)}).then(function(e){d.api.set(r,e)})}break;default:s.handleRemoteMessage(t)}}function f(i,n,o){try{e.isString(n)&&(n=JSON.parse(n))}catch(e){return}if(i.getSiteData().isInSSR()?n:function(t,i,n){if(e.get(i,"data.requiresDom")){var s=t.getSiteAspect("wixCodeMessageQueueAspect");if(s.shouldQueueMessage(i))return s.addMessageToQueue(i.data.requiresDom.compId,i,n),null;delete i.data.requiresDom}return i}(i,n,o)){var u=void 0;if(function(e){return e===a.MESSAGE_INTENT.WIX_CODE_MESSAGE}(n.intent))o(n,h(n,p(i)));else if(l(n.intent)){var c=e.defaults({},s,t.tpaHandlers);if(u=h(n,p(i)),c[n.type])try{c[n.type](i,n,u)}catch(e){u(null,e.message)}}else if(g(n.intent)){u=h(n,p(i));try{r.handleAppAPIMessage(i,n,u)}catch(e){u(null,e.message)}}}}function h(t,i){return function(n,s){var r={intent:"WIX_CODE_RESPONSE",callbackId:t.callbackId,type:t.type,contextId:t.contextId};r=l(t.intent)||g(t.intent)?e.merge(r,{result:n,error:s}):e.merge(r,{result:{compId:t.compId,command:t.command}});try{i.updateComponent(r)}catch(e){}}}return{handleMessage:function(t,i,n){f(t,i,n||e.partial(m,t))},modifyPostMessage:function(e,t){var i=e.getSiteData(),n=i.rendererModel.wixCodeModel,s=u.getWixCodeSpec(i.getClientSpecMap());return o.getExtendedMessage(t,n,s,i)},registerMessageHandler:function(t,i){c.widgetService.registerWidgetMessageHandler(t,e.partial(i,t))},registerMessageModifier:function(t,i){c.widgetService.registerWidgetMessageModifier(t,e.partial(i,t))},onMessage:f}}),define("wixCode/aspects/WixCodePostMessageAspect",["wixCode/aspects/wixCodePostMessageService"],function(e){"use strict";return function(t){this.siteAPI=t,e.registerMessageHandler(this.siteAPI,e.handleMessage),e.registerMessageModifier(this.siteAPI,e.modifyPostMessage)}}),define("wixCode/aspects/hooksHandlers/repeaterHooks",["lodash","coreUtils","siteUtils"],function(e,t,i){"use strict";function n(i,n,r){var a=this.siteAPI,o=n.value,u=a.getRuntimeDal().getCompPointer(i);!function(i,n,r){if(!e.isEmpty(r)){var a=i.getSiteData(),o=i.getPointers(),u=i.getRuntimeDal(),c=o.components.getPageOfComponent(n).id,d=o.full.components.getChildrenRecursively(n);e.forEach(d,function(n){var d=e.replace(i.getSiteDataAPI().document.getFullStructureProperty(n,"dataQuery"),"#",""),l=e.replace(i.getSiteDataAPI().document.getFullStructureProperty(n,"designQuery"),"#","");if(d){var g=e.defaults({},u.getCompDataOverrides(n.id),a.getDataByQuery(d,c));e.forEach(r,function(r){var u=t.displayedOnlyStructureUtil.getUniqueDisplayedId(n.id,r),l=s.cloneDataItemWithNewRefIdsRecursively(g,a.dataTypes.DATA,"_runtime_",a.getClonedDataItemsIdsMap(u));l.id=t.displayedOnlyStructureUtil.getUniqueDisplayedId(d,r);var p=s.getFlatMapOfNestedItem(l,a.dataTypes.DATA);e.forOwn(p,function(e){i.getDisplayedDAL().set(o.data.getDataItem(e.id,c),e)})})}if(l){var p=e.defaults({},u.getCompDesignOverrides(n.id),a.getDataByQuery(l,c,a.dataTypes.DESIGN));e.forEach(r,function(r){var u=t.displayedOnlyStructureUtil.getUniqueDisplayedId(n.id,r),d=s.cloneDataItemWithNewRefIdsRecursively(p,a.dataTypes.DESIGN,"_runtime_",a.getClonedDataItemsIdsMap(u));d.id=t.displayedOnlyStructureUtil.getUniqueDisplayedId(l,r);var g=s.getFlatMapOfNestedItem(d,a.dataTypes.DESIGN);e.forOwn(g,function(e){i.getDisplayedDAL().set(o.data.getDesignItem(e.id,c),e)})})}var m=u.getCompBehaviorsOverrides(n.id);e.isEmpty(m)||e.forEach(r,function(e){u.addActionsAndBehaviors(t.displayedOnlyStructureUtil.getUniqueDisplayedId(n.id,e),m)});var f=u.getCompPropsOverrides(n.id);e.isEmpty(f)||e.forEach(r,function(e){u.setCompProps(t.displayedOnlyStructureUtil.getUniqueDisplayedId(n.id,e),f)})})}}(a,u,e.difference(o.items,r.items));!function(i,n,r){if(!e.isEmpty(r)){var a=i.getSiteData(),o=i.getPointers(),u=o.components.getPageOfComponent(n).id,c=o.full.components.getChildrenRecursively(n);e.forEach(c,function(n){var c=e.replace(i.getSiteDataAPI().document.getFullStructureProperty(n,"dataQuery"),"#",""),d=e.replace(i.getSiteDataAPI().document.getFullStructureProperty(n,"designQuery"),"#",""),l=i.getRuntimeDal();e.forEach(r,function(r){var g=t.displayedOnlyStructureUtil.getUniqueDisplayedId(n.id,r);if(l.clearCompRuntimeOverrides(g),c){var p=t.displayedOnlyStructureUtil.getUniqueDisplayedId(c,r),m=a.getDataByQuery(p,u),f=s.getFlatMapOfNestedItem(m,a.dataTypes.DATA,!0);e.forOwn(f,function(e,t){i.getDisplayedDAL().remove(o.data.getDataItem(t,u))})}if(d){var h=t.displayedOnlyStructureUtil.getUniqueDisplayedId(d,r),w=a.getDataByQuery(h,u,a.dataTypes.DESIGN),I=s.getFlatMapOfNestedItem(w,a.dataTypes.DESIGN);e.forOwn(I,function(e,t){i.getDisplayedDAL().remove(o.data.getDesignItem(t,u))})}})})}}(a,u,e.difference(r.items,o.items)),a.getSiteDataAPI().createDisplayedNode(u)}var s=i.dataResolver;return{handleRepeaterDataChange:n}}),define("wixCode/aspects/hooksHandlers/matrixGalleryDataHook",["lodash","galleriesCommon","coreUtils"],function(e,t,i){"use strict";var n=t.utils.galleriesHelperFunctions,s=i.matrix.calculations;return{setCompLayoutOnDataChange:function(e,t,i){if("ImageList"===t.value.type){var r=this.siteAPI.getRuntimeDal(),a=r.getCompData(e),o=r.getCompProps(e),u=r.getCompLayout(e),c=r.getCompStructure(e),d=i.items,l=a.items,g=u.height,p=s.getAvailableRowsNumber(o.maxRows,o.numCols,d.length),m=s.getAvailableRowsNumber(o.maxRows,o.numCols,l.length),f=Math.max(n.MIN_GALLERY_HEIGHT,n.getGalleryHeight(p,m,o.margin,c.skin,g));r.updateCompLayout(e,{height:f})}}}}),define("wixCode/aspects/wixCodeChangeHooksAspect",["lodash","wixCode/aspects/hooksHandlers/repeaterHooks","wixCode/aspects/hooksHandlers/matrixGalleryDataHook"],function(e,t,i){"use strict";function n(t){this.siteAPI=t,this.DATA="dataChange",this.compsPlugin={dataChange:{}},this.registerListeners();var i=this.handleRuntimeDalCompChange.bind(this);t.getRuntimeDal().registerChangeListener(i),this.applySsrChanges=function(t){e.forEach(this.siteAPI.getSiteData().pendingRuntimeDalChanges,function(e){t(e.compId,e.changeObject,e.dataBeforeChange)})}.bind(this,i)}return n.prototype={getSiteAPI:function(){return this.siteAPI},getPlugin:function(e,t){return this.compsPlugin[e.type]&&this.compsPlugin[e.type][t]?this.compsPlugin[e.type][t]:null},handleRuntimeDalCompChange:function(e,t,i){var n=this.getSiteAPI().getRuntimeDal().getCompStructure(e);if(t&&n&&n.componentType){var s=this.getPlugin(t,n.componentType);s&&s.call(this,e,t,i)}},registerListeners:function(){this.registerCompListener(this.DATA,"wysiwyg.viewer.components.MatrixGallery",i.setCompLayoutOnDataChange),this.registerCompListener(this.DATA,"wysiwyg.viewer.components.Repeater",t.handleRepeaterDataChange)},registerCompListener:function(e,t,i){this.compsPlugin[e][t]=i}},n}),define("wixCode/aspects/wixCodeMessageQueueAspect",["lodash","utils","coreUtils","wixCode/aspects/wixCodePostMessageService"],function(e,t,i,n){"use strict";function s(e){this.aspectSiteAPI=e,this.siteAPI=e.getSiteAPI(),this.messageQueue=[],this._currentPageId=null,e.registerToDidLayout(this.flushQueue.bind(this)),e.registerToOnRendered(function(){this._currentPageId=this.siteAPI.getSiteData().getCurrentUrlPageId(),this.flushQueueOnRender()}.bind(this)),e.registerToUrlPageChange(function(){this._currentPageId=null}.bind(this))}function r(i,n){var s=e.keys(i.getComponentsByPageId(t.siteConstants.MASTER_PAGE_ID)),r=e.keys(i.getComponentsOnCurrentPage()),a=e.union(s,r);return e.includes(a,n)}return s.prototype={flushQueueOnRender:function(){e.forEach(this.messageQueue,function(t,s){!e.isNil(t)&&(t.compId===i.constants.COMP_IDS.WINDOW&&this._currentPageId===t.message.contextId)&&(delete t.message.data.requiresDom,n.onMessage(this.siteAPI,t.message,t.handler),this.messageQueue.splice(s,1))}.bind(this))},flushQueue:function(){e.forEach(this.messageQueue,function(e,t){e&&r(this.siteAPI,e.compId)&&(delete e.message.data.requiresDom,n.onMessage(this.siteAPI,e.message,e.handler),this.messageQueue.splice(t,1))}.bind(this))},addMessageToQueue:function(e,t,i){this.messageQueue.push({compId:e,message:t,handler:i})},shouldQueueMessage:function(t){var n=e.get(t,"data.requiresDom.compId"),s=e.get(t,"data.name");if(s===i.constants.ACTION_TYPES.UPDATE_VALIDITY_INDICATION||s===i.constants.ACTION_TYPES.SYNC_VALIDATION_DATA)return!1;return n===i.constants.COMP_IDS.WINDOW?this._currentPageId!==t.contextId:!r(this.siteAPI,n)}},s}),define("wixCode/aspects/wixCodeAspectCollector",["core","wixCode/aspects/WixCodeWidgetAspect","wixCode/aspects/WixCodePostMessageAspect","wixCode/aspects/wixCodeChangeHooksAspect","wixCode/aspects/wixCodeMessageQueueAspect"],function(e,t,i,n,s){"use strict";var r=e.siteAspectsRegistry;r.registerSiteAspect("wixCodeWidgetAspect",t),r.registerSiteAspect("wixCodePostMessageAspect",i),r.registerSiteAspect("wixCodeChangeHooksAspect",n),r.registerSiteAspect("wixCodeMessageQueueAspect",s)}),define("wixCode/utils/kibanaReporter",["lodash","utils"],function(e,t){"use strict";function i(s,d,m){if("undefined"!=typeof window&&(!function(){var t=e.get(window,"location.href","");return e.includes(t,"://localhost")}()||window.isMockWindow)){m||(m=1);var f=function(t){return e.flow(r,a,u,c,o,l,n,g,p)(t)}(s);(function(e,i){var n={type:"POST",url:e+"/logstash/events",dataType:"json",contentType:"application/json",data:JSON.stringify(i)};return new Promise(function(e,i){n.success=e,n.error=function(e,t,n){i({xhr:e,errorType:t,error:n})},t.ajaxLibrary.ajax(n)})})(d,f).then(w,function(){m>2?function(t){var i=window.localStorage.getItem("wixCodePendingMonitoring"),n=void 0;try{var s=i?JSON.parse(i):[];n=e.isArray(s)?s:[]}catch(e){n=[]}var r=JSON.stringify(n.concat(t));try{window.localStorage.setItem("wixCodePendingMonitoring",r)}catch(e){}}(f):i(s,d,m+1),w()})}}function n(t){if(!e.isError(t.message))return t;var i=t.message,n={};return i.stack?(n.stackTrace=i.stack,n.message=i.message):n.message=i.toString(),e.merge({},t,n)}function s(t){return e.isError(t)&&!!t.xhr}function r(t){if(!s(t.message))return t;var i=t.message.xhr.getResponseHeader("x-seen-by");return i?e.merge({},t,{params:{x_seen_by:i}}):t}function a(t){if(!s(t.message))return t;var i=function(e){var t=h.exec(e);if(t&&t[1])return t[1]}(d(t.message.xhr.responseText).errorDescription);return i?e.merge({},t,{requestId:i}):t}function o(t){if(!s(t.message))return t;var i=d(t.message.xhr.responseText).errorCode;return i&&e.includes(I,i)?e.merge({},t,{level:f.WARN}):t}function u(t){return function(t){return e.isError(t)&&"RequestAbortError"===t.name}(t.message)?e.merge({},t,{level:f.WARN}):t}function c(t){return function(t){return e.isError(t)&&"RequestTimeoutError"===t.name}(t.message)?e.merge({},t,{level:f.WARN}):t}function d(e){if(!e)return{};try{return JSON.parse(e)}catch(e){return{}}}function l(t){return t.message||t.level!==f.ERROR?t:e.merge({},t,{message:new Error(A)})}function g(t){return e.isString(t.message)?t:e.merge({},t,{message:JSON.stringify(t.message)})}function p(t){return e.merge({},t,{params:{url:e.get(window,"location.href","")}})}function m(n,s){!function(t){if(!e.isString(t)||0===t.length)throw new Error("parameter `baseUrl` is invalid, received: "+t)}(s);var r=new Date,a=r.getTime(),o=e.merge({},{source:"wix-code-client",level:f.INFO,userActionId:t.guidUtils.getGUID()},n,{timestamp:r.toJSON(),actionPosition:"start"});return i(o,s),function(t){var n=new Date,r=(n.getTime()-a)/1e3;i(t=e.merge({},o,t,{timestamp:n.toJSON(),duration:r,actionPosition:"end"}),s)}}var f={INFO:"info",WARN:"warn",ERROR:"error"},h=/\[request-id:\s(\d+\.\d+)\]/,w=e.noop,I=[-12,-15,-16],A="Message was not specified although level is error. See stack_trace";return{levels:f,trace:m,_setResponseCallback:function(t){w=t||e.noop}}}),define("wixCode/skins/skins.json",[],function(){"use strict";var e={};return e["wysiwyg.viewer.skins.WixCodeWidgetSkin"]={react:[["iframe","iframe",[],{}]],css:{"% iframe":"display:none;"}},e}),define("wixCode",["wixCode/utils/wixCodeWidgetService","wixCode/aspects/wixCodeAspectCollector","wixCode/utils/messageBuilder","wixCode/utils/kibanaReporter","wixCode/aspects/wixCodePostMessageService","skins","wixCode/skins/skins.json"],function(e,t,i,n,s,r,a){"use strict";return r.skinsMap.addBatch(a),{wixCodeWidgetService:e,log:n,messageBuilder:i,wixCodePostMessageService:s}});
//# sourceMappingURL=wixCode.min.js.map