var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};define("siteUtils/utils/mobileUtils",[],function(){"use strict";var e=12,t={26:26,27:26,28:26,29:27,30:27,31:27,32:28,33:28,34:28,35:29,36:29,37:29,38:30,39:30,40:30,41:31,42:31,43:31,44:32,45:32,46:32,47:33,48:33,49:33,50:34,51:34,52:34,53:35,54:35,55:35,56:36,57:36,58:36,59:37,60:37,61:37,62:38,63:38,64:38,65:39,66:39,67:39,68:40,69:40,70:40,71:41,72:41,73:41,74:42,75:42,76:42,77:43,78:43,79:43,80:44,81:44,82:44,83:45,84:45,85:45,86:46,87:46,88:46,89:47,90:47,91:47,92:48,93:48,94:48,95:49,96:49,97:49,98:50,99:50,100:50};return{getMobileFontSize:function(i){var n=e,r=Math.round(i);return r<n?n:r<=14?r+1:r<=25?r:r<=100?t[r]:50},convertFontSizeToMobile:function(e,t){return t*this.getMobileFontSize(e)},getMinFontSize:function(){return e}}}),define("siteUtils/utils/touchMediaZoomUtils",["lodash","coreUtils"],function(e,t){"use strict";function i(e,t){return t*(1+e)}function n(e,t){return t*(1+e)+e}function r(e,t){return t*(1+e)+2*e}function o(i,n,r){var o=s.fittingTypes.SCALE_TO_FIT;i.width||(i.width=a.width),i.height||(i.height=a.height);var u={id:i.uri,width:i.width,height:i.height},c=function(e,t){var i=Math.min(t.width/e.width,1),n=Math.min(t.height/e.height,1),r=Math.min(i,n);return{width:Math.round(e.width*r),height:Math.round(e.height*r)}}(e.pick(i,["width","height"]),n.screenSize),l={width:Math.round(c.width*(r||1)),height:Math.round(c.height*(r||1))},d={width:l.width,height:l.height,alignment:s.alignTypes.CENTER,htmlTag:"img",pixelAspectRatio:n.pixelAspectRatio},g=e.defaults({quality:85},i.quality||{}),h=s.getData(o,u,d,g,n.browser);return e.assign(h.css.img,c,{objectFix:"internal"}),function(e){return!e||t.urlUtils.isExternalUrl(e)}(h.uri)||e.assign(h,{uri:t.urlUtils.joinURL(n.staticMediaUrl,h.uri)}),h}var s=t.imageClientApi,a={width:320,height:400};return{createStageData:function(e){return{leftPart_leftMargin:i(e,0),leftPart_begin:n(e,0),leftPart_rightMargin:r(e,0),centerPart_leftMargin:i(e,1),centerPart_begin:n(e,1),centerPart_rightMargin:r(e,1),rightPart_leftMargin:i(e,2),rightPart_begin:n(e,2),rightPart_rightMargin:r(e,2),fullWidth:n(e,3)}},getImageApiData:o}}),define("siteUtils/svgShapes/svgFeatureDetection",["lodash"],function(e){"use strict";var t={isVectorEffect:!1};return"undefined"!=typeof window&&function(e){e.isVectorEffect="vectorEffect"in window.document.documentElement.style}(t),{flags:function(){return e.clone(t)}}}),define("siteUtils/core/MobileDeviceAnalyzer",["lodash"],function(e){"use strict";function t(t){this.requestModel=t,e.bindAll(this,e.functionsIn(this))}var i={MOBILE:"smartphone",TABLET:"tablet",DESKTOP:"desktop",OTHER:"other"},n=1e-4,r="",o=null;return t.prototype={isMobileDevice:function(){if(this.isWindowUnavailable()||this.isSSSR()){return e.result(this,"requestModel.deviceType.toLowerCase")===i.MOBILE}return(this.isLandscape()?this.getScreenHeight():this.getScreenWidth())<600&&(this.isTouchScreen()||this.isMSMobileDevice())},isTabletDevice:function(){if(this.isWindowUnavailable()||this.isSSSR())return!(!this.requestModel||!this.requestModel.deviceType||this.requestModel.deviceType.toLowerCase()!==i.TABLET);var t=this.isPortrait()?this.getScreenHeight():this.getScreenWidth();return!this.isMobileDevice()&&t>=600&&t<=1280&&!e.get(window,["rendererModel","previewMode"],!1)&&this.isTouchScreen()&&!this.isWindowsTablet()},getWindowScreenWidth:function(){return window.screen.width},isWindowsTablet:function(){return/windows/i.test(window.navigator.userAgent.toLowerCase())},getScreenWidth:function(){var e=this._getDeviceParamsByUserAgent();return e?e.width:NaN},getScreenHeight:function(){var e=this._getDeviceParamsByUserAgent();return e?e.height:NaN},isAppleMobileDevice:function(){return/iphone|ipod|ipad|Macintosh/i.test(this.requestModel.userAgent)},isMSMobileDevice:function(){return/iemobile/i.test(this.requestModel.userAgent)},isAndroidMobileDevice:function(){return/android/i.test(this.requestModel.userAgent)},cannotHideIframeWithinRoundedCorners:function(){return function(e){var t=e.match(/applewebkit\/([\d\.]+)/i),i=void 0,n=void 0,r=void 0,o=void 0;return t?(i=t[1].split("."),n=+(i[0]||0),r=+(i[1]||0),o=+(i[2]||0),1e4*n+100*r+o):NaN}(this.requestModel.userAgent)<537e4},isNewChromeOnAndroid:function(){if(this.isAndroidMobileDevice()){var e=this.requestModel.userAgent.toLowerCase();if(/chrome/.test(e)){var t=(e=e.replace("chrome / ","chrome/")).split("chrome/")[1].split(" ")[0].split(".")[0];if(parseInt(t,10)>=29)return!0}}return!1},isTouchScreen:function(){return this.isWindowUnavailable()?this.isMobileDevice()||this.isTabletDevice():!!("ontouchstart"in window||window.DocumentTouch&&window.document instanceof DocumentTouch)},isLandscape:function(){return!this.isPortrait()},isPortrait:function(){if(this.isWindowUnavailable())return!0;if(window.screen&&this.isTopWindow()){var t=window.screen.orientation;if(t)return t.type?e.startsWith(t.type,"portrait"):0===t.angle||180===t.angle}return this.isPortraitByScreenSize()},isPortraitByScreenSize:function(){return!!this.isWindowUnavailable()||window.innerHeight>window.innerWidth},isAndroidOldBrowser:function(){var e=this.isNewChromeOnAndroid(),t=/opr/i.test(this.requestModel.userAgent);return this.isAndroidMobileDevice()&&!e&&!t},getDevicePixelRatio:function(){return this.isWindowUnavailable()?2:this.isMSMobileDevice()?Math.round(window.screen.availWidth/(window.screen.width||window.document.documentElement.clientWidth)):window.devicePixelRatio},getInitZoom:function(){return this.isWindowUnavailable()?1:this.getScreenWidth()/window.document.body.offsetWidth},getZoom:function(){if(this.isWindowUnavailable())return 1;return this.getScreenWidth()/this.getWindowInnerWidth()},isZoomed:function(){return!this.isWindowUnavailable()&&!function(e,t){return Math.abs(e-t)<n}(this.getZoom(),this.getInitZoom())},isZoomedIn:function(){return!this.isWindowUnavailable()&&function(e,t){return e>t+n}(this.getZoom(),this.getInitZoom())},getMobileZoomByScreenProperties:function(){if(this.isWindowUnavailable())return 1;var e=1,t=this.getScreenDimensions(),i=Math.max(t.width,t.height),n=Math.min(t.width,t.height);return this.isMobileDevice()&&!this.isPortraitByScreenSize()&&(e=n/i),e},getSiteZoomRatio:function(){if(this.isWindowUnavailable())return 1;return 320/window.screen.width},getInvertedZoomRatio:function(){return this.isWindowUnavailable()?1:1/this.getZoom()},getOrientationZoomFixRation:function(){return this.getInitZoom()/this.getZoom()},getZoomRatioForNonOptimizedSites:function(){return this.isWindowUnavailable()?1:window.innerWidth/320},_getDeviceParamsByUserAgent:function(){var t=e.get(this.requestModel,["userAgent"],"");if(this.isWindowUnavailable()||!t)return null;var i=void 0,n=void 0,s=this.getScreenDimensions();if(/iemobile/i.test(t))i=s.width||window.document.documentElement.clientWidth,n=s.height||window.document.documentElement.clientHeight;else{var a=function(e){if(e!==r)switch(r=e,!0){case/(GT-S5300B|GT-S5360|GT-S5367|GT-S5570I|GT-S6102B|LG-E400f|LG-E400g|LG-E405f|LG-L38C|LGL35G)/i.test(e):o={width:240,height:320};break;case/(Ls 670|GT-S5830|GT-S5839i|GT-S6500D|GT-S6802B|GT-S7500L|H866C|Huawei-U8665|LG-C800|LG-MS695|LG-VM696|LGL55C|M865|Prism|SCH-R720|SCH-R820|SCH-S720C|SPH-M820-BST|SPH-M930BST|U8667|X501_USA_Cricket|ZTE-Z990G)/i.test(e):o={width:320,height:480};break;case/(5860E|ADR6300|ADR6330VW|ADR8995|APA9292KT|C771|GT-I8160|GT-I9070|GT-I9100|HTC-A9192|myTouch4G|N860|PantechP9070|PC36100|pcdadr6350|SAMSUNG-SGH-I727|SAMSUNG-SGH-I777|SAMSUNG-SGH-I997|SC-03D|SCH-I405|SCH-I500|SCH-I510|SCH-R760|SGH-S959G|SGH-T679|SGH-T769|SGH-T959V|SGH-T989|SPH-D700)/i.test(e):o={width:480,height:800};break;case/(DROIDX|SonyEricssonSO-02C|SonyEricssonST25i)/i.test(e):o={width:480,height:854};break;case/(DROID3|MB855)/i.test(e):o={width:540,height:960};break;case/F-05D/i.test(e):o={width:720,height:1280};break;default:o=null}return o}(t);a?(i=a.width,n=a.height):this.isPortrait()?(i=Math.min(s.width,s.height),n=Math.max(s.width,s.height)):(i=Math.max(s.width,s.height),n=Math.min(s.width,s.height))}return{width:i,height:n}},getScreenDimensions:function(){return this.isWindowUnavailable()?{width:0,availWidth:0,height:0,availHeight:0}:{width:window.screen.width,availWidth:window.screen.availWidth,height:window.screen.height,availHeight:window.screen.availHeight}},isWindowUnavailable:function(){return"undefined"==typeof window},isTopWindow:function(){var e=void 0;try{e=window.self===window.top}catch(t){e=!1}return this.isTopWindow=function(){return e},e},isSSSR:function(){return"undefined"!=typeof window&&!e.get(window,"clientSideRender",!0)},getWindowInnerWidth:function(){return window.innerWidth}},t}),define("siteUtils/core/dataRefs.json",[],function(){return{Data:{BackgroundMedia:{mediaRef:!1,imageOverlay:!1},WixVideo:{posterImageRef:!1},Document:{mainPage:!1,pages:!1,appStudioData:!1},SiteMembersData:{termsOfUse:{link:!1},privacyPolicy:{link:!1},codeOfConduct:{link:!1}},appStudioData:{widgets:!1},Header:{image:!1},Image:{link:!1,originalImageDataRef:!1},Bgimagestrip:{originalImageDataRef:!1},StripContainer:{background:!1},ImageList:{items:!1},LinkList:{items:!1},AnchorLink:{anchorDataId:!0,pageId:!1},PageLink:{pageId:!1},MediaRichText:{linkList:!1,componentDataList:!1},MenuItem:{refId:!1},Page:{pageBackgrounds:{desktop:{ref:!1},mobile:{ref:!1}}},RichTextImage:{text:!1,image:!1},Service:{image:!1},ServiceList:{items:!1},QuickActionBarItem:{link:!1},BasicMenuItem:{link:!1,items:!1,iconRef:!1},CustomMenu:{items:!1},Menu:{items:!1},CustomMenusCollection:{menus:!1},CustomMenuDataRef:{menuRef:!1},MenuDataRef:{menuRef:!1},ImageButton:{link:!1,defaultImage:!1,hoverImage:!1,activeImage:!1},SubscribeForm:{link:!1},ContactForm:{link:!1},DynamicContactForm:{link:!1},FlashComponent:{placeHolderImage:!1},LinkableFlashComponent:{link:!1,placeHolderImage:!1},LinkableButton:{link:!1},TinyMenu:{loginSocialBarRef:!1},LoginSocialBar:{menuItemsRef:!1,iconItemsRef:!1},MenuData:{menuButton:!1,pages:!1},PagesGroupCollection:{groups:!1},PermaLink:{dataItemRef:!1,correctPermaLinkRef:!1},SelectableList:{options:!1},RadioGroup:{options:!1},StyledText:{linkList:!1},StyledTextLinkHelper:{link:!1},SvgShape:{link:!1},VectorImage:{link:!1},Table:{items:!1,header:!1,footer:!1},Video:{posterImage:!1},TPAWidget:{tpaData:!1},TPA:{tpaData:!1},TPASection:{tpaData:!1},TPAMultiSection:{tpaData:!1},RssButton:{image:!1,link:!1},AppPage:{pageBackgrounds:{desktop:{ref:!1},mobile:{ref:!1}}},StripContainerSlideShowSlide:{background:!1},ImageButtonWithText:{icon:!1}},Design:{MediaContainerDesignData:{background:!1},MediaPlayerDesignData:{background:!1},BackgroundMedia:{mediaRef:!1,imageOverlay:!1},WixVideo:{posterImageRef:!1},Video:{posterImage:!1},Image:{link:!1,originalImageDataRef:!1},MediaControlsDesignData:{iconsDefaultDesign:!1,icons:!1},ControlIconDesignData:{iconDesign:!1}},Properties:{ColumnProperties:{background:!1}}}}),define("siteUtils/customDataResolvers/imageDataResolver",["lodash"],function(e){"use strict";var t=["quality","unsharpMask"];return{resolve:function(i,n){var r={};i.link&&(r.link=n(i.link)),i.originalImageDataRef&&(r.originalImageDataRef=n(i.originalImageDataRef));var o=e.pick(n("IMAGE_QUALITY"),t);return e.isEmpty(i.quality)&&!e.isEmpty(o)&&(r.quality=o),e.isEmpty(r)?i:e.defaults(r,i)}}}),define("siteUtils/customDataResolvers/pageLinkDataResolver",["lodash"],function(e){"use strict";return{resolve:function(t,i){return e.defaults({pageId:i(t.pageId,"masterPage")},t)}}}),define("siteUtils/customDataResolvers/anchorLinkDataResolver",["lodash"],function(e){"use strict";return{resolve:function(t,i){var n=e.startsWith(t.pageId,"#")?t.pageId.replace("#",""):t.pageId,r=i(t.anchorDataId,n),o=i(t.pageId,"masterPage"),s=e.pickBy({anchorDataId:r,pageId:o});return e.defaults(s,t)}}}),define("siteUtils/customDataResolvers/connectionListDataResolver",["lodash"],function(e){"use strict";return{resolve:function(t){var i=e.map(e.get(t,"items"),function(t){return e.has(t,"config")?e.assign({},t,{config:JSON.parse(t.config)}):t});return e.assign({},t,{items:i})}}}),define("siteUtils/customDataResolvers/appControllerDataResolver",["lodash"],function(e){"use strict";return{resolve:function(t){return e.has(t,"settings")?e.assign({},t,{settings:JSON.parse(t.settings)}):t}}}),define("siteUtils/customDataResolvers/behaviorsListDataResolver",["lodash"],function(e){"use strict";return{resolve:function(t){var i=e.get(t,"items");return e.isString(i)?e.assign({},t,{items:JSON.parse(i)}):t}}}),define("siteUtils/customDataResolvers/customDataResolvers",["lodash","siteUtils/customDataResolvers/imageDataResolver","siteUtils/customDataResolvers/pageLinkDataResolver","siteUtils/customDataResolvers/anchorLinkDataResolver","siteUtils/customDataResolvers/connectionListDataResolver","siteUtils/customDataResolvers/appControllerDataResolver","siteUtils/customDataResolvers/behaviorsListDataResolver"],function(e,t,i,n,r,o,s){"use strict";return{Image:t,PageLink:i,AnchorLink:n,ConnectionList:r,AppController:o,ObsoleteBehaviorsList:s}}),define("siteUtils/core/dataResolver",["lodash","coreUtils","siteUtils/core/dataRefs.json","siteUtils/customDataResolvers/customDataResolvers"],function(e,t,i,n){"use strict";function r(t,i){var n=function(t,i){return e.invoke(t.resolvedDataMaps,"has",i),t.pagesData[i]}(t,i);return e.has(n,"data")}function o(t,n,r,s,a,u){function c(e){return null===e.id?e.data:"#"+e.id}if("object"!==(void 0===t?"undefined":_typeof(t))||null===t)return{id:null,data:t};if(s&&"Page"===e.get(t,["type"]))return{id:t.id};var l=t.id||u||e.uniqueId("resolver_"),g=i[d[n]],h=e.isUndefined(a)||e.isBoolean(a),p=a;if(h){if(e.isArray(t))return e.map(t,function(e,t){return o(e,n,r,s,a,l+"_"+t)});if(!t.type)throw new Error("we need a type to resolve a data item",t);p=e.get(g,t.type,{})}var f={};e.forOwn(p,function(i,a){if(!e.isUndefined(t[a])){var u=o(t[a],n,r,s,i,l+"_"+a);f[a]=e.isArray(u)?e.map(u,c):c(u)}});var m=e.isEmpty(f)?t:e.defaults(f,t);return h&&(m.id||(m=e.defaults({id:l},m)),r[l]=m),{id:m.id||null,data:m}}function s(e){return!e||!0===e}function a(t,r,o,u,c,l,h){var p=i[d[c]],f=null;if(e.isUndefined(l))return null;if(e.isPlainObject(l)){if(e.has(n,l.type))f=function(t,i,r,o,s){return e.get(n,[t.type,"resolve"])(t,function(e,t){return a(o,r,"masterPage"===(t=t||i)?r:g,t,s,e)})}(l,u,r,t,c);else{if(h=s(h)?e.get(p,l.type):h,s(h))return l;f=e.transform(h,function(i,n,s){if(e.has(l,s)){var d=a(t,r,o,u,c,l[s],n);i[s]=d||!0!==n?d:l[s]}},{})}return e.defaults(f,l)}if(e.isArray(l))return e.map(l,function(e){return a(t,r,o,u,c,e)});e.startsWith(l,"#")&&(l=l.slice(1));var m=[u].concat(o),y=e(m).map(function(i){var n=e.get(e.invoke(t.resolvedDataMaps,"get",i),[c]);return n&&n.get(l)}).compact().head();return y?y.get():(f=e.get(t.pagesData,[u,"data",c,l]))||(e.forEach(o,function(i){return!(f=e.get(t.pagesData,[i,"data",c,l]))}),f)?f=a(t,r,o,u,c,f,h):null}function u(t,i,n){var r=n[t];return r||(r=e.uniqueId(i),n[t]=r),t+r}function c(t,i,n,r){var o=l(i,t.type);if(o){var s=e.keys(o);e.forEach(s,function(o){var s=t[o];s&&e.isArray(s)&&e.forEach(s,function(s,a){if(s.id&&!e.includes(s.id,n)){var l=t[o][a];l.id=u(s.id,n,r),t[o][a]=c(l,i,n,r)}}),s&&e.isObject(s)&&s.id&&!e.includes(s.id,n)&&(t[o].id=u(s.id,n,r),t[o]=c(t[o],i,n,r))})}return t}function l(t,n){if(e.includes(["AnchorLink","PageLink","linkList","StyledText"],n))return null;var r=i[d[t]];return r?r[n]||null:null}var d={component_properties:"Properties",document_data:"Data",design_data:"Design"},g=["masterPage"];return{getDataByQuery:function(e,t,i,n,o){return r(e,i)?a(e,t,"masterPage"===i?t:["masterPage"],i,n,o,null):null},getFlatMapOfNestedItem:function(e,t,i){var n={};return o(e,t,n,!!i),n},cloneDataItemWithNewRefIdsRecursively:function(e,i,n,r){return c(t.objectUtils.cloneDeep(e),i,n,r)},getDataRefsForDataItems:l}}),define("siteUtils/core/pagesUrlUtils",["lodash","coreUtils","experiment"],function(e,t,i){"use strict";function n(n){var r=n.urlFormatModel||{};i.isOpen("urlFormat",n)?r.format=t.siteConstants.URL_FORMATS.SLASH:r.format=r.format||t.siteConstants.URL_FORMATS.HASH_BANG,r.forbiddenPageUriSEOs=function(t){return e.isArray(t)?e.zipObject(t,e.times(t.length,e.constant(!0))):t}(r.forbiddenPageUriSEOs||[]),r.pageIdToResolvedUriSEO=r.pageIdToResolvedUriSEO||{},n.urlFormatModel=r}function r(t,i){return e.map(t.topology,function(e){return e.baseUrl+e.parts.replace("{filename}",i)})}return{ensureUrlFormatModel:n,getMapFromPageUriSeoToPageId:function(i){return e.has(i,["publicModel","pageList"])?e(i.publicModel.pageList.pages).keyBy(function(n){return e.get(i,["urlFormatModel","pageIdToResolvedUriSEO",n.pageId,"curr"])||e.get(n,"pageUriSEO")||t.siteConstants.DEFAULT_PAGE_URI_SEO}).mapValues("pageId").value():{}},getPageURLs:function(t,i){var n=e.find(t.pages,{pageId:i});if(n)return r(t,n.pageJsonFileName)},getMasterPageURLs:function(e){return r(e,e.masterPageJsonFileName)}}}),define("siteUtils/core/browserFlags",[],function(){"use strict";return{create:function(e){var t=e.os,i=e.browser;return t&&i?{highlightAnchorsInMenu:!(t.ipad&&i.chrome),fixedSiteBackground:!t.tablet&&!t.phone||t.ipad&&i.safari||(i.ie||i.edge)&&t.tablet,animateRevealScrubAction:!!(i.ie||i.edge||i.firefox),animateParallaxScrubAction:!!i.edge,animateTinyMenuIcon:!(i.safari&&t.mac),preserve3DParallaxScrubAction:!(i.safari&&i.version>=9||i.firefox),positionFixedShouldBeAbsoluteAtPageBottom:t.ios&&t.version&&+t.version.split(".")[0]>=11&&(i.safari||i.chrome),clipParallaxWithWebkitClipPath:i.safari,fixedBackgroundColorBalata:!(!i.chrome&&!i.firefox),forceOverflowScroll:!!t.iphone,fixOverflowScrollEdges:t.iphone||i.safari,doubleResetMobileViewport:e.tpaMobileViewportFix&&i.chrome&&!t.iphone&&!t.ipad,playMobileVideoInline:!(t.iphone&&t.version<10),shouldDisableSmoothScrolling:!(!i.chrome&&!i.edge),mixBlendModeSupported:!(i.ie||i.edge),cssFiltersSupported:!(i.ie||i.edge)}:{}}}}),define("siteUtils/core/ViewPortBatchedImageLoader",["lodash","loggingUtils"],function(e,t){"use strict";function i(t){var i=t,n=!i.oldSrc&&i.src;return!t.resizeHandler||n?(r(i),t.resizeHandler=e.debounce(r,d,{trailing:!0})):t.resizeHandler(i),i.promise}function n(e,t,i){var n=e.patchers,r=e.id+l,o=e.src;e.cancel=function(){i({canceled:!0})},o&&n.events(r,{onload:t,onerror:i}),e.isSvg?n.attrNS(r,[{ns:"http://www.w3.org/1999/xlink",attribute:"xlink:href",value:o}]):n.attr(r,{src:o}),o||t()}function r(t){return t.src!==t.oldSrc?(t.cancel&&t.cancel(),t.promise=function(t){return new Promise(e.partial(n,t)).catch(function(e){return e&&e.canceled?Promise.resolve(e):Promise.reject(e)})}(t)):t.promise||(t.promise=Promise.resolve()),t.promise}function o(e){return new Promise(function(t){return e.then(t).catch(t)})}function s(e,t,i){var n=e().height;return{viewPort:{startIndex:g(i.absoluteTop,n),endIndex:h(i.absoluteTop,i.height,n),isInCurrentViewPort:function(e,t,i){var n=t+i,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=r+e;return t>=r&&t<=o||n>=r&&n<=o||t<=r&&n>=o}(n,i.absoluteTop,i.height,t)},imageData:i}}function a(e,t){return e.ranker(s(e.getScreenSize,e.scrollTop,t),function(e,t){var i=e();return{viewPort:{index:g(t,i.height),size:i}}}(e.getScreenSize,e.scrollTop))}function u(e,t){return e.isImageInFirstUserViewPort(s(e.getScreenSize,e.scrollTop,t))}function c(e,t,i,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;this.nextId=0,this.images={},this.numberOfRanksToLoad=n,this.scrollTop=r,this.getScreenSize=e,this.ranker=i,this.isImageInFirstUserViewPort=t}var l="image",d=250,g=function(e,t){return Math.floor(e/t)},h=function(e,t,i){return Math.floor((e+t)/i)};return c.prototype={loadImage:function(t){var n=t.id;(t.src||t.currentSrc)&&(this.images[n]=e(this.images[n]).assign(e.pick(t,["src","isSvg","id","patchers","height","absoluteTop"])).assign({oldSrc:t.currentSrc,rank:a(this,t)}).value(),-1===this.images[n].rank&&(this.images[n].promise=i(this.images[n])))},removeImage:function(e){var t=this.images[e];t&&(t.cancel&&t.cancel(),t.resizeHandler&&t.resizeHandler.cancel(),delete this.images[e])},loadAllImages:function(i){return t.imagesBi(i,e.filter(this.images,e.partial(u,this))),this.lastReRankId=this.getNextRankingId(),Promise.all(e(this.images).filter(["rank",-1]).map("promise").map(o).value()).then(this.loadNextBatch.bind(this,this.numberOfRanksToLoad,this.lastReRankId,-1))},loadNextBatch:function(t,n,r){var s=this,a=e.filter(this.images,function(e){return e.rank>r});if(0===e.size(a)||t<=0)return Promise.resolve();var u=Math.min.apply(null,e(a).values().map("rank").value());return Promise.all(e(a).values().filter(["rank",u]).map(i).map(o).value()).then(function(){if(n===s.lastReRankId)return s.loadNextBatch(t-1,n,u)})},getNextRankingId:function(){return this.nextId++},forceReRank:function(t,i,n){return this.ranker=i,void 0!==n&&(this.scrollTop=n),this.images=function(t,i){return e.mapValues(i,function(e){return e.rank=t(e),e})}(e.partial(a,this),this.images),this.loadAllImages(t)}},Object.defineProperty(c,"IMMEDIATE_LOAD_RANK",{value:-1,writable:!1}),c}),define("siteUtils/core/ViewPortImageLoader",["lodash","siteUtils/core/ViewPortBatchedImageLoader"],function(e,t){"use strict";var i=function(e){return 0===e.viewPort.startIndex};return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new t(e,i,function(e){return e.viewPort.isInCurrentViewPort?t.IMMEDIATE_LOAD_RANK:1},1,n)}}),define("siteUtils/core/siteStructureRmiUtils",["lodash"],function(e){"use strict";function t(t){return e.map(function(t){return e.filter(t,function(e){return"public"===e.type||"wixapps"===e.type})}(t),function(e){return{name:e.appDefinitionName,applicationId:e.appDefinitionId}})}function i(t){return function(t){return e.map(t,function(e){return{name:e.value,type:e.type,id:e.id,prefix:"/"+e.value}})}(o(t))}function n(t,i){var n=function(t,i){var n=e.map(t.pages,"pageId");return e.map(n,function(e){return i(e)})}(t,i),r=e.filter(n,{isPopup:!0});return e.map(r,function(e){return{name:e.title,id:e.id}})}function r(t,i,n,r,s){var u=e.filter(t,function(e){return!i(e.id)}),c=o(r),g=e.map(u,function(t){return function(t,i,n,r){var o=t.pageUriSEO,s=t.tpaApplicationId||t.appInnerID,u={name:t.title,id:t.id,type:d};o&&!e.startsWith(o,"blank")&&(u.url="/"+t.pageUriSEO);if(s){u.type=l;var c=r[s];if(u.applicationId=e.get(c,"appDefinitionId"),t.tpaApplicationId&&!a(c))return null}n&&(u.type=l,u.prefix=n.value);u.id===i&&(u.isMainPage=!0);return u}(t,n,c[t.id],s)});return e.compact(g)}function o(t){var i=e.reduce(t.configMap,function(t,i,n){var r=e.values(i.pages);return e.forEach(r,function(e){t[e]={value:i.prefix,id:n,type:function(e){return"wix-code"===e.appDefinitionId?u:c}(i)}}),t},{});return t?i:{}}function s(e){var t=e.published,i=e.santaEditorPublished;return t||i}function a(t){var i=function(t){var i=t&&t.widgets;return i=e.filter(i,function(t){return!e.isNil(t.appPage)}),e.filter(i,s)}(t);return e.some(i,function(e){return!e.appPage.hidden})}var u="router",c="dynamicPages",l="template",d="static",g="app";return{getPageList:function(t,i){return t?e.get(t,["pageList"]):{pages:e.reject(e.map(i,function(e){return{pageId:e.structure.id}}),{pageId:"masterPage"})}},getPages:r,getApps:t,getRouterPrefixes:i,getAppPrefixes:function(t){var i=e.filter(t,"applicationId");return e.map(i,function(e){return{name:e.name,type:g,prefix:e.url,applicationId:e.applicationId}})},getLightboxes:n,getMainPageId:function(t,i){return e.get(t,["pageList","mainPageId"])||e.get(i,["mainPage","id"])||e.get(i,"mainPageId")||"mainPage"},clientSpecMap:{hasMainSection:a}}}),define("siteUtils/core/SiteDataRmi",["lodash","coreUtils","siteUtils/core/siteStructureRmiUtils"],function(e,t,i){"use strict";var n=["lightbox"];return{bind:["getPageDataForRmi","getNavigationDataRmi","getSiteStructureForRmi","getSMbySiteExtensionInstanceForRmi","getSessionInfoForRmi"],getNavigationDataRmi:function(){var i=!this.documentServicesModel||this.documentServicesModel.isPublished,n="http://yoursitename.wixsite.com/yoursitename",r=t.urlUtils.toQueryString(this.getQueryParams());r&&(n=n+"?"+r);var o=this.getPrimaryPageId(),s=this.getRootNavigationInfo(),a=this.getPublicBaseUrl(),u=this.getCurrentPageSEOMetaData(o),c={currentPageId:o,currentNavigationInfo:s,baseUrl:a,currentPageFullUrl:n,currentUrlPageTitle:this.getCurrentUrlPageTitle(),currentPageSEODescription:u.description||"",currentPageSEOKeywords:u.keywords||""};return i&&(this.isDynamicPage(o)?c.currentPageFullUrl=this.getPageUrl(s,null,a,!1):c.currentPageFullUrl=this.getPageUrl({pageId:o,title:this.getDataByQuery(o).title,tpaInnerRoute:e.get(c.currentNavigationInfo,"tpaInnerRoute")},null,a,!1)),c},getPageDataForRmi:function(){var e=this.getPrimaryPageId(),t=this.getRootNavigationInfo(),i=this.getCurrentPageSEOMetaData(e);return{currentNavigationInfo:t,currentUrlPageTitle:this.getCurrentUrlPageTitle(),currentPageSEODescription:i.description||"",currentPageSEOKeywords:i.keywords||""}},getSiteStructureForRmi:function(){var e=i.getPageList(this.publicModel,this.pagesData),t=this.routers||{},n=i.getMainPageId(this.publicModel,this.getDataByQuery("masterPage")),r=i.getPages(this.getPagesDataItems(),this.isPopupPage,n,t,this.getClientSpecMap()),o=i.getLightboxes(e,this.getDataByQuery),s=i.getRouterPrefixes(t),a=i.getAppPrefixes(r);return{pages:r,prefixes:s.concat(a),lightboxes:o}},getSMbySiteExtensionInstanceForRmi:function(){var i="undefined"!=typeof window?window.atob:atob,n=this.getClientSpecMapEntriesByType("siteextension")[0]||{};if(e.isEmpty(n)){var r=e.filter(this.getClientSpecMap(),function(e){return t.coreTpaUtils.isTpaByAppType(e.type)});n=e.head(e.filter(r,"instance"))||{}}var o=n.instance||"",s=void 0;try{s=JSON.parse(i(o.split(".")[1]||"")||' {"uid": null, "permissions": null}')||{uid:null,permissions:null}}catch(e){s={uid:null,permissions:null}}return{uid:s.uid||s.sessionUId||null,permissions:s.permissions||null}},getSessionInfoForRmi:function(){return{svSession:this.getSvSession()}},getQueryParams:function(){return e.omit(this.currentUrl.query,n)},getAppsDataForRmi:function(){var t=this.getClientSpecMap(),i=e.filter(t,function(t){return e.has(t,"appFields.platform")||"siteextension"===t.type});return e.reduce(i,function(e,t){return e[t.appDefinitionId]={appDefinitionId:t.appDefinitionId,applicationId:t.applicationId,instance:t.instance,instanceId:t.instanceId,type:t.type},e},{})}}}),define("siteUtils/core/SiteDataRgi",["lodash","coreUtils"],function(e,t){"use strict";function i(i){var n=e.get(i,"pageId")||this.getPrimaryPageId(),r=i||this.getRootNavigationInfo();return{currentPageId:n,routerDefinition:r.routerDefinition,baseUrl:this.getPublicBaseUrl(),currentPageFullUrl:function(i,n){var r=void 0;if(!this.documentServicesModel||this.documentServicesModel.isPublished){var o=this.getPublicBaseUrl();r=this.isDynamicPage(i)?this.getPageUrl(n,null,o,!1):this.getPageUrl({pageId:i,title:this.getDataByQuery(i).title,tpaInnerRoute:e.get(n,"tpaInnerRoute")},null,o,!1)}else{var s=t.urlUtils.toQueryString(this.getQueryParams());r=s?"http://yoursitename.wixsite.com/yoursitename?"+s:"http://yoursitename.wixsite.com/yoursitename"}return r}.call(this,n,r)}}function n(e,n){return e?function(){var e=t.wixUrlParser.parseUrl(this,this.currentUrl.full);return{currentPageId:e.pageId,routerDefinition:e.routerDefinition,baseUrl:this.getPublicBaseUrl(),currentPageFullUrl:this.currentUrl.full}}.call(this):i.call(this,n)}return{bind:["getNavigationDataForRgi","getSMbySiteExtensionInstanceForRgi","getSessionInfoForRgi"],getNavigationDataForRgi:n,getSMbySiteExtensionInstanceForRgi:function(){var i="undefined"!=typeof window?window.atob:atob,n=this.getClientSpecMapEntriesByType("siteextension")[0]||{};if(e.isEmpty(n)){var r=e.filter(this.getClientSpecMap(),function(e){return t.coreTpaUtils.isTpaByAppType(e.type)});n=e.head(e.filter(r,"instance"))||{}}var o=n.instance||"",s=void 0;try{s=JSON.parse(i(o.split(".")[1]||"")||' {"uid": null, "permissions": null}')||{uid:null,permissions:null}}catch(e){s={uid:null,permissions:null}}return{uid:s.uid||s.sessionUId||null,permissions:s.permissions||null}},getSessionInfoForRgi:function(){return{svSession:this.getSvSession()}},getAppsDataForRgi:function(){var t=this.getClientSpecMap(),i=e.filter(t,function(t){return e.has(t,"appFields.platform")||"siteextension"===t.type});return e.reduce(i,function(e,t){return e[t.appDefinitionId]={appDefinitionId:t.appDefinitionId,applicationId:t.applicationId,instance:t.instance,instanceId:t.instanceId,type:t.type},e},{})}}}),define("siteUtils/core/BiData",["lodash","loggingUtils"],function(e,t){"use strict";function i(t,i){this.getCurrentUrlPageId=i,this.pageNumber=1,this.pageLoadStart=t&&t.initialTimestamp||e.now(),this.wixBiSession=t}return i.prototype={getPageId:function(){return this.pageId||this.getCurrentUrlPageId()},getPageNumber:function(){return this.pageNumber},getTime:function(){var i=e.now()-this.pageLoadStart;return{loadingTime:i,totalLoadingTime:1===this.pageNumber?Math.round(t.performance.now()):i}},setPage:function(e){this.pageId=e},switchPage:function(t){this.setPage(t),this.wixBiSession.pn=++this.pageNumber,this.pageLoadStart=e.now()}},i}),define("siteUtils/core/SiteData",["lodash","coreUtils","coreUtilsLib","siteUtils/core/MobileDeviceAnalyzer","siteUtils/core/dataResolver","siteUtils/core/pagesUrlUtils","siteUtils/core/browserFlags","siteUtils/core/ViewPortImageLoader","siteUtils/core/SiteDataRmi","siteUtils/core/SiteDataRgi","siteUtils/core/BiData","experiment"],function(e,t,i,n,r,o,s,a,u,c,l,d){"use strict";function g(r,g){if(r){o.ensureUrlFormatModel(r),this.getter=g||e.get.bind(e,this),this._currentRootInfos={},this._currentPageIds={primaryPage:null,popupPage:null},e.assign(this,{currentUrl:{},screenSize:{width:null,height:null}},r);var h=e(this.currentUrl.query).keys().find(function(e){return"showmobileview"===e.toLowerCase()});h&&(this.showmobileview=this.currentUrl.query[h]);var p=this.requestModel&&this.requestModel.userAgent;this.browserDetection=this.browserDetection||i.browserDetection(p),this.browser=this.browserDetection.browser,this.os=this.browserDetection.os,delete this.browserDetection,this.mobile=new n(e.assign({userAgent:p},e.get(r.publicModel,"deviceInfo")));var f=d.isOpen("sv_tpaMobileViewportFix",{rendererModel:this.rendererModel});this.isPortrait=this.mobile.isPortrait(),this._forceMobileView=r.forceMobileView,this._isMobileDevice=this.mobile.isMobileDevice(),this._browserFlags=s.create(e.assign({tpaMobileViewportFix:f},e.pick(this,["os","browser"]))),this._isTabletDevice=this.os&&this.os.tablet&&!this.browser.ie||this.mobile.isTabletDevice(),this.biData=new l(this.wixBiSession,this.getCurrentUrlPageId.bind(this)),this.customUrlMapping={},this.siteId=this.siteId||this.rendererModel&&this.rendererModel.siteInfo.siteId,this._isInSSR="undefined"==typeof window,this._isClientAfterSSR=!this._isInSSR&&!window.clientSideRender,this._isFirstRenderAfterSSR=this._isClientAfterSSR,this.pagesData=this.pagesData||{},this.resolvedDataMaps={},this.clonedDataItemsIdsMap=this.clonedDataItemsIdsMap||{},this.anchorsMap={},this.editorData={generated:{},generatedVersion:{}},this.textRuntimeLayout={overallBorders:{}},this.mapFromPageUriSeoToPageId=o.getMapFromPageUriSeoToPageId(r),this.dockedRuntimeLayout={},this.deletedPagesMap={},this.platformAppMap={},this.orphanPermanentDataNodes=[],this.imageLoader=new a(this.getScreenSize.bind(this)),this.wixBiSession=r.wixBiSession||{},this.svgShapes=r.svgShapes||{},this.activeModes={},this.prefetchPages=[],this.dynamicPages=this.dynamicPages||{},this.dynamicPages.routersRendererIndex=0,this.semiNativeMessageQueues={},this.platformWidgetsState={},this.reLayoutedCompsMap={},this.saveInvalidationCount=0,this.customClickOccurred=!1,this.enforceAndPatchRequested=!1,this.renderFlags=this.renderFlags||{},e.defaults(this.renderFlags,{isPlayingAllowed:!0,isZoomAllowed:!0,isSocialInteractionAllowed:!0,siteTransformScale:1,isExternalNavigationAllowed:!0,isBackToTopButtonAllowed:!0,isWixAdsAllowed:this.isViewerMode(),isSlideShowGalleryClickAllowed:!0,isTinyMenuOpenAllowed:!0,renderFixedPositionContainers:!0,isPageProtectionEnabled:this.isViewerMode(),isSiteMembersDialogsOpenAllowed:!0,allowSiteOverflow:!0,shouldResetGalleryToOriginalState:!1,shouldResetComponent:!0,extraSiteHeight:0,siteScale:1,blockingLayer:null,blockingPopupLayer:null,shouldUpdateJsonFromMeasureMap:!1,componentViewMode:"preview",allowShowingFixedComponents:!0,renderFixedPositionBackgrounds:!0,showHiddenComponents:!1,ignoreComponentsHiddenProperty:[],componentPreviewStates:{},renderMobileActionMenu:!t.urlUtils.isQueryParamOn(this.currentUrl,"hideMobileActionBar"),initWixCode:this.isViewerMode(),shouldKeepChildrenInPlace:!0,preserveCompLayoutOnReparent:!1}),this.failedRequests=[],this.renderRealtimeConfig={previewTooltipCallback:null,hideTextComponent:null,compsToHide:null,compsToShowOnTop:null,compsToShowWithOpacity:null},this._svQueue=[],this.compStates={},this.widgetsStore={},this.imageCssCache={},this.wixappsRenderCounters={},this.mediaStore={},this.mediaQualityStore={},this.pageIdToJsonLd={},this.pageLinkTag={},this.visitedPages=[],this.onImageUnmount=this.onImageUnmount.bind(this),this.getMediaFullStaticUrl=this.getMediaFullStaticUrl.bind(this),this.siteAspectsData={},this.compBehavioursMap={},this.meshStyles={},this.postUpdateOperationsRenders={},this.noEnforceAnchors=!1,this.globalComputedMap={},this.mediaRichTextInnerComponents={},this.displayedOnlyComponents={componentTemplateId:{}},this.layoutFunctions=new WeakMap,d.isOpen("sv_multilingual",this)&&(this.multilingual={currentLanguage:null}),e.assign(this,e.omit(u,"bind")),e.assign(this,e.omit(c,"bind")),e.bindAll(this,e.functionsIn(this))}}function h(e){return{dal:t.DALFactory.getInstance(e),pointers:t.DALFactory.getPointersInstance(e)}}var p=t.siteDataUtils;return g.prototype={setStore:function(e){this.store=e},dataTypes:{PROPERTIES:"component_properties",DATA:"document_data",THEME:"theme_data",DESIGN:"design_data",BEHAVIORS:"behaviors_data",CONNECTIONS:"connections_data",MOBILE_HINTS:"mobile_hints"},WIX_ADS_ID:t.constants.COMP_IDS.WIX_ADS,MASTER_PAGE_ID:"masterPage",getSessionInfoProp:function(e){return this.getter(["publicModel","sessionInfo",e])},setSessionInfoProp:function(t,i){this.publicModel&&e.set(this.publicModel,["sessionInfo",t],i)},getCodeEmbeds:function(){return this.publicModel?this.publicModel.htmlEmbeds:[]},setRootNavigationInfo:function(e,i){t.siteDataUtils.setRootNavigationInfo(this,e,i)},getNonPageItemZoomData:function(){return this.getter(["siteAspectsData","nonPageItemZoom","globalData","image"])},getSiteMemberDetails:function(){return this.getter(["siteAspectsData","siteMembers","globalData","memberDetails"])},getPrefetchPages:function(){return this.getter(["prefetchPages"])},getExistingRootNavigationInfo:function(e){var t=this.getter(["_currentRootInfos",e]);return t||this.getter(["_currentRootInfos",this.MASTER_PAGE_ID])},getMasterPageLayoutSettings:function(){return e.get(this.getDataByQuery("masterPage","masterPage"),["layoutSettings"],{})},getPrimaryPageId:function(){return this.getter(["_currentPageIds","primaryPage"])},getCurrentUrlPageId:function(){return this.getPrimaryPageId()},getFocusedRootId:function(){return this.getCurrentPopupId()||this.getPrimaryPageId()},getSliderGalleryMeasures:function(e){return this.measureMap&&e?{imagesWidth:this.measureMap.width[e+"images"],itemsContainerWidth:this.measureMap.width[e+"itemsContainer"]}:{}},getAllPossiblyRenderedRoots:function(){var e=[this.MASTER_PAGE_ID,this.getPrimaryPageId()];return this.isPopupOpened()&&e.push(this.getCurrentPopupId()),e},getRenderedRootsUnderMasterPage:function(){return e.reject(this.getAllPossiblyRenderedRoots(),this.isPopupPage.bind(this))},isMobileView:function(){var i=this.getter(["_forceMobileView"]);if(e.isBoolean(i))return i;if(t.siteDataUtils.isMobileStructureExists(this)){var n=this.getter(["showmobileview"]);if(n)return"true"===n;var r=this.getter(["rendererModel","siteMetaData","adaptiveMobileOn"]);return this.isMobileDevice()&&r}return!1},isPageProtectionEnabled:function(){return this.getter(["renderFlags","isPageProtectionEnabled"])},isMobileDevice:function(){return this.getter(["_isMobileDevice"])},browserFlags:function(){return this.getter(["_browserFlags"])},forceLandingPage:function(e){return e.query&&e.query.forceLandingPage},isTabletDevice:function(){return this.getter(["_isTabletDevice"])},isTouchDevice:function(){return this.isTabletDevice()||this.isMobileDevice()},setMobileView:function(e){this._forceMobileView=e},getAllTheme:function(){var e=h(this),t=e.pointers;return e.dal.get(t.general.getAllTheme())},getGeneralTheme:function(){var e=h(this),t=e.pointers;return e.dal.get(t.data.getThemeItem("THEME_DATA",this.MASTER_PAGE_ID))},getFontsMap:function(){var e=h(this),t=e.pointers,i=e.dal,n=t.getInnerPointer(t.data.getThemeItem("THEME_DATA",this.MASTER_PAGE_ID),"font");return i.get(n)},getFont:function(e){var t=e.split("_")[1],i=h(this),n=i.pointers,r=i.dal,o=n.getInnerPointer(n.data.getThemeItem("THEME_DATA",this.MASTER_PAGE_ID),["font",t]);return r.get(o)},getColor:function(e){var t=e.split("_")[1],i=h(this),n=i.pointers,r=i.dal,o=n.getInnerPointer(n.data.getThemeItem("THEME_DATA",this.MASTER_PAGE_ID),["color",t]);return r.get(o)||e},getColorsMap:function(){var e=h(this),t=e.pointers,i=e.dal,n=t.getInnerPointer(t.data.getThemeItem("THEME_DATA",this.MASTER_PAGE_ID),"color");return i.get(n)},getMasterPageData:function(e){return this.getPageData(this.MASTER_PAGE_ID,e)},getPageData:function(e,t){var i=h(this),n=i.pointers,r=i.dal,o=n.page.getPagePointer(e);return o&&r.get(n.getInnerPointer(o,t))},getVisitedPages:function(){return this.getter(["visitedPages"])},getPageDataMap:function(i,n){var r=h(this),o=r.pointers,s=r.dal,a=e.invert(t.constants.PAGE_DATA_DATA_TYPES)[n];return s.get(o.data.getPageDataMap(a,i))},getServiceTopologyProperty:function(e){return this.getter(["serviceTopology",e])},getStaticMediaUrl:function(){return this.getServiceTopologyProperty("staticMediaUrl")},getStaticHTMLComponentUrl:function(){return this.getServiceTopologyProperty("staticHTMLComponentUrl")},getStaticVideoUrl:function(){return this.getServiceTopologyProperty("staticVideoUrl")},getAdaptiveVideoDomain:function(){return this.getServiceTopologyProperty("adaptiveVideoDomain")},getStaticVideoHeadRequestUrl:function(){return this.getServiceTopologyProperty("staticVideoHeadRequestUrl")},getMetaSiteId:function(){return this.getter(["rendererModel","metaSiteId"])},getRunningExperiments:function(){return this.getter(["rendererModel","runningExperiments"])},getMediaFullStaticUrl:function(e){var i=this.getServiceTopologyProperty("mediaRootUrl"),n=this.getStaticMediaUrl();return t.urlUtils.getMediaUrlByContext(e,n,i)},getStaticThemeUrlWeb:function(){var e=this.getServiceTopologyProperty("scriptsLocationMap");return e&&e.skins&&e.skins+"/images/wysiwyg/core/themes"},isPremiumDomain:function(){var t=this.getter(["rendererModel","premiumFeatures"],[]);return e.includes(t,"HasDomain")},isPremiumUser:function(){var t=this.getter(["rendererModel","premiumFeatures"],[]);return!e.isEmpty(t)},isAdFreePremiumUser:function(){var t=this.getter(["rendererModel","premiumFeatures"],[]);return e.includes(t,"AdsFree")},getClientSpecMap:function(){return this.getter(["rendererModel","clientSpecMap"])},getRendererModel:function(){return this.getter(["rendererModel"])},getClientSpecMapEntry:function(e){return this.getter(["rendererModel","clientSpecMap",e])},getClientSpecMapEntriesByType:function(t){return e.filter(this.getClientSpecMap(),{type:t})},getClientSpecMapEntryByAppDefinitionId:function(t){return e.find(this.getClientSpecMap(),{appDefinitionId:t})},getSMToken:function(){var t=this.getClientSpecMapEntriesByType("sitemembers"),i=e.head(t);return e.get(i,"smtoken")},getSvSession:function(){return this.getSessionInfoProp("svSession")},getCTToken:function(){return this.getSessionInfoProp("ctToken")},setCTToken:function(e){this.setSessionInfoProp("ctToken",e)},subSvSession:function(e,t){var i=this.getSvSession();i||t?e(i):this._svQueue.push(e)},pubSvSession:function(e){this.setSessionInfoProp("svSession",e),this._svQueue.forEach(function(t){t(e)}),this._svQueue.length=0},getUserId:function(){return this.getter(["siteHeader","userId"])},getSiteMetaData:function(){return this.getter(["rendererModel","siteMetaData"])},getSiteMediaToken:function(){return"APP "+this.getter(["rendererModel","siteMediaToken"])},getSiteStructure:function(){return this.getDataByQuery(this.getStructureCompId())},getLanguageCode:function(){return this.getter(["rendererModel","languageCode"])},getUserLanguage:function(){var e=this.getter(["requestModel","cookie"]),i=this.getter(["requestModel","language"]);return t.wixUserApi.getLanguage(e,this.currentUrl,i)||"en"},isPageLandingPage:function(e){var t=this.getDataByQuery(e)||{};return!!this.forceLandingPage(this.currentUrl)||(t.isLandingPage||this.isMobileView()&&t.isMobileLandingPage)},getStructureCompId:function(){return"masterPage"},getBodyClientWidth:function(){return window.document.body.clientWidth},getBodyClientHeight:function(){return window.document.body.clientHeight},getScreenWidth:function(){return this.getScreenSize().width},getScreenHeight:function(){return this.getScreenSize().height},getScreenSize:function(){return this.getter(["screenSize"])},updateScreenSize:function(i){var n={};e.isUndefined(i)?(n.width=this.isMobileView()?320:this.getBodyClientWidth(),n.height=this.getBodyClientHeight()):n=e.pick(i,["width","height"]),t.siteDataUtils.updateScreenSize(this,n),this.isPortrait=this.mobile.isPortrait()},getScrollBarWidth:function(){if(this.isInSSR())return 0;if(this.browser.firefox)return 0;if(this.measureMap)return e.get(this.measureMap,"innerWidth.screen")-e.get(this.measureMap,"clientWidth");return(this.isMobileView()?320:window.innerWidth)-this.getScreenWidth()},getSiteX:function(){return this.isMobileView()||this.isMobileDevice()?0:Math.min(parseInt(Math.floor((this.getSiteWidth()-this.getScreenWidth())/2),10),0)},getSiteWidth:function(){if(this.isMobileView())return 320;if(this.isFacebookSite())return 520;var t=this.getSiteStructure();return e.get(t,"renderModifiers.siteWidth",980)},isFacebookSite:function(){return"HtmlFacebook"===this.getter(["rendererModel","siteInfo","applicationType"])},onImageUnmount:function(e){this.imageCssCache&&delete this.imageCssCache[e],this.imageLoader.removeImage(e)},getDataByQuery:function(e,t,i){t=t||"masterPage",i=i||this.dataTypes.DATA;var n=[this.getPrimaryPageId()];return this.isPopupOpened()&&n.push(this.getCurrentPopupId()),r.getDataByQuery(this,n,t,i,e)},getMasterPageDataByQuery:function(e,t){return t=t||this.dataTypes.DATA,r.getDataByQuery(this,[],"masterPage",t,e)},resolveData:function(e,t,i){return this.getDataByQuery(e,t,i)},findDataOnMasterPageByPredicate:function(t){return e.find(this.getPageDataMap(this.MASTER_PAGE_ID,this.dataTypes.DATA),t)},getPageMinHeight:function(){return this.isMobileView()?200:500},isHomePage:function(e){return e&&e===this.getMainPageId()},getPagesDataItems:function(){var t=this.getAllPageIds();return e.map(t,function(e){return this.getDataByQuery(e)}.bind(this))},isDebugMode:function(){return"all"===e.get(this,["currentUrl","query","debug"])},hasDebugQueryParam:function(){return!!this.getter(["currentUrl","query","debug"])},getFavicon:function(){return this.publicModel&&this.publicModel.favicon},getDocumentLocation:function(){return this.currentUrl},getOrigin:function(){return t.urlUtils.origin(this.currentUrl)},getRequestedLayoutMechanism:function(){return e.get(this,["currentUrl","query","layoutMechanism"])},getExternalBaseUrl:function(){var e=this;return this.getExternalBaseUrl=this.isViewerMode()?function(){return this.publicModel.externalBaseUrl}:function(){var i=this.isSiteHistoryEndpoint()?8:7,n=t.urlUtils.getBaseUrlWithPath(e.getDocumentLocation(),i);return function(){return n}}.bind(this)(),this.getExternalBaseUrl()},getUnicodeExternalBaseUrl:function(){return this.publicModel&&this.publicModel.unicodeExternalBaseUrl},getMainPageId:function(){if(this.publicModel)return this.publicModel.pageList.mainPageId;var e=this.getDataByQuery("masterPage","masterPage");return e.mainPage.id||e.mainPageId||"mainPage"},getAllPageIds:function(){var t=this.getter(["publicModel"]);return t?e.map(t.pageList.pages,"pageId"):p.getAllPageIds(this)},getPageTitle:function(t){if(this.publicModel){var i=e.get(this.publicModel,["pageList","pages"]);return e.get(e.find(i,{pageId:t}),"title")}return e.get(this.getDataByQuery(t),"title")},getPageJsonld:function(e){return this.pageIdToJsonLd[e]||{}},setJsonLd:function(e,t){this.pageIdToJsonLd[e]=t},getPageLinkTag:function(e){return this.pageLinkTag[e]||{}},setPageLinkTag:function(e,t){this.pageLinkTag[e]=t},getBrowser:function(){return this.browser},getOs:function(){return this.os},getHubSecurityToken:function(){return this.getSessionInfoProp("hs")||"NO_HS"},setHubSecurityToken:function(e){this.setSessionInfoProp("hs",e)},getPageUsedFonts:function(e){return this.getDataByQuery(e).usedFonts},setPageUsedFonts:function(e,t){this.getDataByQuery(e).usedFonts=t},getPremiumFeatures:function(){return this.rendererModel.premiumFeatures},isViewerMode:function(){return!e.isUndefined(this.publicModel)},isTemplate:function(){return"Template"===this.rendererModel.siteInfo.documentType},shouldShowWixAds:function(){var t=this.isTemplate()&&!this.rendererModel.previewMode,i=e.includes(this.rendererModel.premiumFeatures,"NoAdsInSocialSites"),n=!this.isFacebookSite()||!i;return!this.isAdFreePremiumUser()&&!this.isWixSite()&&!t&&n},getPageBottomMargin:function(){return!t.siteDataUtils.isWixAdsAllowed(this)||this.isMobileView()||!this.shouldShowWixAds()||d.isOpen("displayWixAdsNewVersion",this)?0:40},getPageTopMargin:function(){return t.siteDataUtils.isWixAdsAllowed(this)&&!this.isMobileView()&&this.shouldShowWixAds()&&d.isOpen("displayWixAdsNewVersion",this)?50:0},getPageMargins:function(){return{bottom:this.getPageBottomMargin(),top:this.getPageTopMargin()}},getWixTopAdHeight:function(){if(!t.siteDataUtils.isWixAdsAllowed(this)||!this.shouldShowWixAds())return 0;if(this.isMobileView()){var e=this.isMobileDevice()&&this.mobile.isLandscape();return!!t.siteDataUtils.isHeaderFixedPosition(this)&&!e?38:0}return d.isOpen("displayWixAdsNewVersion",this)?50:0},isWixSite:function(){return"WixSite"===this.rendererModel.siteInfo.documentType},isUsingUrlFormat:function(e){return this.getUrlFormat()===e},getUrlFormat:function(){return this.urlFormatModel&&this.urlFormatModel.format?this.urlFormatModel.format:t.siteConstants.URL_FORMATS.HASH_BANG},isImageZoom:function(e){return e.imageZoom},getPageUrl:function(i,n,r,o,s){var a=this.isUsingUrlFormat(t.siteConstants.URL_FORMATS.HASH_BANG)?t.siteConstants.URL_FORMATS.HASH_BANG:n;return t.wixUrlParser.getUrl(this,e.assign({},i,{format:a}),!1,!!e.isUndefined(o)||o,r,s)},getCurrentUrl:function(e,t,i){var n=this.getExistingRootNavigationInfo(this.getCurrentUrlPageId());return this.getPageUrl(n,e,t,void 0,i?this.getCustomUrlMapping():void 0)},getMainPageUrl:function(e,t){return this.getPageUrl({pageId:this.getMainPageId()},e,t)},getMainPagePath:function(){var e=this.getMainPageUrl(this.getUrlFormat()),t=this.currentUrl.protocol+"//"+this.currentUrl.host;return e.replace(t,"")},getForbiddenPageUriSEOs:function(){return this.urlFormatModel&&this.urlFormatModel.forbiddenPageUriSEOs?this.urlFormatModel.forbiddenPageUriSEOs:{}},getGlobalImageQuality:function(){return e.pick(this.getDataByQuery(t.siteConstants.GLOBAL_IMAGE_QUALITY),t.siteConstants.GLOBAL_IMAGE_QUALITY_PROPERTIES)},getCurrentPopupId:function(){return this.getter(["_currentPageIds","popupPage"])},getRootNavigationInfo:function(){var e=this.getPrimaryPageId();return this.getExistingRootNavigationInfo(e)},isPopupPage:function(e){if("masterPage"===e)return!1;var t=this.getDataByQuery(e);return Boolean(t&&t.isPopup)},isDynamicPage:function(e){return t.routerUtils.isDynamicPage(this.getRouters(),e)},isPopupOpened:function(){return Boolean(this.getCurrentPopupId())},getViewMode:function(){return this.isMobileView()?t.constants.VIEW_MODES.MOBILE:t.constants.VIEW_MODES.DESKTOP},isFeedbackEndpoint:function(){return!this.isViewerMode()&&e.startsWith(this.currentUrl.path,"/html/editor/review")},isSiteHistoryEndpoint:function(){return!this.isViewerMode()&&e.startsWith(this.currentUrl.path,"/html/editor/web/renderer/revisions/view")},getPublicBaseUrl:function(){var e=!!this.documentServicesModel,t=!e||this.documentServicesModel.isPublished;return e?t?this.documentServicesModel.publicUrl:"":this.getExternalBaseUrl()},getPopupsContainer:function(){return window.document.getElementById("POPUPS_ROOT")},getCustomUrlMapping:function(){return this.getter(["customUrlMapping"])},setCustomUrlMapping:function(e,i){t.siteDataUtils.setCustomUrlMapping(this,e,i)},getRouters:function(){return this.getter(["routers","configMap"])||{}},isPlatformAppOnPage:function(t,i){return e.get(this,["pagesPlatformApplications",i,t],!1)},isQaMode:function(){return t.urlUtils.isQueryParamOn(this.currentUrl,"isqa")},getHash:function(){var e=Array.prototype.slice.call(arguments,0);return t.hashUtils.SHA256.hex_sha256(e.join("/"))},getUniquePageId:function(i){var n=t.blogAppPartNames;if(t.stringUtils.isTrue(e.get(this,["currentUrl","query","draft"])))return t.hashUtils.SHA256.hex_sha256("editor");var r=h(this),o=r.pointers,s=r.dal.get(o.page.getPageData(i)),a=e.find(s,{appPartName:n.SINGLE_POST}),u=void 0;return this.wixapps.blog[a.id]?(u=this.wixapps.blog[a.id][1],this.getHash(this.siteId,"blog",u)):void 0},isInSSR:function(){return this._isInSSR},isClientAfterSSR:function(){return this._isClientAfterSSR},isFirstRenderAfterSSR:function(){return this._isFirstRenderAfterSSR},setPagesJsonFileName:function(t){e.isObject(t)&&this.publicModel.pageList.pages.forEach(function(e){e.pageJsonFileName=e.pageJsonFileName||t[e.pageId]})},hasPageData:function(t){var i=e.find(this.publicModel.pageList.pages,["pageId",t]);return!(!i||!i.pageJsonFileName)},registerMediaRichTextInnerComponent:function(t,i,n){e.set(this.mediaRichTextInnerComponents,[t,i],{id:i,structureInfo:n})},getMediaRichTextInnerComponents:function(e){return this.mediaRichTextInnerComponents[e]},clearMediaRichTextInnerComponents:function(e){delete this.mediaRichTextInnerComponents[e]},isPermalink:function(e){if(!e)return!1;return"PermaLink"===this.getMasterPageData(["data","document_data",e,"type"])},isVisualFocusEnabled:function(){var e=h(this),t=e.pointers,i=e.dal,n=t.data.getDataItem(this.MASTER_PAGE_ID,this.MASTER_PAGE_ID);return!1===i.get(t.getInnerPointer(n,["accessibilitySettings","visualFocusDisabled"]))||d.isOpen("sv_forceVisualFocus",this)},getCurrentLanguage:function(){return this.getter(["multilingual","currentLanguage"])},getClonedDataItemsIdsMap:function(e){return this.clonedDataItemsIdsMap[e]||(this.clonedDataItemsIdsMap[e]={}),this.clonedDataItemsIdsMap[e]},registerLayoutFunc:function(e,t){this.layoutFunctions.set(e,t)},getLayoutFunc:function(e){return this.layoutFunctions.get(e)}},g}),define("siteUtils/core/componentsAnchorsMetaData",["coreUtils"],function(e){"use strict";var t=e.constants;return{default:{to:{allow:!0},from:{allow:!0,lock:t.ANCHORS.LOCK_CONDITION.THRESHOLD}},"wysiwyg.viewer.components.BoxSlideShow":{to:{allow:!0,zeroBottomParentDistance:!0}},"wysiwyg.viewer.components.StripContainerSlideShow":{to:{allow:!0,zeroBottomParentDistance:!0}},"wysiwyg.viewer.components.Repeater":{to:{allow:!0,zeroBottomParentDistance:!0},skipGroupingForChildren:!0},"wysiwyg.viewer.components.WRichText":{from:{allow:!0,positiveAnchorToDisplayedOnlyParent:!0}},"wysiwyg.viewer.components.Column":{to:{allow:!0},from:{allow:!1,lock:t.ANCHORS.LOCK_CONDITION.NEVER}},"wysiwyg.viewer.components.PageGroup":{to:{allow:!0},from:{allow:!0,lock:t.ANCHORS.LOCK_CONDITION.ALWAYS}},"mobile.core.components.Page":{to:{allow:!0},from:{allow:!1,lock:t.ANCHORS.LOCK_CONDITION.NEVER}},"wysiwyg.viewer.components.PagesContainer":{to:{allow:!0},from:{allow:!0,lock:t.ANCHORS.LOCK_CONDITION.THRESHOLD}},"wysiwyg.viewer.components.PopupContainer":{to:{allow:!0},from:{allow:!1}},"wysiwyg.viewer.components.SiteSegmentContainer":{to:{allow:!0},from:{allow:!0,lock:t.ANCHORS.LOCK_CONDITION.ALWAYS}},"wysiwyg.viewer.components.WSiteStructure":{to:{allow:!0,distance:0},from:{allow:!1,lock:t.ANCHORS.LOCK_CONDITION.NEVER}},"wysiwyg.viewer.components.tpapps.TPASection":{to:{allow:!0},from:{allow:!0,lock:t.ANCHORS.LOCK_CONDITION.NEVER}},"wysiwyg.viewer.components.tpapps.TPAMultiSection":{to:{allow:!0},from:{allow:!0,lock:t.ANCHORS.LOCK_CONDITION.NEVER}},"wysiwyg.common.components.backtotopbutton.viewer.BackToTopButton":{from:{allow:!1}},"wysiwyg.viewer.components.tpapps.TPAGluedWidget":{from:{allow:!1}},"wixapps.integration.components.AppPage":{from:{allow:!1}},"platform.components.AppController":{to:{allow:!1},from:{allow:!1}}}}),define("siteUtils/core/layoutUtils",["lodash","coreUtils"],function(e,t){"use strict";function i(e){return e&&e.docked&&(e.docked.vCenter||e.docked.bottom||e.docked.top)}function n(e){return e&&e.docked&&(e.docked.hCenter||e.docked.left||e.docked.right)}function r(e,t){return e&&e.docked&&e.docked[t]}function o(e){return Boolean(e&&e.docked&&e.docked.bottom&&e.docked.top)}function s(t){return e.has(t,["docked","bottom","vh"])&&e.has(t,["docked","top","vh"])}function a(t){return s(t)||function(t){return e.has(t,["docked","left","vw"])&&e.has(t,["docked","right","vw"])}(t)}function u(e){return e&&e.docked&&e.docked.left&&e.docked.right}function c(e,t,i){return e&&Math.max(t,Math.min(i,e))}function l(e){var i={top:"",bottom:"",left:"",right:"",width:"",height:"",position:""};if(!e)return i;if(o(e)||(i.height=c(e.height,t.siteConstants.COMP_SIZE.MIN_HEIGHT,t.siteConstants.COMP_SIZE.MAX_HEIGHT)),u(e)||(i.width=c(e.width,t.siteConstants.COMP_SIZE.MIN_WIDTH,t.siteConstants.COMP_SIZE.MAX_WIDTH)),e.fixedPosition&&(i.position="fixed"),e.rotationInDegrees){i[t.style.getPrefixedTransform()]="rotate("+e.rotationInDegrees+"deg) translateZ(0)"}return i}function d(r,o,s){return(s===t.constants.LAYOUT_MECHANISMS.MESH?l:function(r,o){var s=l(r);if(s.position=s.position||e.get(r,"position","absolute"),!r)return s;if(n(r)||(s.left=r.x),i(r)||(s.top=r.y),r.docked){var a=o();t.dockUtils.applyDockedStyleWithMargins(r,s,a.pageMargins,a.screenWidth,a.siteWidth,a.siteX,a.screenHeight)}return s})(r,o)}function g(i,n,r,o,s){return e(r).reject({layout:{fixedPosition:!0}}).filter(function(e){return!!n[e.id]}).reduce(function(e,r){var a=function(e,i,n){var r=i[n.id];return t.boundingLayout.getBoundingLayout({x:r.offsetLeft,y:r.offsetTop,width:h(e.width[n.id],r.offsetWidth),height:h(e.height[n.id],r.offsetHeight),rotationInDegrees:n.layout.rotationInDegrees})}(i,n,r),u=s+a.y,c=u+a.height,l=o?g(i,n,r.components,o,u):c;return Math.max(e,c,l)},0)}function h(t,i){return e.isNumber(t)?t:i}return{isDockToScreen:a,isVerticallyDocked:i,isDockedToDirection:function(e,t){return Boolean(e&&e.docked&&e.docked[t])},getDockToDirection:r,getTopDockData:function(e){return r(e,"top")},getBottomDockData:function(e){return r(e,"bottom")},getVerticallyCenteredDockData:function(e){return r(e,"vCenter")},isVerticallyStretched:o,isVerticallyCentered:function(t){return e.has(t,["docked","vCenter"])},isVerticallyStretchedToScreen:s,isHorizontallyDocked:n,isHorizontallyStretched:u,isAspectRatioOn:function(t){return!e.isUndefined(t.aspectRatio)},calcAspectRatio:function(e,t){return parseFloat((t/e).toFixed(5))},getStyle:d,getRootLeft:function(e,t,i){return h(e.left["ROOT_"+t],-i)},getRootWidth:function(e,t,i){return h(e.width["ROOT_"+t],i)},getPageBottomChildEnd:function(e,t,i,n){return g(e,t,function(e,t){return e.isMobileView()?t.structure.mobileComponents:t.structure.components}(i,n),!1,0)},stretchInCenteredContainer:function(e,t){var i=e-t;return{left:Math.floor(Math.min(0,.5*i)),width:Math.floor(Math.max(e,t))}}}}),define("siteUtils/core/masterPageLayoutUtils",["lodash","coreUtils"],function(e,t){"use strict";function i(t,i){var n=t?u.MOBILE:u.DESKTOP;return e.includes(n,i.componentType)}function n(t,i){var n=t?u.MOBILE:u.DESKTOP;return e.indexOf(n,i.componentType)}function r(r,o){var s=t.dataUtils.getChildrenData(r,o);return e(s).filter(i.bind(null,o)).sortBy(n.bind(null,o)).value()}function o(e){return e.componentType===a}function s(i){return function(i,n){var r=t.dataUtils.getChildrenData(i,n);return e.some(r,o)}(i,!0)||function(e,t){var i=r(e,t),n=void 0;for(n=0;n<i.length-1;n++){var o=i[n],s=i[n+1];if(o.layout.y+o.layout.height!==s.layout.y)return!1}return!0}(i,!0)}var a="wysiwyg.viewer.components.SiteRegionContainer",u={MOBILE:["wysiwyg.viewer.components.HeaderContainer","wysiwyg.viewer.components.SiteRegionContainer","wysiwyg.viewer.components.PagesContainer","wysiwyg.viewer.components.FooterContainer"],DESKTOP:["wysiwyg.viewer.components.HeaderContainer","wysiwyg.viewer.components.PagesContainer","wysiwyg.viewer.components.FooterContainer"]};return{getMasterPageSections:r,getMasterPageChildrenSegregateByIsSection:function(r,o){var s=t.dataUtils.getChildrenData(r,o),a=e.partition(s,i.bind(null,o));return a[0]=e.sortBy(a[0],n.bind(null,o)),a},shouldApplyMobileTightLayout:s}}),define("siteUtils/core/skinAnchorsMetaData",["lodash"],function(e){"use strict";var t={"wysiwyg.viewer.skins.area.BubbleArea":30,"wysiwyg.viewer.skins.area.BubbleLeftArea":30,"wysiwyg.viewer.skins.area.RibbonAreaSkin":function(t){var i=e.get(t,"style.properties"),n=10;return i&&(n+=parseInt(i.els,10)||0),n},"wysiwyg.viewer.skins.area.SloopyArea":6,"wysiwyg.viewer.skins.area.BubbleAreaLeft":10,"wysiwyg.viewer.skins.area.LeftTriangleArea":5,"wysiwyg.viewer.skins.area.RightTriangleArea":5,"wysiwyg.viewer.skins.area.BubbleAreaRight":10,"wysiwyg.viewer.skins.page.SloopyPageSkin":3,"wysiwyg.viewer.skins.page.BasicPageSkin":20,"wysiwyg.viewer.skins.page.LiftedBottomPageSkin":20,"wysiwyg.viewer.skins.page.LiftedTopPageSkin":20,"wysiwyg.viewer.skins.page.BorderPageSkin":20,"wysiwyg.viewer.skins.page.LiftedShadowPageSkin":20,"wysiwyg.viewer.skins.page.ShinyIPageSkin":20};return{getNonAnchorableHeightForSkin:function(i,n){return e.isFunction(t[i])?t[i](n):t[i]||0}}}),define("siteUtils/core/anchorsUtils",["lodash","coreUtils","siteUtils/core/componentsAnchorsMetaData"],function(e,t,i){"use strict";var n={bottomTop:"BOTTOM_TOP",bottomParent:"BOTTOM_PARENT",topTop:"TOP_TOP"};return{isAnchorLocked:function(r,o,s){if(r===n.topTop)return!0;var a=e.get(i,[o,"from"],i.default.from);return a.lock!==t.constants.ANCHORS.LOCK_CONDITION.NEVER&&(a.lock===t.constants.ANCHORS.LOCK_CONDITION.ALWAYS||s<=t.constants.ANCHORS.LOCK_THRESHOLD)},anchorsTypes:n}}),define("siteUtils/core/groupingAnchors",["lodash","mobileLayoutUtils","siteUtils/core/anchorsUtils"],function(e,t,i){"use strict";function n(t){var i=r(t);return u(t,e(i).map(s).transform(a,{virtualGroups:{},childIdToVirtualGroupId:{}}).value())}function r(i){var n=t.splitToFragments(i,"y");return 1===n.length?[]:e(n).filter(l).map("comps").value()}function o(t,i,n){return e.map(t,function(t){var r={x:t.layout.x+i,y:t.layout.y+n},o=e.defaults(r,t.layout);return e.defaults({layout:o},t)})}function s(i){var n=e.assign({fixedPosition:!1},t.getSnugLayout(i));return{id:"virtualGroup_"+i[0].id,layout:n,components:o(i,-n.x,-n.y),componentType:y,type:"Container",skin:"undefined",styleId:"undefined"}}function a(t,i){return t.virtualGroups[i.id]=i,e.transform(i.components,function(e,t){e[t.id]=i.id},t.childIdToVirtualGroupId)}function u(t,i){var n=e.reduce(t,function(t,n){var r=i.childIdToVirtualGroupId[n.id];return r?t[r]?t:e.set(t,r,i.virtualGroups[r]):e.set(t,n.id,n)},{});return e.values(n)}function c(e){return!e.layout.fixedPosition&&!e.layout.rotationInDegrees}function l(t){return t.comps.length>1&&(t.distanceToPreviousFragment>=m||t.distanceToPreviousFragment<0)&&e.every(t.comps,c)}function d(e){return e.componentType===y}function g(t,i){var n=e.mapKeys(i,"id"),r=e.pickBy(n,d);if(e.isEmpty(r))return t;var o=e(r).flatMap("components").mapKeys("id").assign(n).value(),s=function(t,i){return e.transform(t,function(e,t,n){if(i[n]){var r=h(i[n],t);f(e,r)}else e[n]=t},{})}(t,r);return e.mapValues(s,e.partial(p,o))}function h(t,n){return e.transform(t.components,function(r,o){var s=t.layout.height-o.layout.y-o.layout.height,a=e.map(n,function(t){var n=t.distance+s,r=i.isAnchorLocked(t.type,o.componentType,n);return e.defaults({fromComp:o.id,distance:t.distance+s,locked:r,originalValue:t.originalValue},t)});r[o.id]=a},{})}function p(t,n){return e.reduce(n,function(n,r){var o=t[r.targetComponent];if(!d(o))return n.concat([r]);var s=e.map(o.components,function(n){var o=n.layout.y,s=r.distance+o,a=i.isAnchorLocked(r.type,t[r.fromComp],s);return e.defaults({targetComponent:n.id,distance:s,locked:a,originalValue:r.originalValue+o},r)});return n.concat(s)},[])}function f(t,i){return e.transform(i,function(e,t,i){e[i]=(e[i]||[]).concat(t)},t)}var m=10,y="VirtualGroup";return{testAPI:{groupRowsComponents:n,findGroupableRowComponents:r,createVirtualGroup:s,addVirtualGroupToGroupedComponentsMap:a,replaceGroupedComponentsToVirtualGroups:u,areFragmentComponentsGroupable:l,convertGroupingAnchors:g,mergeAnchorsMaps:f,replaceAnchorsFromVirtualGroup:h,replaceAnchorsToVirtualGroup:p,translateComponents:o},isVirtualGroup:d,groupRows:function(e,t){return t&&e.length?n(e):e},resolve:function(t,i,n,r,o){if(!n||!i.length||e.isEmpty(r))return o;return f(r,g(o,i.concat([t])))}}}),define("siteUtils/core/anchorsGenerator",["lodash","experiment","coreUtils","siteUtils/core/layoutUtils","siteUtils/core/masterPageLayoutUtils","siteUtils/core/skinAnchorsMetaData","siteUtils/core/componentsAnchorsMetaData","siteUtils/core/groupingAnchors","siteUtils/core/anchorsUtils"],function(e,t,i,n,r,o,s,a,u){"use strict";function c(e,t,i,n,r){return{distance:r||0,locked:!0,originalValue:n,fromComp:t,targetComponent:i,type:e}}function l(e,t,i,n,r,o){var s=c(e,i,n,o,r);return s.locked=u.isAnchorLocked(e,t,r),s}function d(t){for(var i=function(t,i){return e.flatMap(t,function(t){return e.map(i[t],"target")})}(T,t),n={};i.length;){var r=i.shift();n[r]=!0;var o=e(t[r]).map("target").reject(function(t){return e.has(n,t)}).value();i=i.concat(o)}return n}function g(t,n,r,a){var u=d(t);return e.mapValues(t,function(t,c){if(!t.length)return[];var d=n[c];return d.layoutAnchors?d.layoutAnchors.slice():e(t).map(function(t){if(t.target===C)return function(t,n,r){if("masterPage"===n.id||n.id===i.constants.COMP_IDS.PAGES_CONTAINER)return l(b.bottomParent,t.componentType,t.id,n.id,0,0);var a=r[n.styleId&&n.styleId.replace("#","")],u=a&&a.skin||n.skin,c=n.height-o.getNonAnchorableHeightForSkin(u,a),d=c,g=e.get(s,[n.componentType,"to","zeroBottomParentDistance"])?0:c-(t.boundingY+t.boundingHeight),h=e.get(s,[t.componentType,"from","positiveAnchorToDisplayedOnlyParent"]),p=i.displayedOnlyStructureUtil.isDisplayedComponent(n.id);return h&&p&&(g=Math.max(0,g)),l(b.bottomParent,t.componentType,t.id,n.id,g,d)}(d,r,a);var c=n[t.target];return t.type===b.bottomTop?function(e,t,i){var n=t.boundingY-e.boundingY-e.boundingHeight,r=i?0:t.boundingY;return l(b.bottomTop,e.componentType,e.id,t.id,n,r)}(d,c,u[c.id]):function(e,t){var i=t.boundingY-e.boundingY;return l(b.topTop,e.componentType,e.id,t.id,i,t.boundingY)}(d,c)}).compact().value()})}function h(n,r,o,u,c,l,d){var h=o.applyGroupingAnchors&&!e.get(s,[r.componentType,"skipGroupingForChildren"]),p=a.groupRows(n,h),f=function(t,i,n){var r=e.filter(t,a.isVirtualGroup);return e.reduce(r,function(t,r){var o=e.reduce(y(r,{forceMobileStructure:!0,applyGroupingAnchors:!1},i,n),function(t,i,n){return n===r.id?t:e.set(t,n,e.reject(i,{targetComponent:r.id}))},{});return e.assign(t,o)},{})}(p,u,c),m=function(t,i,n){var r=e.reduce(t,function(e,t){return e[t.id]=v(t,i),e},{});return e.forEach(n,function(t,i){r[i]=e.assign(r[i],t)}),r}(p,c,d),S=function(i,n){var r={},o={},s=e(i).filter("canCreateAnchorsToComp").sortBy("boundingY").value(),a={left:-1e5,right:1/0,ids:["root"]};s=function(e){var t={x:-1e5,y:1/0,height:10,width:1/0,id:C,canBePushed:!0,canPush:!1,boundingY:1/0,boundingBottom:1/0,boundingHeight:10};return e.concat(t)}(s),r.root=[];var u=[a],c=void 0,l=void 0,d=void 0,g=void 0;return s.forEach(function(s){function a(e){f[e]="root"===e?b.bottomTop:function(e,t){var i=t.boundingY,n=t.boundingBottom,r=e.boundingY,o=e.boundingHeight;return n>e.boundingBottom&&i>r+o/2}(i[e],s)?b.bottomTop:b.topTop}r[s.id]=[],o[s.id]=[],d=null,c=s.boundingX,l=c+s.boundingWidth,g=0;var h=u.length,p=[],f={},m=[],y=!1,v=!1,S=0;for(S=0;S<h;S++){var P=u[S];if(P.right<=c)p.push(P);else if(null===d?(d=S,y=!0):y=!1,(u.length-1===S||u[S+1].left>l)&&(g=S,v=!0),s.canBePushed&&P.ids.forEach(a),s.canPush&&(m=function(i,n,r,o,s,a,u,c,l,d){var g=e.clone(n);s&&g.push({ids:r.ids,left:r.left,right:u-1});var h={ids:[i],left:Math.max(u,r.left),right:Math.min(c,r.right)};r.ids.filter(function(e){return"root"!==e&&function(e,i,n){return t.isOpen("layout_verbs_with_anchors",n)?!i||e===b.topTop:e===b.topTop}(o[e],l,d)}).forEach(function(e){h.ids.push(e)});var p=e.last(g);return p&&!e.isEqual(p.ids,h.ids)?g.push(h):p&&(p.right=h.right),a&&g.push({ids:r.ids,left:c+1,right:r.right}),g}(s.id,m,P,f,y,v,c,l,s.canBePushed,n)),v)break}if(delete f.root,function(t,i){e.isEmpty(i)||(t.id===C?i=function(t,i){return e.omitBy(t,function(t,n){return e.some(i[n],{type:b.bottomTop})})}(i,r):function(t,i){e(t).keys().flatMap(e.propertyOf(i)).filter({type:b.bottomTop}).map("source").forEach(function(e){delete t[e]})}(i,o),e.forEach(i,function(e,i){r[i].push({target:t.id,type:e}),o[t.id].push({source:i,type:e})}))}(s,f),s.canPush){var w=e.takeRight(u,h-g-1);u=e.compact(p).concat(m,w)}}),delete r.root,r}(m,c),w=e(m).mapValues("anchors").assign(g(S,m,v(r,c),u)).omit("parentNode").thru(e.partial(a.resolve,r,p,h,f)).value(),M=e.get(l,r.id);if(M){var I=function(t,n,r,o){return P(e.find(t,function(e){return i.displayedOnlyStructureUtil.getItemId(e.id)===n})||e.head(t),o,r)}(n,M,o,u);e.assign(w,I,function(t,n,r){var o=i.displayedOnlyStructureUtil,s={},a=e(t).map("id").map(i.displayedOnlyStructureUtil.getItemId).without(n).value();return e.forEach(r,function(t,i){e.forEach(a,function(n){var r=o.getOriginalId(i),a=o.getUniqueDisplayedId(r,n);s[a]=e.reduce(t,function(t,i){var r=o.getUniqueDisplayedId(o.getOriginalId(i.fromComp),n),s=o.getUniqueDisplayedId(o.getOriginalId(i.targetComponent),n),a=e.defaults({fromComp:r,targetComponent:s},i);return t.push(a),t},[])})}),s}(n,M,I))}return w}function p(t,n,r,o,s,a){return h(function(t,n,r){if(t.layout.anchors)return function(t,n,r){var o=e.clone(n),s=e.find(n,{id:"SITE_HEADER"}),a=e.find(n,{id:"SITE_FOOTER"}),u=function(t,i){return i?0:e.get(t,"layout.anchors.0.distance")}(t,r)+i.boundingLayout.getBoundingY(s.layout)+i.boundingLayout.getBoundingHeight(s.layout),c=e.findIndex(n,{id:"PAGES_CONTAINER"}),l=n[c],d=e.assign({},l.layout,{y:u,height:a.layout.y-u});return o[c]=e.assign({},l,{layout:d}),o}(t,n,r);return function(t){var n=e.clone(t),r=e.find(t,{id:"SITE_FOOTER"}),o=e.maxBy(t,function(e){return S(e)?i.boundingLayout.getBoundingY(e.layout)+i.boundingLayout.getBoundingHeight(e.layout):-1e4});if(!o||!S(o))return n;var s=e.find(o.layout.anchors,{targetComponent:"PAGES_CONTAINER",type:b.bottomTop}),a=i.boundingLayout.getBoundingY(o.layout)+i.boundingLayout.getBoundingHeight(o.layout),u=s.distance+a,c=e.findIndex(t,{id:"PAGES_CONTAINER"}),l=t[c],d=e.assign({},l.layout,{y:u,height:r.layout.y-u});return n[c]=e.assign({},l,{layout:d}),n}(n)}(n,t,r.forceMobileStructure),n,r,o,s,a)}function f(t,i,n,o,s){var a=r.getMasterPageChildrenSegregateByIsSection(t,i.forceMobileStructure),u=a[0],c=function(t,i,n,r,o,s,a){return h(e.filter(t,{id:"SITE_HEADER"}).concat(i),n,r,o,s,a,{SITE_HEADER:{canBePushed:!1}})}(u,a[1],t,i,n,o,s),l=function(e){var t={};return e.headerPagesContainerLegacyGap&&(t.SITE_HEADER={targetComponent:"PAGES_CONTAINER",distance:e.headerPagesContainerLegacyGap}),e.pagesContainerFooterLegacyGap&&(t.PAGES_CONTAINER={targetComponent:"SITE_FOOTER",distance:e.pagesContainerFooterLegacyGap}),t}(i),d=e.mapValues(M(u,l),function(e){return[e]});return c.SITE_HEADER=c.SITE_HEADER.concat(d.SITE_HEADER),e.defaults(c,d)}function m(t,i,n,r,o,s){return function(t){var i=e.find(t,{id:"SITE_HEADER"});if(!i)return!1;return e.find(t,{id:"PAGES_CONTAINER"}).layout.y<i.layout.y+i.layout.height}(t)?p(t,i,n,r,o,s):!n.forceMobileStructure&&n.useDesktopSectionsLayout?f(i,n,r,o,s):h(t,i,n,r,o,s)}function y(t,n,r,o,s){var a=i.dataUtils.getChildrenData(t,n.forceMobileStructure);return e.isEmpty(a)?{}:"Document"===t.type?m(a,t,n,r,o,s):h(a,t,n,r,o,s)}function v(r,o){var a=r.layout,u=i.boundingLayout.getBoundingY(a),c=i.boundingLayout.getBoundingHeight(a),l=a.x?i.boundingLayout.getBoundingX(a):0;return{id:r.id,layoutAnchors:a.anchors,anchors:[],y:a.y,x:a.x,height:a.height,width:a.width,canBePushed:function(i,r){if(i.componentType){if(!1===e.get(s,[i.componentType,"to","allow"]))return!1}if(t.isOpen("layout_verbs_with_anchors",r))return!n.isDockedToDirection(i.layout,"top")||n.isVerticallyStretchedToScreen(i.layout);return!0}(r,o),canPush:function(i,r){if(i.componentType){if(!1===e.get(s,[i.componentType,"from","allow"]))return!1}if(t.isOpen("layout_verbs_with_anchors",r))return!n.isDockedToDirection(i.layout,"bottom")||n.isVerticallyStretchedToScreen(i.layout);return!0}(r,o),boundingY:u,boundingX:l,boundingBottom:u+c,boundingHeight:c,boundingWidth:i.boundingLayout.getBoundingWidth(a),canCreateAnchorsToComp:function(i,r){return t.isOpen("layout_verbs_with_anchors",i)?e.includes(U,r.id)||!(e.includes(D,r.id)||r.layout.fixedPosition||n.isVerticallyCentered(r.layout)||n.isVerticallyStretched(r.layout)&&!n.isVerticallyStretchedToScreen(r.layout)):e.includes(U,r.id)||!(e.includes(D,r.id)||r.layout.fixedPosition||n.isVerticallyDocked(r.layout))}(o,r),styleId:r.styleId,skin:r.skin,componentType:r.componentType}}function S(t){return e.find(t.layout.anchors,{targetComponent:"PAGES_CONTAINER",type:b.bottomTop})}function P(t,n,r,o){r=r||{};for(var s=[t],a=void 0,u=void 0,c=void 0,l={};s.length;)c=y(a=s.pop(),r,n,null,o),e.assign(l,c),u=i.dataUtils.getChildrenData(a,r.forceMobileStructure),e.has(o,a.id)||Array.prototype.push.apply(s,u);return l}function w(t,i,n){return c(b.bottomTop,t,i,0,function(t,i,n){var r=e.get(n,t);return r&&r.targetComponent===i?r.distance:0}(t,i,n))}function M(t,i){for(var n=e.map(t,"id"),r=void 0,o=0,s={};n[o+1];){r=n[o];var a=n[o+1];s[r]=w(r,a,i),o++}return r=n[o],s[r]=function(e){return c(b.bottomParent,e,"masterPage",0)}(r),s}function I(t,i,n){var o=P(t,i,n),s=r.getMasterPageSections(t,!0),a=M(s),u=e.map(s,"id");return e.forEach(a,function(t,i){o[i]=function(t,i,n,r){if(!e.includes(t,i))return n;var o=t.concat(["masterPage"]);return e.reject(n,function(t){return e.includes(o,t.targetComponent)}).concat([r])}(u,i,o[i],t)}),o}var b=u.anchorsTypes,D=["BACK_TO_TOP_BUTTON"],T=["PAGES_CONTAINER"],U=["SITE_HEADER","SITE_FOOTER","PAGES_CONTAINER"],C="parentNode";return{createPageAnchors:function(e,t,i,n){return P(e,t,i,n)},createMobileTightSectionsAnchors:function(t){var i=r.getMasterPageSections(t,!0);return e.mapValues(M(i),function(e){return[e]})},createMobileTightMasterPageAnchors:I,createChildrenAnchors:function(e,t,i,n,r){return y(e,i||{},t,n,r)}}}),define("siteUtils/core/layoutAnchorsUtils",["lodash","siteUtils/core/anchorsGenerator","siteUtils/core/skinAnchorsMetaData"],function(e,t,i){"use strict";return{createPageAnchors:t.createPageAnchors,createMobileTightMasterPageAnchors:t.createMobileTightMasterPageAnchors,createMobileTightSectionsAnchors:t.createMobileTightSectionsAnchors,createChildrenAnchors:t.createChildrenAnchors,getNonAnchorableHeightForSkin:i.getNonAnchorableHeightForSkin}}),define("siteUtils/core/originalValuesMapGenerator",["lodash","coreUtils","siteUtils/core/skinAnchorsMetaData"],function(e,t,i){"use strict";return{createOriginalValuesMap:function(n,r,o){function s(n){var u=t.dataUtils.getChildrenData(n,o),c={};if(n.layout&&(c.top=t.boundingLayout.getBoundingY(n.layout)),!e.isEmpty(u)){if(n.layout){var l=n.styleId&&n.styleId.replace("#",""),d=r[l],g=d&&d.skin||n.skin;c.height=n.layout.height-i.getNonAnchorableHeightForSkin(g,d)}e.forEach(u,s)}a[n.id]=c}var a={};return s(n),a}}}),define("siteUtils/core/jsonUpdaterRegistrar",["lodash","coreUtils"],function(e,t){"use strict";var i={},n={};return t.sessionFreezer.freeze(i),t.sessionFreezer.freeze(n),{registerLayouterComp:function(e,t){n[e]=t},getCompLayouter:function(e){return n[e]},getCompPlugin:function(e){return i[e]},registerPlugin:function(e,t){i[e]=t}}}),define("siteUtils/core/fullToDisplayedJson",["lodash","coreUtils","experiment","siteUtils/core/jsonUpdaterRegistrar"],function(e,t,i,n){"use strict";function r(t,i){return t=t||{},e.omitBy(t[i],function(e){return!e})}function o(t,i){var n=e.transform(t,function(t,n){(function(t,i){return!e.isEmpty(i)&&e.every(t.modeIds,function(e){return i[e]})})(n,i)&&e.assign(t,n)},{});return delete n.modeIds,n}function s(e,t){var i=t&&e.mobileComponents?"mobileComponents":"children";return e[i]?i:"components"}function a(i,r,a,c){var l=s(r,!1),d=s(r,!0),g=r.modes,h=o(e.get(r,["modes","overrides"])||[],i);if(function(t,i){var n=!0;if(t){var r=!t.isHiddenByModes;n=i&&!e.isUndefined(i.isHiddenByModes)?!i.isHiddenByModes:r}return n}(g,h)){var p=t.objectUtils.cloneDeep(e.omit(r,["modes",l,d])),f=n.getCompPlugin(r.componentType);return f&&a&&(r=f(r,a,c),p.layout=r.layout),g&&(g.overrides&&(h=e.omit(h,"isHiddenByModes"),e.assign(p,h)),g.definitions&&e.set(p,["modes","definitions"],g.definitions)),u(p,l,i,r,a,c),l!==d&&u(p,d,i,r,a,c),p}}function u(t,i,n,r,o,s){e.isUndefined(r[i])||(t[i]=e(r[i]).map(function(e){return a(n,e,o,s)}).compact().value())}function c(n,o,s,u,c){var l=r(o,n.structure.id),d=t.objectUtils.cloneDeep(e.omit(n,["structure","data"]));if(d.structure=a(l,n.structure,s,u),d.data=t.objectUtils.cloneDeep(n.data),i.isOpen("sv_multilingual",c)){var g=t.multilingual.getCurrentLanguage(),h=t.multilingual.getOriginalLanguage();e.isNull(g)||e.isNull(h)||g===h||e.assign(d.data.document_data,n.translations[g].data.document_data)}return d}return{getDisplayedJson:function(t,i,n,o,s,u){var l={};if(t)if(function(t){return!e.isUndefined(t.componentType)}(t)||function(t){return"Document"===e.get(t,"type")}(t)){var d=r(i,n);l.structure=a(d,t,o,s)}else l=function(t){return!e.isUndefined(t.structure)}(t)?c(t,i,o,s,u):function(t,i,n,r,o){i=i||{};var s={};return e.forEach(t,function(e,t){s[t]=c(e,i,n,r,o)}),s}(t,i,o,s,u);return l},applyModesOnSerializedStructure:function(e,t){return t=t||{},a(t,e)}}}),define("siteUtils/core/modesUtils",["lodash","coreUtils"],function(e,t){"use strict";function i(e){return e.settings.scrollPos}function n(e){return e.settings.width}function r(e){return e.type===t.siteConstants.COMP_MODES_TYPES.DEFAULT?1:2}function o(t,i,n){var r=e.find(t,function(e){return i[e.modeId]});return r||e(t).sortBy(n).head()}function s(i,n,s,a,u){return a?function(i,n,s,a){var u=e.find(i,{type:t.siteConstants.COMP_MODES_TYPES.DEFAULT}),c=e.find(i,{type:t.siteConstants.COMP_MODES_TYPES.HOVER});if(!n[u.modeId]){var l=s.propertyQuery,d=l&&a&&a[l];return d&&d.mobileDisplayedModeId?e.find(i,{modeId:d.mobileDisplayedModeId}):c}return o(i,n,r)}(i,n,s,u):o(i,n,r)}function a(t,i,n,r,o,s){var a=(f[t]||function(t,i){return e.filter(t,function(e){return i[e.modeId]})})(i,n,r,o,s);return e.isArray(a)?a:[a]}function u(e){return{modeType:e.type}}function c(t,i,n,r){var o=e.get(t,"modes.definitions");if(e.isEmpty(o))return{};var s=e.map(o,"modeId"),c=e.pick(i,s),l=function(t){return e.groupBy(t,function(e){return p[e.type]})}(o);return e.reduce(l,function(i,o,s){var l=a(s,o,c,t,n,r);return e.forEach(l,function(e){i[e.modeId]=u(e)}),i},{})}function l(i,n,r,o){var s=c(i,n,r,o),a=t.dataUtils.getChildrenData(i,!1);return e.reduce(a,function(t,i){var s=l(i,n,r,o);return e.assign(t,s)},s),s||{}}function d(t,i){var n=e.find(t,function(t){return e.isEqual([i],t.modeIds)});return n&&n.isHiddenByModes}function g(t,i){var n=e.find(t,function(t){return e.isEqual([i],t.modeIds)});return n&&!1===n.isHiddenByModes}var h={HOVER:"HOVER",SCROLL:"SCROLL",WIDTH:"WIDTH",APPLICATIVE:"APPLICATIVE"},p={};p[t.siteConstants.COMP_MODES_TYPES.DEFAULT]=h.HOVER,p[t.siteConstants.COMP_MODES_TYPES.HOVER]=h.HOVER,p[t.siteConstants.COMP_MODES_TYPES.SCROLL]=h.SCROLL,p[t.siteConstants.COMP_MODES_TYPES.WIDTH]=h.WIDTH,p[t.siteConstants.COMP_MODES_TYPES.APPLICATIVE]=h.APPLICATIVE;var f={};return f[h.HOVER]=s,f[h.SCROLL]=function(e,t){return o(e,t,i)},f[h.WIDTH]=function(e,t){return o(e,t,n)},{getActiveModeData:u,getActiveComponentModeIds:function(t,i){return e(t).mapValues(function(t,n){return e.some(i,{modeId:n})}).pickBy().value()},getModeChanges:function(t,i){t=t||{},i=i||{};var n=e({}).assign(t,i).keys().value();return e.transform(n,function(e,n){var r=t[n],o=i[n];r&&!o?e[n]=!1:!r&&o&&(e[n]=!0)},{})},isCompVisibleAfterRemovalFromMode:function(i,n,r,o,s){var a=i.componentStructure.getModes(r),u=n.isExist(a)&&n.get(a);if(!u)return!0;var c=i.componentStructure.getModesDefinitions(o),l=n.get(c),h=t.objectUtils.cloneDeep(u),p=e.findIndex(u.overrides,function(t){return e.isEqual(t.modeIds,[s])});return h.overrides=h.overrides||[],p>=0?h.overrides[p].isHiddenByModes=!0:h.overrides.push({modeIds:[s],isHiddenByModes:!0}),!function(i,n){var r=[],o=[],s=[],a=[];e.forEach(i,function(e){switch(e.type){case t.siteConstants.COMP_MODES_TYPES.DEFAULT:case t.siteConstants.COMP_MODES_TYPES.HOVER:r.push(e.modeId);break;case t.siteConstants.COMP_MODES_TYPES.SCROLL:o.push(e.modeId);break;case t.siteConstants.COMP_MODES_TYPES.WIDTH:s.push(e.modeId);break;default:a.push(e.modeId)}});var u=e.partial(d,n.overrides),c=e.partial(g,n.overrides);return n.isHiddenByModes?r.length&&!e.some(r,c)||o.length&&!e.some(o,c)||s.length&&!e.some(s,c)||a.length&&!e.some(a,c):r.length&&e.every(r,u)||o.length&&e.every(o,u)||s.length&&e.every(s,u)||a.length&&e.every(a,u)}(l,h)},getActiveModesForActivationChange:function(i,n,r,o){var s=e.clone(n),a=e.filter(i,{type:t.siteConstants.COMP_MODES_TYPES.SCROLL}),c=e.filter(i,{type:t.siteConstants.COMP_MODES_TYPES.WIDTH}),l=e.find(i,{type:t.siteConstants.COMP_MODES_TYPES.DEFAULT}),d=e.find(i,{type:t.siteConstants.COMP_MODES_TYPES.HOVER});if(r)switch(s[r.modeId]=u(r),r.type){case t.siteConstants.COMP_MODES_TYPES.SCROLL:e.forEach(a,function(e){e.modeId!==r.modeId&&delete s[e.modeId]});break;case t.siteConstants.COMP_MODES_TYPES.WIDTH:e.forEach(c,function(e){e.modeId!==r.modeId&&delete s[e.modeId]});break;case t.siteConstants.COMP_MODES_TYPES.DEFAULT:delete s[d.modeId];break;case t.siteConstants.COMP_MODES_TYPES.HOVER:l&&delete s[l.modeId]}if(o){var g=void 0;switch(delete s[o.modeId],o.type){case t.siteConstants.COMP_MODES_TYPES.SCROLL:r&&r.type===t.siteConstants.COMP_MODES_TYPES.SCROLL||(g=e.head(a));break;case t.siteConstants.COMP_MODES_TYPES.WIDTH:r&&r.type===t.siteConstants.COMP_MODES_TYPES.WIDTH||(g=e.head(c));break;case t.siteConstants.COMP_MODES_TYPES.DEFAULT:g=d;break;case t.siteConstants.COMP_MODES_TYPES.HOVER:l&&(g=l)}g&&(s[g.modeId]=u(g))}return s},resolveCompActiveModesRecursive:l}}),define("siteUtils/core/menuUtils",["lodash","coreUtils"],function(e,t){"use strict";function i(t,n){if(t.link&&"PageLink"===t.link.type){var r=e.get(t,"link.pageId.id");return r&&r===n.pageId||e.some(t.items,function(e){return i(e,n)})}return!!(t.link&&"DynamicPageLink"===t.link.type&&t.link.innerRoute&&n.innerRoute)&&(e.includes(n.innerRoute.split("/"),t.link.innerRoute.split("/")[1])||t.link.innerRoute===n.innerRoute)}function n(r,o,s,a,u,c){c=c||s&&t.wixUrlParser.utils.getResolvedSiteData(o);var l=!!e.isFunction(o.isMobileView)&&o.isMobileView(),d=e.isFunction(o.getRootNavigationInfo)?o.getRootNavigationInfo():a;return e.reduce(r,function(r,g){var h=l?g.isVisibleMobile:g.isVisible;if(u||h){var p=e.assign(e.clone(g),{items:n(g.items,o,s,a,u,c),link:function(i,n,r,o,s){if(!i)return i;if(e.isString(i))return{};var a=t.objectUtils.cloneDeep(i);return r&&(a.render=t.linkRenderer.renderLink(a,s||n,o)),a}(g.link,o,s,a,c),isSelected:i(g,d)});r.push(p)}return r},[])}function r(i,n,o,s,a,u){var c=void 0;a=a||o&&t.wixUrlParser.utils.getResolvedSiteData(n);var l=!!e.isFunction(n.isMobileView)&&n.isMobileView();return e.reduce(i,function(e,i){c=n.getDataByQuery(i.refId)||{};var d=l&&i.isVisibleMobile;if(u||i.isVisible||d){var g={label:c.title,isVisible:!c.hidePage,isVisibleMobile:void 0!==c.mobileHidePage?!c.mobileHidePage:!c.hidePage,items:r(i.items,n,o,s,a,u),link:function(e,i,n,r,o){var s={type:"PageLink",pageId:e};return n&&(s.render=t.linkRenderer.renderLink(s,o||i,r)),s}(i.refId,n,o,s,a)};i.displayCount&&(g.displayCount=i.displayCount),e.push(g)}return e},[])}function o(t,i,o,s){var a=t.getDataByQuery("CUSTOM_MAIN_MENU"),u=t.getDataByQuery("MAIN_MENU");return!a||u&&!e.isEmpty(u.items)?r(u.items,t,!i,o,null,s):n(a.items,t,!i,o,s)}return{getDropDownWidthIfOk:function(t,i,n,r,o,s,a,u){if(t-=o*(a?r.length:r.length-1),t-=u.left+u.right,i&&e.fill(r,s),e.includes(r,0))return null;var c=0,l=e.reduce(r,function(e,t){return e+t},0);if(l>t)return null;if(i){if(n){var d=Math.floor(t/r.length),g=e.times(r.length,e.constant(d));if((c=d*r.length)<t){var h=Math.floor(t-c);e.forEach(r,function(e,t){t<=h-1&&g[t]++})}return g}return r}if(n){var p=Math.floor((t-l)/r.length);c=0;var f=e.map(r,function(e){return c+=e+p,e+p});if(c<t){var m=Math.floor(t-c);e.forEach(r,function(e,t){t<=m-1&&f[t]++})}return f}return r},getMaxWidth:function(t){return e.reduce(t,function(e,t){return e>t?e:t},-1/0)},getMinWidth:function(t){return e.reduce(t,function(e,t){return e<t?e:t})},removeAllElementsWithWidthZero:function(t){return e.filter(t,function(e){return 0!==e})},getSiteMenuWithRender:function(e,t,i){return o(e,!1,t,i)},getMenuById:function(t,i,r,s,a){return"CUSTOM_MAIN_MENU"===t||"MAIN_MENU"===t?o(i,r,s):n(e.get(i.getDataByQuery(t),"items",[]),i,!r,s,a)},getMenuItems:n,getSiteMenuWithoutRenderedLinks:function(e,t){return o(e,!0,{},t)},getActiveAnchorInPage:function(t,i,n){if(!t)return null;var r=t.activeAnchorComp.id,o=e(i).filter(function(t){return t.link&&e.isObject(t.link.anchorDataId)&&"AnchorLink"===t.link.type&&e.has(t.link.pageId,"id")&&t.link.pageId.id===n}).find({link:{anchorDataId:{id:r}}});return o?o.link.anchorDataId.id:null},shouldHighlightAnchorInPage:function(e){return e.browserFlags().highlightAnchorsInMenu}}}),define("siteUtils/core/measurerUtils",["lodash","zepto"],function(e,t){"use strict";var i=function(){return"undefined"!=typeof window};return{getScreenWidth:function(e){return i()?e?320:window.document.body.clientWidth:0},getSiteMarginBottom:function(){var n=i()?t("#SITE_ROOT"):null;return e.parseInt(n?n.css("padding-bottom"):0,10)||0},isFooterFixedPosition:function(){var e=i()?t("#SITE_FOOTER"):null;return!!e&&"true"===e.attr("data-fixedposition")},getContainerVerticalMarginFromContent:function(e,n){return function(e,n){if(i()){var r=t(n),o=t(r.find("#"+e+"inlineContent"));return r.height()&&o.height()?r.height()-o.height():0}return 0}(e,n)}}}),define("siteUtils/core/positionAndSizeUtils",["lodash","coreUtils","siteUtils/core/layoutUtils"],function(e,t,i){"use strict";function n(n){function r(i,n,r,o){return i.fixedPosition?r.width:t.dockUtils.isHorizontalDockToScreen(i)?e.max([r.width,o]):n.width}function o(e,i,n){return e.fixedPosition||t.dockUtils.isVerticallyDockToScreen(e)?n.height:i.height}function s(t,i,r,o){r=e.max([r,o]);var s=(t&&t.pct&&t.pct/100*i||0)+(t&&t.px||0)+(t&&t.vw&&t.vw/100*r||0);return n?Math.ceil(s):s}function a(e,t,i){var r=(e.pct&&e.pct/100*t||0)+(e.px||0)+(e.vh&&e.vh/100*i||0);return n?Math.ceil(r):r}function u(e,t,n,o){if(i.isHorizontallyStretched(e)){var a=r(e,t,n,o),u=e.docked;return a-(s(u.left,a,n.width,o)+s(u.right,a,n.width,o))}return e.width}function c(e,t,n,r){if(i.isAspectRatioOn(e))return r*e.aspectRatio;if(i.isVerticallyStretched(e)){var s=o(e,t,n),u=e.docked;return s-(a(u.top,s,n.height)+a(u.bottom,s,n.height))}return e.height}function l(i,n,o,a,u,c){var l=i.docked;if(l){var d=r(i,n,o,a);if(l.left){var g=s(l.left,d,o.width,a);if(t.dockUtils.isHorizontalDockToScreen(i)){g-=e.isUndefined(u)?function(t,i){return e.max([(t-i)/2,0])}(o.width,a):u}return g}if(l.right){return d-(c+s(l.right,d,o.width,a))}if(l.hCenter){return(d-c)/2+s(l.hCenter,d,o.width,a)}}return i.x}function d(e,t,n,r){var s=e.docked;if(s){var u=o(e,t,n);if(i.isVerticallyStretchedToScreen(e))return e.y;if(s.top)return a(s.top,u,n.height);if(s.bottom){return u-(r+a(s.bottom,u,n.height))}if(s.vCenter){return(u-r)/2+a(s.vCenter,u,n.height)}}return e.y}function g(e){return e&&!(!e.docked&&!e.aspectRatio)}function h(t){return e.pick(t,["x","y","width","height"])}function p(e,t,i,n,r){var o=u(e,t,i,n),s=c(e,t,i,o);return{x:l(e,t,i,n,r,o),y:d(e,t,i,s),width:o,height:s}}return{isVerbsLayout:g,getVerbsPositionAndSize:p,getAbsolutePositionAndSize:h,getYInPixels:d,getHeightInPixels:function(e,t,i,n){return c(e,t,i,u(e,t,i,n))},getPositionAndSize:function(e,t,i,n,r){return g(e)?p(e,t,i,n,r):h(e)}}}var r=n(!1),o=n(!0);return Object.freeze(r),Object.freeze(o),{getYInPixelsRounded:o.getYInPixels,getHeightInPixelsRounded:o.getHeightInPixels,getPositionAndSizeRounded:o.getPositionAndSize,getYInPixels:r.getYInPixels,getHeightInPixels:r.getHeightInPixels,isVerbsLayout:r.isVerbsLayout,getVerbsPositionAndSize:r.getVerbsPositionAndSize,getAbsolutePositionAndSize:r.getAbsolutePositionAndSize,getPositionAndSize:r.getPositionAndSize}}),define("siteUtils/core/structureDimensions",["lodash","siteUtils/core/positionAndSizeUtils"],function(e,t){"use strict";function i(t){var i={};return i[t.id]=e.pick(t.layout,["x","y","width","height"]),i}function n(i,r,o,s,a){var u=r[s],c=i.components||i.children;e.forEach(c,function(e){r[e.id]=t.getPositionAndSize(e.layout,u,o,a),n(e,r,o,e.id,a)})}function r(r,o,s,a){return a?function(r,o,s){var a=i(r),u=a[r.id];return e.forEach(r.mobileComponents,function(e){a[e.id]=t.getPositionAndSize(e.layout,u,o,s),n(e,a,o,e.id,s)}),a}(r,o,s):function(e,t,r){var o=i(e);return n(e,o,t,e.id,r),o}(r,o,s)}return{createDimensionsMap:r}}),define("siteUtils/core/socialCounterDatabaseAPI",["lodash","coreUtils"],function(e,t){"use strict";var i={defaultQuerySuccessCallback:function(){},defaultQueryCollectFailureCallback:function(){},getLikesForPostsList:function(e,i,n){var r={postsList:e};t.ajaxLibrary.ajax({type:"GET",url:"https://www.wix.com/_api/blog-social-counters/query-feed/",crossDomain:!0,data:r,contentType:"application/json",dataType:"json",success:i||this.defaultQuerySuccessCallback,error:n||this.defaultQueryCollectFailureCallback})},getAllCountersForPost:function(e,i,n,r){var o={storeId:e,postId:i};t.ajaxLibrary.ajax({type:"GET",url:"https://www.wix.com/_api/blog-social-counters/query-post/",crossDomain:!0,data:o,contentType:"application/json",dataType:"json",success:n||this.defaultQuerySuccessCallback,error:r||this.defaultQueryCollectFailureCallback})},updateCounter:function(i,n,r,o,s,a,u){"likes"===i&&this.toggleUserLike(s);var c=n;e.isNil(c)||(c=c.substring(0,1400));var l={storeId:o.datastoreId,postId:s,counterType:i,counterName:c,counterValue:r};t.ajaxLibrary.ajax({url:"https://www.wix.com/_api/blog-social-counters/collector/",crossDomain:!0,type:"POST",data:l,dataType:"json",contentType:"application/json",success:a||this.defaultQuerySuccessCallback,error:u||this.defaultQueryCollectFailureCallback})},updateCategoryTagSearchesCounter:function(e,t,i){this.updateCounter(e,t,i)},toggleUserLike:function(t){var i=JSON.parse(window.localStorage.getItem("likedBlogPosts"))||{};!1!==i[t]&&e.has(i,t)?i[t]=!1:i[t]=!0,window.localStorage.setItem("likedBlogPosts",JSON.stringify(i))}};return{getAllCountersForPost:i.getAllCountersForPost,updateCounter:i.updateCounter,toggleUserLike:i.toggleUserLike,updateCategoryTagSearchesCounter:i.updateCategoryTagSearchesCounter}}),define("siteUtils/core/socialShareHandler",["lodash","coreUtils","siteUtils/core/socialCounterDatabaseAPI"],function(e,t,i){"use strict";function n(e,t){var i=e,n=i.split("#!");return n.length>1&&(n[1]=decodeURIComponent(n[1]),i=n.join("#!")),t&&(i=i.replace("#!","/#!")),encodeURIComponent(i)}function r(t){return t?encodeURIComponent(e.unescape(t)):""}function o(t){return t?encodeURIComponent(e.unescape(t)):""}function s(e,i){var n=e||"";return e&&!t.urlUtils.isExternalUrl(e)&&(n=i.getMediaFullStaticUrl(e)),n=encodeURIComponent(n)}function a(e){var t=m;return t+=n(e.url)}function u(e,t){var i=y;return i+=n(e.url),i+="&Title="+r(e.title),i+="&ImageURL="+s(e.imageUrl,t)}function c(e,t){var i=v;return i+=n(e.url),i+="&media="+s(e.imageUrl,t),i+="&description="+r(e.title)}function l(e){var t=S;return t+=n(e.url),t+="&text="+r(e.title)+function(e){return e?" "+(e=e.replace(/#/g,encodeURIComponent("#"))):""}(e.hashTags)+encodeURIComponent("\n")}function d(e){var t=P;return t+=n(e.url),t+="&title="+r(e.title),t+="&description="+o(e.description)}function g(e){var t=w;return t+=r(e.title),t+=" - "+n(e.url)}function h(e){var t=I;return t+=n(e.url),t+="&title="+r(e.title)}function p(e){var t="mailto:?";return t+="&subject="+r(e.title),t+="&body="+o(e.description)}function f(t,n,r){var o=function(e,t){return{google:a,fancy:u,pinterest:c,twitter:l,facebook:d,whatsapp:g,email:p,linkedin:h}[e.service](e,t)||""}(n,t.getSiteData());n.addDeepLinkParam&&(o=function(t,i){var n=t.split("#"),r=e.includes(t,"?")?"&":"?";return n[0]+=r+i,n.join("#")}(o,"deeplink_referrer=socialB_"+n.service)),"email"!==n.service?(r||i.updateCounter("shares",n.service,1,n.storeId,n.postId),t.openPopup(o,"wixapps_share","width=635,height=346,scrollbars=no,status=no,toolbar=no,menubar=no,location=no")):window.location.href=o}var m="https://plus.google.com/share?url=",y="http://www.fancy.com/fancyit/fancy?ItemURL=",v="http://pinterest.com/pin/create/button/?url=",S="https://twitter.com/intent/tweet?url=",P="http://www.facebook.com/sharer.php?u=",w="whatsapp://send?text=",M="https://www.googleapis.com/urlshortener/v1/url?key=AIzaSyDjvIfgLnQJsOxcV01kJae48WSynmXmZ2I",I="https://www.linkedin.com/shareArticle?mini=true&url=";return{handleShareRequest:f,shortenURL:function(e,i,n,r){t.ajaxLibrary.ajax({url:M,type:"POST",contentType:"application/json",data:'{"longUrl": "'+e+'"}',timeout:i||0,async:!1,success:function(e){n(e.id)},error:r})}}}),define("siteUtils/core/componentVisibility",["lodash"],function(e){"use strict";var t=[];return{isComponentVisible:function(i){return e.every(t,function(e){return e(i)})},registerPlugin:function(e){t.push(e)}}}),define("siteUtils/core/fileUploadManager",["lodash"],function(e){"use strict";function t(e,t,n){var a=s[e.fileType],u=new FormData;u.append("upload_token",t),u.append("media_type",a),u.append("file",e.file),u.append("siteMediaToken",t),u.append("ns",o);var c=new XMLHttpRequest;c.onreadystatechange=function(){c.readyState===XMLHttpRequest.DONE&&function(e,t){var n=JSON.parse(t.response);200===t.status?(e.onSuccess(n),i()):(r=!1,e.onFail(n))}(e,c)},c.open("POST",n),c.send(u)}function i(){if(0!==n.length){!function(e){var i=new XMLHttpRequest;i.onreadystatechange=function(){if(i.readyState===XMLHttpRequest.DONE){var n=JSON.parse(i.response);n.error_code?(r=!1,e.onFail(n)):t(e,n.upload_token,n.upload_url)}},i.open("GET","https://files.wix.com/files/upload/url?media_type=picture"),i.setRequestHeader("Authorization",e.authorizationToken),i.setRequestHeader("Accept","application/json"),i.setRequestHeader("Content-Type","application/json"),i.send(null)}(e.pullAt(n,0)[0])}else r=!1}var n=[],r=!1,o="_WixCodeAnonymUpload",s={Image:"picture",Document:"document"};return{uploadFile:function(e,t,o,s,a){if(!t)throw new Error("No upload authorization token given!");n=n.concat({file:e,authorizationToken:t,fileType:o,onSuccess:s,onFail:a}),r||(i(),r=!0)}}}),define("siteUtils/core/compAlignmentUtils",[],function(){"use strict";var e={LEFT:"left",CENTER:"center",RIGHT:"right"},t={TOP:"top",CENTER:"center",BOTTOM:"bottom"};return{getLeft:function(t,i,n,r){var o=void 0,s=Math.min(r,n),a=(n-r)/2;switch(t.horizontalAlignment){case e.LEFT:o=-Math.max(0,a),o+=t.horizontalOffset;break;case e.RIGHT:o=s-i+Math.max(0,a),o-=t.horizontalOffset;break;case e.CENTER:o=(s-i)/2,o+=t.horizontalOffset}return o},getTop:function(e,i,n){var r=void 0,o=n-i;switch(e.verticalAlignment){case t.TOP:r=e.verticalOffset;break;case t.BOTTOM:r=Math.max(o-e.verticalOffset,0);break;case t.CENTER:r=Math.max(o/2,0),r+=e.verticalOffset}return r}}}),define("siteUtils/core/structuresDescription",["lodash","coreUtils"],function(e,t){"use strict";function i(i,n){var o=r(i,"masterPage"),s=void 0,a=i.getViewMode(),u=i.getCurrentUrlPageId(),c={structure:o,getDomNodeFunc:n};return i.isPageLandingPage(u)?(c.structure=function(i){return i=e.clone(i),["children","mobileComponents"].forEach(function(n){var r=i[n],o=e.chain(r).find({id:"PAGES_CONTAINER"}).cloneDeep().value();o.layout.y=0,function(e){if(e.layout.anchors){for(var t={distance:0,locked:!0,originalValue:e.layout.height,targetComponent:"masterPage",topToTop:e.layout.height,type:"BOTTOM_PARENT"};e.layout.anchors.length;)e.layout.anchors.pop();e.layout.anchors.push(t)}}(o);var s=function(i){return e.filter(i,function(e){return"PAGES_CONTAINER"!==e.id&&t.constants.LANDING_PAGES_COMP_IDS[e.id]})}(r);i[n]=s.concat(o)}),i}(o),s=e.get(i,["anchorsMap","landingPageMasterPage",a])):s=e.get(i,["anchorsMap","defaultMasterPage",a]),s&&e.set(i,["anchorsMap",o.id,a],s),c}function n(){return{id:"SITE_BACKGROUND",skin:"wysiwyg.viewer.skins.siteBackgroundSkin",componentType:"wysiwyg.viewer.components.SiteBackground",styleId:"siteBackground"}}function r(t,i){return t.pagesDataRaw&&!e.isEmpty(t.pagesDataRaw)?e.get(t,["pagesDataRaw","pagesData",i,"structure"]):t.getPageData(i,["structure"])}return{getInner:function(e,t){var i=e.getCurrentUrlPageId();return{structure:r(e,i),pageId:i,getDomNodeFunc:t}},getOuter:i,getSiteBackground:function(e,t){return{structure:{id:"SITE_BACKGROUND",skin:"wysiwyg.viewer.skins.siteBackgroundSkin",componentType:"wysiwyg.viewer.components.SiteBackground",styleId:"siteBackground"},getDomNodeFunc:t}},getWixAds:function(e){return{structure:{id:e.WIX_ADS_ID,componentType:"wysiwyg.viewer.components.WixAds",styleId:"wixAds"},getDomNodeFunc:function(e,t){var i=t||e;return window.document.getElementById(i)}}},getSiteBackgroundStructure:n}}),define("siteUtils/core/clientSpecMapUtils",["lodash"],function(e){"use strict";return{getMainSectionWidgetData:function(t){return e.find(e.get(t,"widgets"),function(t){return e.get(t,"appPage.name")&&!e.get(t,"appPage.hidden")})}}}),define("siteUtils",["coreUtils","siteUtils/utils/mobileUtils","siteUtils/utils/touchMediaZoomUtils","siteUtils/svgShapes/svgFeatureDetection","siteUtils/core/MobileDeviceAnalyzer","siteUtils/core/SiteData","siteUtils/core/dataResolver","siteUtils/core/componentsAnchorsMetaData","siteUtils/core/layoutAnchorsUtils","siteUtils/core/originalValuesMapGenerator","siteUtils/core/fullToDisplayedJson","siteUtils/core/modesUtils","siteUtils/core/menuUtils","siteUtils/core/layoutUtils","siteUtils/core/measurerUtils","siteUtils/core/masterPageLayoutUtils","siteUtils/core/positionAndSizeUtils","siteUtils/core/structureDimensions","siteUtils/core/socialShareHandler","siteUtils/core/socialCounterDatabaseAPI","siteUtils/core/componentVisibility","siteUtils/core/fileUploadManager","siteUtils/core/pagesUrlUtils","siteUtils/core/jsonUpdaterRegistrar","siteUtils/core/compAlignmentUtils","siteUtils/core/siteStructureRmiUtils","siteUtils/core/structuresDescription","siteUtils/core/clientSpecMapUtils"],function(e,t,i,n,r,o,s,a,u,c,l,d,g,h,p,f,m,y,v,S,P,w,M,I,b,D,T,U){"use strict";return{renderDoneMixin:e.renderDoneMixin,mobileUtils:t,touchMediaZoomUtils:i,MobileDeviceAnalyzer:r,SiteData:o,dataResolver:s,componentsAnchorsMetaData:a,layoutAnchors:u,originalValuesMapGenerator:c,constants:e.constants,fullToDisplayedJson:l,modes:d,linkRenderer:e.linkRenderer,linkUtils:e.linkUtils,menuUtils:g,layout:h,masterPageLayout:f,measurerUtils:p,positionAndSize:m,structureDimensions:y,socialShareHandler:v,socialCounterDatabaseAPI:S,componentVisibility:{isComponentVisible:P.isComponentVisible,registerPlugin:P.registerPlugin},svgFeatureDetection:n,fileUploadManager:w,compAlignmentUtils:b,pagesUrlUtils:M,jsonUpdaterRegistrar:I,siteStructureUtils:D,structuresDescription:T,clientSpecMapUtils:U}});
//# sourceMappingURL=siteUtils.min.js.map